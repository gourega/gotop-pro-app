function mA(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function gA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uT={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),yA=Symbol.for("react.portal"),vA=Symbol.for("react.fragment"),_A=Symbol.for("react.strict_mode"),EA=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),wA=Symbol.for("react.context"),CA=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),SA=Symbol.for("react.memo"),AA=Symbol.for("react.lazy"),Zg=Symbol.iterator;function RA(n){return n===null||typeof n!="object"?null:(n=Zg&&n[Zg]||n["@@iterator"],typeof n=="function"?n:null)}var cT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dT=Object.assign,fT={};function Wo(n,e,t){this.props=n,this.context=e,this.refs=fT,this.updater=t||cT}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Wo.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function hT(){}hT.prototype=Wo.prototype;function np(n,e,t){this.props=n,this.context=e,this.refs=fT,this.updater=t||cT}var rp=np.prototype=new hT;rp.constructor=np;dT(rp,Wo.prototype);rp.isPureReactComponent=!0;var jg=Array.isArray,pT=Object.prototype.hasOwnProperty,ip={current:null},mT={key:!0,ref:!0,__self:!0,__source:!0};function gT(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)pT.call(e,r)&&!mT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Da,type:n,key:o,ref:s,props:i,_owner:ip.current}}function PA(n,e){return{$$typeof:Da,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function op(n){return typeof n=="object"&&n!==null&&n.$$typeof===Da}function kA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ey=/\/+/g;function Sd(n,e){return typeof n=="object"&&n!==null&&n.key!=null?kA(""+n.key):e.toString(36)}function ql(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Da:case yA:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+Sd(s,0):r,jg(i)?(t="",n!=null&&(t=n.replace(ey,"$&/")+"/"),ql(i,e,t,"",function(c){return c})):i!=null&&(op(i)&&(i=PA(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ey,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",jg(n))for(var a=0;a<n.length;a++){o=n[a];var l=r+Sd(o,a);s+=ql(o,e,t,l,i)}else if(l=RA(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=r+Sd(o,a++),s+=ql(o,e,t,l,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function yl(n,e,t){if(n==null)return n;var r=[],i=0;return ql(n,r,"","",function(o){return e.call(t,o,i++)}),r}function xA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Pt={current:null},Gl={transition:null},NA={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Gl,ReactCurrentOwner:ip};function yT(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:yl,forEach:function(n,e,t){yl(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return yl(n,function(){e++}),e},toArray:function(n){return yl(n,function(e){return e})||[]},only:function(n){if(!op(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ue.Component=Wo;ue.Fragment=vA;ue.Profiler=EA;ue.PureComponent=np;ue.StrictMode=_A;ue.Suspense=IA;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NA;ue.act=yT;ue.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=dT({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ip.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)pT.call(e,l)&&!mT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Da,type:n.type,key:i,ref:o,props:r,_owner:s}};ue.createContext=function(n){return n={$$typeof:wA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TA,_context:n},n.Consumer=n};ue.createElement=gT;ue.createFactory=function(n){var e=gT.bind(null,n);return e.type=n,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(n){return{$$typeof:CA,render:n}};ue.isValidElement=op;ue.lazy=function(n){return{$$typeof:AA,_payload:{_status:-1,_result:n},_init:xA}};ue.memo=function(n,e){return{$$typeof:SA,type:n,compare:e===void 0?null:e}};ue.startTransition=function(n){var e=Gl.transition;Gl.transition={};try{n()}finally{Gl.transition=e}};ue.unstable_act=yT;ue.useCallback=function(n,e){return Pt.current.useCallback(n,e)};ue.useContext=function(n){return Pt.current.useContext(n)};ue.useDebugValue=function(){};ue.useDeferredValue=function(n){return Pt.current.useDeferredValue(n)};ue.useEffect=function(n,e){return Pt.current.useEffect(n,e)};ue.useId=function(){return Pt.current.useId()};ue.useImperativeHandle=function(n,e,t){return Pt.current.useImperativeHandle(n,e,t)};ue.useInsertionEffect=function(n,e){return Pt.current.useInsertionEffect(n,e)};ue.useLayoutEffect=function(n,e){return Pt.current.useLayoutEffect(n,e)};ue.useMemo=function(n,e){return Pt.current.useMemo(n,e)};ue.useReducer=function(n,e,t){return Pt.current.useReducer(n,e,t)};ue.useRef=function(n){return Pt.current.useRef(n)};ue.useState=function(n){return Pt.current.useState(n)};ue.useSyncExternalStore=function(n,e,t){return Pt.current.useSyncExternalStore(n,e,t)};ue.useTransition=function(){return Pt.current.useTransition()};ue.version="18.3.1";uT.exports=ue;var F=uT.exports;const I=gA(F),MA=mA({__proto__:null,default:I},[F]);var yf={},vT={exports:{}},Kt={},_T={exports:{}},ET={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,re){var ae=W.length;W.push(re);e:for(;0<ae;){var Ne=ae-1>>>1,Te=W[Ne];if(0<i(Te,re))W[Ne]=re,W[ae]=Te,ae=Ne;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var re=W[0],ae=W.pop();if(ae!==re){W[0]=ae;e:for(var Ne=0,Te=W.length,ze=Te>>>1;Ne<ze;){var Vn=2*(Ne+1)-1,Ln=W[Vn],bn=Vn+1,On=W[bn];if(0>i(Ln,ae))bn<Te&&0>i(On,Ln)?(W[Ne]=On,W[bn]=ae,Ne=bn):(W[Ne]=Ln,W[Vn]=ae,Ne=Vn);else if(bn<Te&&0>i(On,ae))W[Ne]=On,W[bn]=ae,Ne=bn;else break e}}return re}function i(W,re){var ae=W.sortIndex-re.sortIndex;return ae!==0?ae:W.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],c=[],h=1,m=null,g=3,v=!1,T=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(W){for(var re=t(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=W)r(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(c)}}function D(W){if(k=!1,R(W),!T)if(t(l)!==null)T=!0,ts(O);else{var re=t(c);re!==null&&Dn(D,re.startTime-W)}}function O(W,re){T=!1,k&&(k=!1,S(E),E=-1),v=!0;var ae=g;try{for(R(re),m=t(l);m!==null&&(!(m.expirationTime>re)||W&&!M());){var Ne=m.callback;if(typeof Ne=="function"){m.callback=null,g=m.priorityLevel;var Te=Ne(m.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?m.callback=Te:m===t(l)&&r(l),R(re)}else r(l);m=t(l)}if(m!==null)var ze=!0;else{var Vn=t(c);Vn!==null&&Dn(D,Vn.startTime-re),ze=!1}return ze}finally{m=null,g=ae,v=!1}}var U=!1,P=null,E=-1,w=5,A=-1;function M(){return!(n.unstable_now()-A<w)}function V(){if(P!==null){var W=n.unstable_now();A=W;var re=!0;try{re=P(!0,W)}finally{re?x():(U=!1,P=null)}}else U=!1}var x;if(typeof C=="function")x=function(){C(V)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,on=Oe.port2;Oe.port1.onmessage=V,x=function(){on.postMessage(null)}}else x=function(){N(V,0)};function ts(W){P=W,U||(U=!0,x())}function Dn(W,re){E=N(function(){W(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){T||v||(T=!0,ts(O))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var ae=g;g=re;try{return W()}finally{g=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=g;g=W;try{return re()}finally{g=ae}},n.unstable_scheduleCallback=function(W,re,ae){var Ne=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ne+ae:Ne):ae=Ne,W){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ae+Te,W={id:h++,callback:re,priorityLevel:W,startTime:ae,expirationTime:Te,sortIndex:-1},ae>Ne?(W.sortIndex=ae,e(c,W),t(l)===null&&W===t(c)&&(k?(S(E),E=-1):k=!0,Dn(D,ae-Ne))):(W.sortIndex=Te,e(l,W),T||v||(T=!0,ts(O))),W},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(W){var re=g;return function(){var ae=g;g=re;try{return W.apply(this,arguments)}finally{g=ae}}}})(ET);_T.exports=ET;var DA=_T.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VA=F,Wt=DA;function z(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TT=new Set,ra={};function Di(n,e){Io(n,e),Io(n+"Capture",e)}function Io(n,e){for(ra[n]=e,n=0;n<e.length;n++)TT.add(e[n])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=Object.prototype.hasOwnProperty,LA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ty={},ny={};function bA(n){return vf.call(ny,n)?!0:vf.call(ty,n)?!1:LA.test(n)?ny[n]=!0:(ty[n]=!0,!1)}function OA(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function UA(n,e,t,r){if(e===null||typeof e>"u"||OA(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ut[n]=new kt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ut[e]=new kt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ut[n]=new kt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ut[n]=new kt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ut[n]=new kt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ut[n]=new kt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ut[n]=new kt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ut[n]=new kt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ut[n]=new kt(n,5,!1,n.toLowerCase(),null,!1,!1)});var sp=/[\-:]([a-z])/g;function ap(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sp,ap);ut[e]=new kt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sp,ap);ut[e]=new kt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sp,ap);ut[e]=new kt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ut[n]=new kt(n,1,!1,n.toLowerCase(),null,!1,!1)});ut.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ut[n]=new kt(n,1,!1,n.toLowerCase(),null,!0,!0)});function lp(n,e,t,r){var i=ut.hasOwnProperty(e)?ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UA(e,t,i,r)&&(t=null),r||i===null?bA(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ar=VA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vl=Symbol.for("react.element"),ji=Symbol.for("react.portal"),eo=Symbol.for("react.fragment"),up=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),wT=Symbol.for("react.provider"),CT=Symbol.for("react.context"),cp=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),IT=Symbol.for("react.offscreen"),ry=Symbol.iterator;function ms(n){return n===null||typeof n!="object"?null:(n=ry&&n[ry]||n["@@iterator"],typeof n=="function"?n:null)}var Le=Object.assign,Ad;function As(n){if(Ad===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ad=e&&e[1]||""}return`
`+Ad+n}var Rd=!1;function Pd(n,e){if(!n||Rd)return"";Rd=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=a);break}}}finally{Rd=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?As(n):""}function FA(n){switch(n.tag){case 5:return As(n.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 2:case 15:return n=Pd(n.type,!1),n;case 11:return n=Pd(n.type.render,!1),n;case 1:return n=Pd(n.type,!0),n;default:return""}}function wf(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case eo:return"Fragment";case ji:return"Portal";case _f:return"Profiler";case up:return"StrictMode";case Ef:return"Suspense";case Tf:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case CT:return(n.displayName||"Context")+".Consumer";case wT:return(n._context.displayName||"Context")+".Provider";case cp:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dp:return e=n.displayName||null,e!==null?e:wf(n.type)||"Memo";case pr:e=n._payload,n=n._init;try{return wf(n(e))}catch{}}return null}function BA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wf(e);case 8:return e===up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ST(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $A(n){var e=ST(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _l(n){n._valueTracker||(n._valueTracker=$A(n))}function AT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=ST(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function mu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cf(n,e){var t=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function iy(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=zr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RT(n,e){e=e.checked,e!=null&&lp(n,"checked",e,!1)}function If(n,e){RT(n,e);var t=zr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Sf(n,e.type,t):e.hasOwnProperty("defaultValue")&&Sf(n,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function oy(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Sf(n,e,t){(e!=="number"||mu(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Rs=Array.isArray;function po(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+zr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Af(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sy(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(z(92));if(Rs(t)){if(1<t.length)throw Error(z(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:zr(t)}}function PT(n,e){var t=zr(e.value),r=zr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function ay(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function kT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rf(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?kT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var El,xT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=El.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ia(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zA=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(n){zA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Fs[e]=Fs[n]})});function NT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Fs.hasOwnProperty(n)&&Fs[n]?(""+e).trim():e+"px"}function MT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=NT(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var qA=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pf(n,e){if(e){if(qA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function kf(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=null;function fp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nf=null,mo=null,go=null;function ly(n){if(n=ba(n)){if(typeof Nf!="function")throw Error(z(280));var e=n.stateNode;e&&(e=mc(e),Nf(n.stateNode,n.type,e))}}function DT(n){mo?go?go.push(n):go=[n]:mo=n}function VT(){if(mo){var n=mo,e=go;if(go=mo=null,ly(n),e)for(n=0;n<e.length;n++)ly(e[n])}}function LT(n,e){return n(e)}function bT(){}var kd=!1;function OT(n,e,t){if(kd)return n(e,t);kd=!0;try{return LT(n,e,t)}finally{kd=!1,(mo!==null||go!==null)&&(bT(),VT())}}function oa(n,e){var t=n.stateNode;if(t===null)return null;var r=mc(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(z(231,e,typeof t));return t}var Mf=!1;if(Zn)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Mf=!1}function GA(n,e,t,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var Bs=!1,gu=null,yu=!1,Df=null,HA={onError:function(n){Bs=!0,gu=n}};function WA(n,e,t,r,i,o,s,a,l){Bs=!1,gu=null,GA.apply(HA,arguments)}function KA(n,e,t,r,i,o,s,a,l){if(WA.apply(this,arguments),Bs){if(Bs){var c=gu;Bs=!1,gu=null}else throw Error(z(198));yu||(yu=!0,Df=c)}}function Vi(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function UT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function uy(n){if(Vi(n)!==n)throw Error(z(188))}function JA(n){var e=n.alternate;if(!e){if(e=Vi(n),e===null)throw Error(z(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return uy(i),n;if(o===r)return uy(i),e;o=o.sibling}throw Error(z(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===t){s=!0,t=i,r=o;break}if(a===r){s=!0,r=i,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,r=i;break}if(a===r){s=!0,r=o,t=i;break}a=a.sibling}if(!s)throw Error(z(189))}}if(t.alternate!==r)throw Error(z(190))}if(t.tag!==3)throw Error(z(188));return t.stateNode.current===t?n:e}function FT(n){return n=JA(n),n!==null?BT(n):null}function BT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=BT(n);if(e!==null)return e;n=n.sibling}return null}var $T=Wt.unstable_scheduleCallback,cy=Wt.unstable_cancelCallback,YA=Wt.unstable_shouldYield,QA=Wt.unstable_requestPaint,Ge=Wt.unstable_now,XA=Wt.unstable_getCurrentPriorityLevel,hp=Wt.unstable_ImmediatePriority,zT=Wt.unstable_UserBlockingPriority,vu=Wt.unstable_NormalPriority,ZA=Wt.unstable_LowPriority,qT=Wt.unstable_IdlePriority,dc=null,wn=null;function jA(n){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(dc,n,void 0,(n.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:nR,eR=Math.log,tR=Math.LN2;function nR(n){return n>>>=0,n===0?32:31-(eR(n)/tR|0)|0}var Tl=64,wl=4194304;function Ps(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _u(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var a=s&~i;a!==0?r=Ps(a):(o&=s,o!==0&&(r=Ps(o)))}else s=t&~i,s!==0?r=Ps(s):o!==0&&(r=Ps(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-dn(e),i=1<<t,r|=n[t],e&=~i;return r}function rR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iR(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-dn(o),a=1<<s,l=i[s];l===-1?(!(a&t)||a&r)&&(i[s]=rR(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function Vf(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function GT(){var n=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),n}function xd(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Va(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-dn(e),n[e]=t}function oR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-dn(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function pp(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-dn(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var _e=0;function HT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var WT,mp,KT,JT,YT,Lf=!1,Cl=[],kr=null,xr=null,Nr=null,sa=new Map,aa=new Map,yr=[],sR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dy(n,e){switch(n){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function ys(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ba(e),e!==null&&mp(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function aR(n,e,t,r,i){switch(e){case"focusin":return kr=ys(kr,n,e,t,r,i),!0;case"dragenter":return xr=ys(xr,n,e,t,r,i),!0;case"mouseover":return Nr=ys(Nr,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return sa.set(o,ys(sa.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,aa.set(o,ys(aa.get(o)||null,n,e,t,r,i)),!0}return!1}function QT(n){var e=di(n.target);if(e!==null){var t=Vi(e);if(t!==null){if(e=t.tag,e===13){if(e=UT(t),e!==null){n.blockedOn=e,YT(n.priority,function(){KT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hl(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=bf(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);xf=r,t.target.dispatchEvent(r),xf=null}else return e=ba(t),e!==null&&mp(e),n.blockedOn=t,!1;e.shift()}return!0}function fy(n,e,t){Hl(n)&&t.delete(e)}function lR(){Lf=!1,kr!==null&&Hl(kr)&&(kr=null),xr!==null&&Hl(xr)&&(xr=null),Nr!==null&&Hl(Nr)&&(Nr=null),sa.forEach(fy),aa.forEach(fy)}function vs(n,e){n.blockedOn===e&&(n.blockedOn=null,Lf||(Lf=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,lR)))}function la(n){function e(i){return vs(i,n)}if(0<Cl.length){vs(Cl[0],n);for(var t=1;t<Cl.length;t++){var r=Cl[t];r.blockedOn===n&&(r.blockedOn=null)}}for(kr!==null&&vs(kr,n),xr!==null&&vs(xr,n),Nr!==null&&vs(Nr,n),sa.forEach(e),aa.forEach(e),t=0;t<yr.length;t++)r=yr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<yr.length&&(t=yr[0],t.blockedOn===null);)QT(t),t.blockedOn===null&&yr.shift()}var yo=ar.ReactCurrentBatchConfig,Eu=!0;function uR(n,e,t,r){var i=_e,o=yo.transition;yo.transition=null;try{_e=1,gp(n,e,t,r)}finally{_e=i,yo.transition=o}}function cR(n,e,t,r){var i=_e,o=yo.transition;yo.transition=null;try{_e=4,gp(n,e,t,r)}finally{_e=i,yo.transition=o}}function gp(n,e,t,r){if(Eu){var i=bf(n,e,t,r);if(i===null)Bd(n,e,r,Tu,t),dy(n,r);else if(aR(i,n,e,t,r))r.stopPropagation();else if(dy(n,r),e&4&&-1<sR.indexOf(n)){for(;i!==null;){var o=ba(i);if(o!==null&&WT(o),o=bf(n,e,t,r),o===null&&Bd(n,e,r,Tu,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else Bd(n,e,r,null,t)}}var Tu=null;function bf(n,e,t,r){if(Tu=null,n=fp(r),n=di(n),n!==null)if(e=Vi(n),e===null)n=null;else if(t=e.tag,t===13){if(n=UT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Tu=n,null}function XT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XA()){case hp:return 1;case zT:return 4;case vu:case ZA:return 16;case qT:return 536870912;default:return 16}default:return 16}}var Ir=null,yp=null,Wl=null;function ZT(){if(Wl)return Wl;var n,e=yp,t=e.length,r,i="value"in Ir?Ir.value:Ir.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return Wl=i.slice(n,1<r?1-r:void 0)}function Kl(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Il(){return!0}function hy(){return!1}function Jt(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Il:hy,this.isPropagationStopped=hy,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vp=Jt(Ko),La=Le({},Ko,{view:0,detail:0}),dR=Jt(La),Nd,Md,_s,fc=Le({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_s&&(_s&&n.type==="mousemove"?(Nd=n.screenX-_s.screenX,Md=n.screenY-_s.screenY):Md=Nd=0,_s=n),Nd)},movementY:function(n){return"movementY"in n?n.movementY:Md}}),py=Jt(fc),fR=Le({},fc,{dataTransfer:0}),hR=Jt(fR),pR=Le({},La,{relatedTarget:0}),Dd=Jt(pR),mR=Le({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),gR=Jt(mR),yR=Le({},Ko,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vR=Jt(yR),_R=Le({},Ko,{data:0}),my=Jt(_R),ER={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=wR[n])?!!e[n]:!1}function _p(){return CR}var IR=Le({},La,{key:function(n){if(n.key){var e=ER[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Kl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?TR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(n){return n.type==="keypress"?Kl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Kl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),SR=Jt(IR),AR=Le({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=Jt(AR),RR=Le({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),PR=Jt(RR),kR=Le({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),xR=Jt(kR),NR=Le({},fc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),MR=Jt(NR),DR=[9,13,27,32],Ep=Zn&&"CompositionEvent"in window,$s=null;Zn&&"documentMode"in document&&($s=document.documentMode);var VR=Zn&&"TextEvent"in window&&!$s,jT=Zn&&(!Ep||$s&&8<$s&&11>=$s),yy=" ",vy=!1;function ew(n,e){switch(n){case"keyup":return DR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var to=!1;function LR(n,e){switch(n){case"compositionend":return tw(e);case"keypress":return e.which!==32?null:(vy=!0,yy);case"textInput":return n=e.data,n===yy&&vy?null:n;default:return null}}function bR(n,e){if(to)return n==="compositionend"||!Ep&&ew(n,e)?(n=ZT(),Wl=yp=Ir=null,to=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jT&&e.locale!=="ko"?null:e.data;default:return null}}var OR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _y(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!OR[n.type]:e==="textarea"}function nw(n,e,t,r){DT(r),e=wu(e,"onChange"),0<e.length&&(t=new vp("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var zs=null,ua=null;function UR(n){hw(n,0)}function hc(n){var e=io(n);if(AT(e))return n}function FR(n,e){if(n==="change")return e}var rw=!1;if(Zn){var Vd;if(Zn){var Ld="oninput"in document;if(!Ld){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),Ld=typeof Ey.oninput=="function"}Vd=Ld}else Vd=!1;rw=Vd&&(!document.documentMode||9<document.documentMode)}function Ty(){zs&&(zs.detachEvent("onpropertychange",iw),ua=zs=null)}function iw(n){if(n.propertyName==="value"&&hc(ua)){var e=[];nw(e,ua,n,fp(n)),OT(UR,e)}}function BR(n,e,t){n==="focusin"?(Ty(),zs=e,ua=t,zs.attachEvent("onpropertychange",iw)):n==="focusout"&&Ty()}function $R(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hc(ua)}function zR(n,e){if(n==="click")return hc(e)}function qR(n,e){if(n==="input"||n==="change")return hc(e)}function GR(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var pn=typeof Object.is=="function"?Object.is:GR;function ca(n,e){if(pn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!vf.call(e,i)||!pn(n[i],e[i]))return!1}return!0}function wy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Cy(n,e){var t=wy(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=wy(t)}}function ow(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ow(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function sw(){for(var n=window,e=mu();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=mu(n.document)}return e}function Tp(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function HR(n){var e=sw(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ow(t.ownerDocument.documentElement,t)){if(r!==null&&Tp(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=Cy(t,o);var s=Cy(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var WR=Zn&&"documentMode"in document&&11>=document.documentMode,no=null,Of=null,qs=null,Uf=!1;function Iy(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Uf||no==null||no!==mu(r)||(r=no,"selectionStart"in r&&Tp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qs&&ca(qs,r)||(qs=r,r=wu(Of,"onSelect"),0<r.length&&(e=new vp("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=no)))}function Sl(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ro={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},bd={},aw={};Zn&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function pc(n){if(bd[n])return bd[n];if(!ro[n])return n;var e=ro[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in aw)return bd[n]=e[t];return n}var lw=pc("animationend"),uw=pc("animationiteration"),cw=pc("animationstart"),dw=pc("transitionend"),fw=new Map,Sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(n,e){fw.set(n,e),Di(e,[n])}for(var Od=0;Od<Sy.length;Od++){var Ud=Sy[Od],KR=Ud.toLowerCase(),JR=Ud[0].toUpperCase()+Ud.slice(1);Yr(KR,"on"+JR)}Yr(lw,"onAnimationEnd");Yr(uw,"onAnimationIteration");Yr(cw,"onAnimationStart");Yr("dblclick","onDoubleClick");Yr("focusin","onFocus");Yr("focusout","onBlur");Yr(dw,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function Ay(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,KA(r,e,void 0,n),n.currentTarget=null}function hw(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Ay(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Ay(i,a,c),o=l}}}if(yu)throw n=Df,yu=!1,Df=null,n}function Se(n,e){var t=e[qf];t===void 0&&(t=e[qf]=new Set);var r=n+"__bubble";t.has(r)||(pw(e,n,2,!1),t.add(r))}function Fd(n,e,t){var r=0;e&&(r|=4),pw(t,n,r,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function da(n){if(!n[Al]){n[Al]=!0,TT.forEach(function(t){t!=="selectionchange"&&(YR.has(t)||Fd(t,!1,n),Fd(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Al]||(e[Al]=!0,Fd("selectionchange",!1,e))}}function pw(n,e,t,r){switch(XT(e)){case 1:var i=uR;break;case 4:i=cR;break;default:i=gp}t=i.bind(null,e,t,n),i=void 0,!Mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Bd(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=di(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}OT(function(){var c=o,h=fp(t),m=[];e:{var g=fw.get(n);if(g!==void 0){var v=vp,T=n;switch(n){case"keypress":if(Kl(t)===0)break e;case"keydown":case"keyup":v=SR;break;case"focusin":T="focus",v=Dd;break;case"focusout":T="blur",v=Dd;break;case"beforeblur":case"afterblur":v=Dd;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=hR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=PR;break;case lw:case uw:case cw:v=gR;break;case dw:v=xR;break;case"scroll":v=dR;break;case"wheel":v=MR;break;case"copy":case"cut":case"paste":v=vR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=gy}var k=(e&4)!==0,N=!k&&n==="scroll",S=k?g!==null?g+"Capture":null:g;k=[];for(var C=c,R;C!==null;){R=C;var D=R.stateNode;if(R.tag===5&&D!==null&&(R=D,S!==null&&(D=oa(C,S),D!=null&&k.push(fa(C,D,R)))),N)break;C=C.return}0<k.length&&(g=new v(g,T,null,t,h),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",g&&t!==xf&&(T=t.relatedTarget||t.fromElement)&&(di(T)||T[jn]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(T=t.relatedTarget||t.toElement,v=c,T=T?di(T):null,T!==null&&(N=Vi(T),T!==N||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=c),v!==T)){if(k=py,D="onMouseLeave",S="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(k=gy,D="onPointerLeave",S="onPointerEnter",C="pointer"),N=v==null?g:io(v),R=T==null?g:io(T),g=new k(D,C+"leave",v,t,h),g.target=N,g.relatedTarget=R,D=null,di(h)===c&&(k=new k(S,C+"enter",T,t,h),k.target=R,k.relatedTarget=N,D=k),N=D,v&&T)t:{for(k=v,S=T,C=0,R=k;R;R=Ki(R))C++;for(R=0,D=S;D;D=Ki(D))R++;for(;0<C-R;)k=Ki(k),C--;for(;0<R-C;)S=Ki(S),R--;for(;C--;){if(k===S||S!==null&&k===S.alternate)break t;k=Ki(k),S=Ki(S)}k=null}else k=null;v!==null&&Ry(m,g,v,k,!1),T!==null&&N!==null&&Ry(m,N,T,k,!0)}}e:{if(g=c?io(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=FR;else if(_y(g))if(rw)O=qR;else{O=$R;var U=BR}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=zR);if(O&&(O=O(n,c))){nw(m,O,t,h);break e}U&&U(n,g,c),n==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Sf(g,"number",g.value)}switch(U=c?io(c):window,n){case"focusin":(_y(U)||U.contentEditable==="true")&&(no=U,Of=c,qs=null);break;case"focusout":qs=Of=no=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Iy(m,t,h);break;case"selectionchange":if(WR)break;case"keydown":case"keyup":Iy(m,t,h)}var P;if(Ep)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else to?ew(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(jT&&t.locale!=="ko"&&(to||E!=="onCompositionStart"?E==="onCompositionEnd"&&to&&(P=ZT()):(Ir=h,yp="value"in Ir?Ir.value:Ir.textContent,to=!0)),U=wu(c,E),0<U.length&&(E=new my(E,n,null,t,h),m.push({event:E,listeners:U}),P?E.data=P:(P=tw(t),P!==null&&(E.data=P)))),(P=VR?LR(n,t):bR(n,t))&&(c=wu(c,"onBeforeInput"),0<c.length&&(h=new my("onBeforeInput","beforeinput",null,t,h),m.push({event:h,listeners:c}),h.data=P))}hw(m,e)})}function fa(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wu(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=oa(n,t),o!=null&&r.unshift(fa(n,o,i)),o=oa(n,e),o!=null&&r.push(fa(n,o,i))),n=n.return}return r}function Ki(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ry(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=oa(t,o),l!=null&&s.unshift(fa(t,l,a))):i||(l=oa(t,o),l!=null&&s.push(fa(t,l,a)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var QR=/\r\n?/g,XR=/\u0000|\uFFFD/g;function Py(n){return(typeof n=="string"?n:""+n).replace(QR,`
`).replace(XR,"")}function Rl(n,e,t){if(e=Py(e),Py(n)!==e&&t)throw Error(z(425))}function Cu(){}var Ff=null,Bf=null;function $f(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,ZR=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,jR=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(n){return ky.resolve(null).then(n).catch(eP)}:zf;function eP(n){setTimeout(function(){throw n})}function $d(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),la(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);la(e)}function Mr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function xy(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),vn="__reactFiber$"+Jo,ha="__reactProps$"+Jo,jn="__reactContainer$"+Jo,qf="__reactEvents$"+Jo,tP="__reactListeners$"+Jo,nP="__reactHandles$"+Jo;function di(n){var e=n[vn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[jn]||t[vn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=xy(n);n!==null;){if(t=n[vn])return t;n=xy(n)}return e}n=t,t=n.parentNode}return null}function ba(n){return n=n[vn]||n[jn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function io(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(z(33))}function mc(n){return n[ha]||null}var Gf=[],oo=-1;function Qr(n){return{current:n}}function Ae(n){0>oo||(n.current=Gf[oo],Gf[oo]=null,oo--)}function Ce(n,e){oo++,Gf[oo]=n.current,n.current=e}var qr={},Et=Qr(qr),Vt=Qr(!1),_i=qr;function So(n,e){var t=n.type.contextTypes;if(!t)return qr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(n){return n=n.childContextTypes,n!=null}function Iu(){Ae(Vt),Ae(Et)}function Ny(n,e,t){if(Et.current!==qr)throw Error(z(168));Ce(Et,e),Ce(Vt,t)}function mw(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,BA(n)||"Unknown",i));return Le({},t,r)}function Su(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qr,_i=Et.current,Ce(Et,n),Ce(Vt,Vt.current),!0}function My(n,e,t){var r=n.stateNode;if(!r)throw Error(z(169));t?(n=mw(n,e,_i),r.__reactInternalMemoizedMergedChildContext=n,Ae(Vt),Ae(Et),Ce(Et,n)):Ae(Vt),Ce(Vt,t)}var $n=null,gc=!1,zd=!1;function gw(n){$n===null?$n=[n]:$n.push(n)}function rP(n){gc=!0,gw(n)}function Xr(){if(!zd&&$n!==null){zd=!0;var n=0,e=_e;try{var t=$n;for(_e=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}$n=null,gc=!1}catch(i){throw $n!==null&&($n=$n.slice(n+1)),$T(hp,Xr),i}finally{_e=e,zd=!1}}return null}var so=[],ao=0,Au=null,Ru=0,Qt=[],Xt=0,Ei=null,qn=1,Gn="";function li(n,e){so[ao++]=Ru,so[ao++]=Au,Au=n,Ru=e}function yw(n,e,t){Qt[Xt++]=qn,Qt[Xt++]=Gn,Qt[Xt++]=Ei,Ei=n;var r=qn;n=Gn;var i=32-dn(r)-1;r&=~(1<<i),t+=1;var o=32-dn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,qn=1<<32-dn(e)+i|t<<i|r,Gn=o+n}else qn=1<<o|t<<i|r,Gn=n}function wp(n){n.return!==null&&(li(n,1),yw(n,1,0))}function Cp(n){for(;n===Au;)Au=so[--ao],so[ao]=null,Ru=so[--ao],so[ao]=null;for(;n===Ei;)Ei=Qt[--Xt],Qt[Xt]=null,Gn=Qt[--Xt],Qt[Xt]=null,qn=Qt[--Xt],Qt[Xt]=null}var qt=null,Bt=null,Pe=!1,cn=null;function vw(n,e){var t=Zt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Dy(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,qt=n,Bt=Mr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,qt=n,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ei!==null?{id:qn,overflow:Gn}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Zt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,qt=n,Bt=null,!0):!1;default:return!1}}function Hf(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Wf(n){if(Pe){var e=Bt;if(e){var t=e;if(!Dy(n,e)){if(Hf(n))throw Error(z(418));e=Mr(t.nextSibling);var r=qt;e&&Dy(n,e)?vw(r,t):(n.flags=n.flags&-4097|2,Pe=!1,qt=n)}}else{if(Hf(n))throw Error(z(418));n.flags=n.flags&-4097|2,Pe=!1,qt=n}}}function Vy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;qt=n}function Pl(n){if(n!==qt)return!1;if(!Pe)return Vy(n),Pe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!$f(n.type,n.memoizedProps)),e&&(e=Bt)){if(Hf(n))throw _w(),Error(z(418));for(;e;)vw(n,e),e=Mr(e.nextSibling)}if(Vy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(z(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Bt=Mr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Bt=null}}else Bt=qt?Mr(n.stateNode.nextSibling):null;return!0}function _w(){for(var n=Bt;n;)n=Mr(n.nextSibling)}function Ao(){Bt=qt=null,Pe=!1}function Ip(n){cn===null?cn=[n]:cn.push(n)}var iP=ar.ReactCurrentBatchConfig;function Es(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(z(309));var r=t.stateNode}if(!r)throw Error(z(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(z(284));if(!t._owner)throw Error(z(290,n))}return n}function kl(n,e){throw n=Object.prototype.toString.call(e),Error(z(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Ly(n){var e=n._init;return e(n._payload)}function Ew(n){function e(S,C){if(n){var R=S.deletions;R===null?(S.deletions=[C],S.flags|=16):R.push(C)}}function t(S,C){if(!n)return null;for(;C!==null;)e(S,C),C=C.sibling;return null}function r(S,C){for(S=new Map;C!==null;)C.key!==null?S.set(C.key,C):S.set(C.index,C),C=C.sibling;return S}function i(S,C){return S=br(S,C),S.index=0,S.sibling=null,S}function o(S,C,R){return S.index=R,n?(R=S.alternate,R!==null?(R=R.index,R<C?(S.flags|=2,C):R):(S.flags|=2,C)):(S.flags|=1048576,C)}function s(S){return n&&S.alternate===null&&(S.flags|=2),S}function a(S,C,R,D){return C===null||C.tag!==6?(C=Yd(R,S.mode,D),C.return=S,C):(C=i(C,R),C.return=S,C)}function l(S,C,R,D){var O=R.type;return O===eo?h(S,C,R.props.children,D,R.key):C!==null&&(C.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pr&&Ly(O)===C.type)?(D=i(C,R.props),D.ref=Es(S,C,R),D.return=S,D):(D=eu(R.type,R.key,R.props,null,S.mode,D),D.ref=Es(S,C,R),D.return=S,D)}function c(S,C,R,D){return C===null||C.tag!==4||C.stateNode.containerInfo!==R.containerInfo||C.stateNode.implementation!==R.implementation?(C=Qd(R,S.mode,D),C.return=S,C):(C=i(C,R.children||[]),C.return=S,C)}function h(S,C,R,D,O){return C===null||C.tag!==7?(C=gi(R,S.mode,D,O),C.return=S,C):(C=i(C,R),C.return=S,C)}function m(S,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Yd(""+C,S.mode,R),C.return=S,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case vl:return R=eu(C.type,C.key,C.props,null,S.mode,R),R.ref=Es(S,null,C),R.return=S,R;case ji:return C=Qd(C,S.mode,R),C.return=S,C;case pr:var D=C._init;return m(S,D(C._payload),R)}if(Rs(C)||ms(C))return C=gi(C,S.mode,R,null),C.return=S,C;kl(S,C)}return null}function g(S,C,R,D){var O=C!==null?C.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return O!==null?null:a(S,C,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case vl:return R.key===O?l(S,C,R,D):null;case ji:return R.key===O?c(S,C,R,D):null;case pr:return O=R._init,g(S,C,O(R._payload),D)}if(Rs(R)||ms(R))return O!==null?null:h(S,C,R,D,null);kl(S,R)}return null}function v(S,C,R,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return S=S.get(R)||null,a(C,S,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case vl:return S=S.get(D.key===null?R:D.key)||null,l(C,S,D,O);case ji:return S=S.get(D.key===null?R:D.key)||null,c(C,S,D,O);case pr:var U=D._init;return v(S,C,R,U(D._payload),O)}if(Rs(D)||ms(D))return S=S.get(R)||null,h(C,S,D,O,null);kl(C,D)}return null}function T(S,C,R,D){for(var O=null,U=null,P=C,E=C=0,w=null;P!==null&&E<R.length;E++){P.index>E?(w=P,P=null):w=P.sibling;var A=g(S,P,R[E],D);if(A===null){P===null&&(P=w);break}n&&P&&A.alternate===null&&e(S,P),C=o(A,C,E),U===null?O=A:U.sibling=A,U=A,P=w}if(E===R.length)return t(S,P),Pe&&li(S,E),O;if(P===null){for(;E<R.length;E++)P=m(S,R[E],D),P!==null&&(C=o(P,C,E),U===null?O=P:U.sibling=P,U=P);return Pe&&li(S,E),O}for(P=r(S,P);E<R.length;E++)w=v(P,S,E,R[E],D),w!==null&&(n&&w.alternate!==null&&P.delete(w.key===null?E:w.key),C=o(w,C,E),U===null?O=w:U.sibling=w,U=w);return n&&P.forEach(function(M){return e(S,M)}),Pe&&li(S,E),O}function k(S,C,R,D){var O=ms(R);if(typeof O!="function")throw Error(z(150));if(R=O.call(R),R==null)throw Error(z(151));for(var U=O=null,P=C,E=C=0,w=null,A=R.next();P!==null&&!A.done;E++,A=R.next()){P.index>E?(w=P,P=null):w=P.sibling;var M=g(S,P,A.value,D);if(M===null){P===null&&(P=w);break}n&&P&&M.alternate===null&&e(S,P),C=o(M,C,E),U===null?O=M:U.sibling=M,U=M,P=w}if(A.done)return t(S,P),Pe&&li(S,E),O;if(P===null){for(;!A.done;E++,A=R.next())A=m(S,A.value,D),A!==null&&(C=o(A,C,E),U===null?O=A:U.sibling=A,U=A);return Pe&&li(S,E),O}for(P=r(S,P);!A.done;E++,A=R.next())A=v(P,S,E,A.value,D),A!==null&&(n&&A.alternate!==null&&P.delete(A.key===null?E:A.key),C=o(A,C,E),U===null?O=A:U.sibling=A,U=A);return n&&P.forEach(function(V){return e(S,V)}),Pe&&li(S,E),O}function N(S,C,R,D){if(typeof R=="object"&&R!==null&&R.type===eo&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case vl:e:{for(var O=R.key,U=C;U!==null;){if(U.key===O){if(O=R.type,O===eo){if(U.tag===7){t(S,U.sibling),C=i(U,R.props.children),C.return=S,S=C;break e}}else if(U.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pr&&Ly(O)===U.type){t(S,U.sibling),C=i(U,R.props),C.ref=Es(S,U,R),C.return=S,S=C;break e}t(S,U);break}else e(S,U);U=U.sibling}R.type===eo?(C=gi(R.props.children,S.mode,D,R.key),C.return=S,S=C):(D=eu(R.type,R.key,R.props,null,S.mode,D),D.ref=Es(S,C,R),D.return=S,S=D)}return s(S);case ji:e:{for(U=R.key;C!==null;){if(C.key===U)if(C.tag===4&&C.stateNode.containerInfo===R.containerInfo&&C.stateNode.implementation===R.implementation){t(S,C.sibling),C=i(C,R.children||[]),C.return=S,S=C;break e}else{t(S,C);break}else e(S,C);C=C.sibling}C=Qd(R,S.mode,D),C.return=S,S=C}return s(S);case pr:return U=R._init,N(S,C,U(R._payload),D)}if(Rs(R))return T(S,C,R,D);if(ms(R))return k(S,C,R,D);kl(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,C!==null&&C.tag===6?(t(S,C.sibling),C=i(C,R),C.return=S,S=C):(t(S,C),C=Yd(R,S.mode,D),C.return=S,S=C),s(S)):t(S,C)}return N}var Ro=Ew(!0),Tw=Ew(!1),Pu=Qr(null),ku=null,lo=null,Sp=null;function Ap(){Sp=lo=ku=null}function Rp(n){var e=Pu.current;Ae(Pu),n._currentValue=e}function Kf(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function vo(n,e){ku=n,Sp=lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Mt=!0),n.firstContext=null)}function en(n){var e=n._currentValue;if(Sp!==n)if(n={context:n,memoizedValue:e,next:null},lo===null){if(ku===null)throw Error(z(308));lo=n,ku.dependencies={lanes:0,firstContext:n}}else lo=lo.next=n;return e}var fi=null;function Pp(n){fi===null?fi=[n]:fi.push(n)}function ww(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Pp(e)):(t.next=i.next,i.next=t),e.interleaved=t,er(n,r)}function er(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var mr=!1;function kp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cw(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Jn(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,er(n,t)}return i=r.interleaved,i===null?(e.next=e,Pp(r)):(e.next=i.next,i.next=e),r.interleaved=e,er(n,t)}function Jl(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,pp(n,t)}}function by(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function xu(n,e,t,r){var i=n.updateQueue;mr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(o!==null){var m=i.baseState;s=0,h=c=l=null,a=o;do{var g=a.lane,v=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=n,k=a;switch(g=e,v=t,k.tag){case 1:if(T=k.payload,typeof T=="function"){m=T.call(v,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=k.payload,g=typeof T=="function"?T.call(v,m,g):T,g==null)break e;m=Le({},m,g);break e;case 2:mr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=v,l=m):h=h.next=v,s|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(l=m),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);wi|=s,n.lanes=s,n.memoizedState=m}}function Oy(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Oa={},Cn=Qr(Oa),pa=Qr(Oa),ma=Qr(Oa);function hi(n){if(n===Oa)throw Error(z(174));return n}function xp(n,e){switch(Ce(ma,e),Ce(pa,n),Ce(Cn,Oa),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rf(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Rf(e,n)}Ae(Cn),Ce(Cn,e)}function Po(){Ae(Cn),Ae(pa),Ae(ma)}function Iw(n){hi(ma.current);var e=hi(Cn.current),t=Rf(e,n.type);e!==t&&(Ce(pa,n),Ce(Cn,t))}function Np(n){pa.current===n&&(Ae(Cn),Ae(pa))}var De=Qr(0);function Nu(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qd=[];function Mp(){for(var n=0;n<qd.length;n++)qd[n]._workInProgressVersionPrimary=null;qd.length=0}var Yl=ar.ReactCurrentDispatcher,Gd=ar.ReactCurrentBatchConfig,Ti=0,Ve=null,Qe=null,tt=null,Mu=!1,Gs=!1,ga=0,oP=0;function pt(){throw Error(z(321))}function Dp(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!pn(n[t],e[t]))return!1;return!0}function Vp(n,e,t,r,i,o){if(Ti=o,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=n===null||n.memoizedState===null?uP:cP,n=t(r,i),Gs){o=0;do{if(Gs=!1,ga=0,25<=o)throw Error(z(301));o+=1,tt=Qe=null,e.updateQueue=null,Yl.current=dP,n=t(r,i)}while(Gs)}if(Yl.current=Du,e=Qe!==null&&Qe.next!==null,Ti=0,tt=Qe=Ve=null,Mu=!1,e)throw Error(z(300));return n}function Lp(){var n=ga!==0;return ga=0,n}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ve.memoizedState=tt=n:tt=tt.next=n,tt}function tn(){if(Qe===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=Qe.next;var e=tt===null?Ve.memoizedState:tt.next;if(e!==null)tt=e,Qe=n;else{if(n===null)throw Error(z(310));Qe=n,n={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},tt===null?Ve.memoizedState=tt=n:tt=tt.next=n}return tt}function ya(n,e){return typeof e=="function"?e(n):e}function Hd(n){var e=tn(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var r=Qe,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var h=c.lane;if((Ti&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,s=r):l=l.next=m,Ve.lanes|=h,wi|=h}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,pn(r,e.memoizedState)||(Mt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Ve.lanes|=o,wi|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Wd(n){var e=tn(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);pn(o,e.memoizedState)||(Mt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function Sw(){}function Aw(n,e){var t=Ve,r=tn(),i=e(),o=!pn(r.memoizedState,i);if(o&&(r.memoizedState=i,Mt=!0),r=r.queue,bp(kw.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||tt!==null&&tt.memoizedState.tag&1){if(t.flags|=2048,va(9,Pw.bind(null,t,r,i,e),void 0,null),nt===null)throw Error(z(349));Ti&30||Rw(t,e,i)}return i}function Rw(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Pw(n,e,t,r){e.value=t,e.getSnapshot=r,xw(e)&&Nw(n)}function kw(n,e,t){return t(function(){xw(e)&&Nw(n)})}function xw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!pn(n,t)}catch{return!0}}function Nw(n){var e=er(n,1);e!==null&&fn(e,n,1,-1)}function Uy(n){var e=yn();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:n},e.queue=n,n=n.dispatch=lP.bind(null,Ve,n),[e.memoizedState,n]}function va(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Mw(){return tn().memoizedState}function Ql(n,e,t,r){var i=yn();Ve.flags|=n,i.memoizedState=va(1|e,t,void 0,r===void 0?null:r)}function yc(n,e,t,r){var i=tn();r=r===void 0?null:r;var o=void 0;if(Qe!==null){var s=Qe.memoizedState;if(o=s.destroy,r!==null&&Dp(r,s.deps)){i.memoizedState=va(e,t,o,r);return}}Ve.flags|=n,i.memoizedState=va(1|e,t,o,r)}function Fy(n,e){return Ql(8390656,8,n,e)}function bp(n,e){return yc(2048,8,n,e)}function Dw(n,e){return yc(4,2,n,e)}function Vw(n,e){return yc(4,4,n,e)}function Lw(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function bw(n,e,t){return t=t!=null?t.concat([n]):null,yc(4,4,Lw.bind(null,e,n),t)}function Op(){}function Ow(n,e){var t=tn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Dp(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Uw(n,e){var t=tn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Dp(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Fw(n,e,t){return Ti&21?(pn(t,e)||(t=GT(),Ve.lanes|=t,wi|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Mt=!0),n.memoizedState=t)}function sP(n,e){var t=_e;_e=t!==0&&4>t?t:4,n(!0);var r=Gd.transition;Gd.transition={};try{n(!1),e()}finally{_e=t,Gd.transition=r}}function Bw(){return tn().memoizedState}function aP(n,e,t){var r=Lr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},$w(n))zw(e,t);else if(t=ww(n,e,t,r),t!==null){var i=At();fn(t,n,r,i),qw(t,e,r)}}function lP(n,e,t){var r=Lr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if($w(n))zw(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(i.hasEagerState=!0,i.eagerState=a,pn(a,s)){var l=e.interleaved;l===null?(i.next=i,Pp(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=ww(n,e,i,r),t!==null&&(i=At(),fn(t,n,r,i),qw(t,e,r))}}function $w(n){var e=n.alternate;return n===Ve||e!==null&&e===Ve}function zw(n,e){Gs=Mu=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function qw(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,pp(n,t)}}var Du={readContext:en,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},uP={readContext:en,useCallback:function(n,e){return yn().memoizedState=[n,e===void 0?null:e],n},useContext:en,useEffect:Fy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ql(4194308,4,Lw.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ql(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ql(4,2,n,e)},useMemo:function(n,e){var t=yn();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=yn();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=aP.bind(null,Ve,n),[r.memoizedState,n]},useRef:function(n){var e=yn();return n={current:n},e.memoizedState=n},useState:Uy,useDebugValue:Op,useDeferredValue:function(n){return yn().memoizedState=n},useTransition:function(){var n=Uy(!1),e=n[0];return n=sP.bind(null,n[1]),yn().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Ve,i=yn();if(Pe){if(t===void 0)throw Error(z(407));t=t()}else{if(t=e(),nt===null)throw Error(z(349));Ti&30||Rw(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,Fy(kw.bind(null,r,o,n),[n]),r.flags|=2048,va(9,Pw.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=yn(),e=nt.identifierPrefix;if(Pe){var t=Gn,r=qn;t=(r&~(1<<32-dn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=ga++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=oP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},cP={readContext:en,useCallback:Ow,useContext:en,useEffect:bp,useImperativeHandle:bw,useInsertionEffect:Dw,useLayoutEffect:Vw,useMemo:Uw,useReducer:Hd,useRef:Mw,useState:function(){return Hd(ya)},useDebugValue:Op,useDeferredValue:function(n){var e=tn();return Fw(e,Qe.memoizedState,n)},useTransition:function(){var n=Hd(ya)[0],e=tn().memoizedState;return[n,e]},useMutableSource:Sw,useSyncExternalStore:Aw,useId:Bw,unstable_isNewReconciler:!1},dP={readContext:en,useCallback:Ow,useContext:en,useEffect:bp,useImperativeHandle:bw,useInsertionEffect:Dw,useLayoutEffect:Vw,useMemo:Uw,useReducer:Wd,useRef:Mw,useState:function(){return Wd(ya)},useDebugValue:Op,useDeferredValue:function(n){var e=tn();return Qe===null?e.memoizedState=n:Fw(e,Qe.memoizedState,n)},useTransition:function(){var n=Wd(ya)[0],e=tn().memoizedState;return[n,e]},useMutableSource:Sw,useSyncExternalStore:Aw,useId:Bw,unstable_isNewReconciler:!1};function ln(n,e){if(n&&n.defaultProps){e=Le({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Jf(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Le({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var vc={isMounted:function(n){return(n=n._reactInternals)?Vi(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=At(),i=Lr(n),o=Jn(r,i);o.payload=e,t!=null&&(o.callback=t),e=Dr(n,o,i),e!==null&&(fn(e,n,i,r),Jl(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=At(),i=Lr(n),o=Jn(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Dr(n,o,i),e!==null&&(fn(e,n,i,r),Jl(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=At(),r=Lr(n),i=Jn(t,r);i.tag=2,e!=null&&(i.callback=e),e=Dr(n,i,r),e!==null&&(fn(e,n,r,t),Jl(e,n,r))}};function By(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ca(t,r)||!ca(i,o):!0}function Gw(n,e,t){var r=!1,i=qr,o=e.contextType;return typeof o=="object"&&o!==null?o=en(o):(i=Lt(e)?_i:Et.current,r=e.contextTypes,o=(r=r!=null)?So(n,i):qr),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vc,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function $y(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&vc.enqueueReplaceState(e,e.state,null)}function Yf(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},kp(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=en(o):(o=Lt(e)?_i:Et.current,i.context=So(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Jf(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vc.enqueueReplaceState(i,i.state,null),xu(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ko(n,e){try{var t="",r=e;do t+=FA(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function Kd(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Qf(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var fP=typeof WeakMap=="function"?WeakMap:Map;function Hw(n,e,t){t=Jn(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Lu||(Lu=!0,sh=r),Qf(n,e)},t}function Ww(n,e,t){t=Jn(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Qf(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Qf(n,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function zy(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new fP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=AP.bind(null,n,e,t),e.then(n,n))}function qy(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Gy(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Jn(-1,1),e.tag=2,Dr(t,e,1))),t.lanes|=1),n)}var hP=ar.ReactCurrentOwner,Mt=!1;function St(n,e,t,r){e.child=n===null?Tw(e,null,t,r):Ro(e,n.child,t,r)}function Hy(n,e,t,r,i){t=t.render;var o=e.ref;return vo(e,i),r=Vp(n,e,t,r,o,i),t=Lp(),n!==null&&!Mt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,tr(n,e,i)):(Pe&&t&&wp(e),e.flags|=1,St(n,e,r,i),e.child)}function Wy(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!Hp(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Kw(n,e,o,r,i)):(n=eu(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:ca,t(s,r)&&n.ref===e.ref)return tr(n,e,i)}return e.flags|=1,n=br(o,r),n.ref=e.ref,n.return=e,e.child=n}function Kw(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(ca(o,r)&&n.ref===e.ref)if(Mt=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(Mt=!0);else return e.lanes=n.lanes,tr(n,e,i)}return Xf(n,e,t,r,i)}function Jw(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(co,Ft),Ft|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ce(co,Ft),Ft|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,Ce(co,Ft),Ft|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,Ce(co,Ft),Ft|=r;return St(n,e,i,t),e.child}function Yw(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Xf(n,e,t,r,i){var o=Lt(t)?_i:Et.current;return o=So(e,o),vo(e,i),t=Vp(n,e,t,r,o,i),r=Lp(),n!==null&&!Mt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,tr(n,e,i)):(Pe&&r&&wp(e),e.flags|=1,St(n,e,t,i),e.child)}function Ky(n,e,t,r,i){if(Lt(t)){var o=!0;Su(e)}else o=!1;if(vo(e,i),e.stateNode===null)Xl(n,e),Gw(e,t,r),Yf(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=t.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Lt(t)?_i:Et.current,c=So(e,c));var h=t.getDerivedStateFromProps,m=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$y(e,s,r,c),mr=!1;var g=e.memoizedState;s.state=g,xu(e,r,s,i),l=e.memoizedState,a!==r||g!==l||Vt.current||mr?(typeof h=="function"&&(Jf(e,t,h,r),l=e.memoizedState),(a=mr||By(e,t,a,r,g,l,c))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Cw(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ln(e.type,a),s.props=c,m=e.pendingProps,g=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=en(l):(l=Lt(t)?_i:Et.current,l=So(e,l));var v=t.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==m||g!==l)&&$y(e,s,r,l),mr=!1,g=e.memoizedState,s.state=g,xu(e,r,s,i);var T=e.memoizedState;a!==m||g!==T||Vt.current||mr?(typeof v=="function"&&(Jf(e,t,v,r),T=e.memoizedState),(c=mr||By(e,t,c,r,g,T,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,T,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,T,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),s.props=r,s.state=T,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),r=!1)}return Zf(n,e,t,r,o,i)}function Zf(n,e,t,r,i,o){Yw(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&My(e,t,!1),tr(n,e,o);r=e.stateNode,hP.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=Ro(e,n.child,null,o),e.child=Ro(e,null,a,o)):St(n,e,a,o),e.memoizedState=r.state,i&&My(e,t,!0),e.child}function Qw(n){var e=n.stateNode;e.pendingContext?Ny(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Ny(n,e.context,!1),xp(n,e.containerInfo)}function Jy(n,e,t,r,i){return Ao(),Ip(i),e.flags|=256,St(n,e,t,r),e.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function eh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Xw(n,e,t){var r=e.pendingProps,i=De.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ce(De,i&1),n===null)return Wf(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Tc(s,r,0,null),n=gi(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=eh(t),e.memoizedState=jf,n):Up(e,s));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return pP(n,e,s,r,a,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=br(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=br(a,o):(o=gi(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?eh(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=jf,r}return o=n.child,n=o.sibling,r=br(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Up(n,e){return e=Tc({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xl(n,e,t,r){return r!==null&&Ip(r),Ro(e,n.child,null,t),n=Up(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function pP(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=Kd(Error(z(422))),xl(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Tc({mode:"visible",children:r.children},i,0,null),o=gi(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ro(e,n.child,null,s),e.child.memoizedState=eh(s),e.memoizedState=jf,o);if(!(e.mode&1))return xl(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(z(419)),r=Kd(o,r,void 0),xl(n,e,s,r)}if(a=(s&n.childLanes)!==0,Mt||a){if(r=nt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,er(n,i),fn(r,n,i,-1))}return Gp(),r=Kd(Error(z(421))),xl(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=RP.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,Bt=Mr(i.nextSibling),qt=e,Pe=!0,cn=null,n!==null&&(Qt[Xt++]=qn,Qt[Xt++]=Gn,Qt[Xt++]=Ei,qn=n.id,Gn=n.overflow,Ei=e),e=Up(e,r.children),e.flags|=4096,e)}function Yy(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Kf(n.return,e,t)}function Jd(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function Zw(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(St(n,e,r.children,t),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yy(n,t,e);else if(n.tag===19)Yy(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ce(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Nu(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Jd(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Nu(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Jd(e,!0,t,null,o);break;case"together":Jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xl(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function tr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),wi|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(z(153));if(e.child!==null){for(n=e.child,t=br(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=br(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function mP(n,e,t){switch(e.tag){case 3:Qw(e),Ao();break;case 5:Iw(e);break;case 1:Lt(e.type)&&Su(e);break;case 4:xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Pu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(De,De.current&1),e.flags|=128,null):t&e.child.childLanes?Xw(n,e,t):(Ce(De,De.current&1),n=tr(n,e,t),n!==null?n.sibling:null);Ce(De,De.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Zw(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,Jw(n,e,t)}return tr(n,e,t)}var jw,th,e0,t0;jw=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};th=function(){};e0=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,hi(Cn.current);var o=null;switch(t){case"input":i=Cf(n,i),r=Cf(n,r),o=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),o=[];break;case"textarea":i=Af(n,i),r=Af(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Cu)}Pf(t,r);var s;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ra.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(o||(o=[]),o.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ra.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Se("scroll",n),o||a===l||(o=[])):(o=o||[]).push(c,l))}t&&(o=o||[]).push("style",t);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};t0=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ts(n,e){if(!Pe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function mt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function gP(n,e,t){var r=e.pendingProps;switch(Cp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Lt(e.type)&&Iu(),mt(e),null;case 3:return r=e.stateNode,Po(),Ae(Vt),Ae(Et),Mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Pl(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(uh(cn),cn=null))),th(n,e),mt(e),null;case 5:Np(e);var i=hi(ma.current);if(t=e.type,n!==null&&e.stateNode!=null)e0(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return mt(e),null}if(n=hi(Cn.current),Pl(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[vn]=e,r[ha]=o,n=(e.mode&1)!==0,t){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ks.length;i++)Se(ks[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":iy(r,o),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Se("invalid",r);break;case"textarea":sy(r,o),Se("invalid",r)}Pf(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Rl(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Rl(r.textContent,a,n),i=["children",""+a]):ra.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Se("scroll",r)}switch(t){case"input":_l(r),oy(r,o,!0);break;case"textarea":_l(r),ay(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Cu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=kT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[vn]=e,n[ha]=r,jw(n,e,!1,!1),e.stateNode=n;e:{switch(s=kf(t,r),t){case"dialog":Se("cancel",n),Se("close",n),i=r;break;case"iframe":case"object":case"embed":Se("load",n),i=r;break;case"video":case"audio":for(i=0;i<ks.length;i++)Se(ks[i],n);i=r;break;case"source":Se("error",n),i=r;break;case"img":case"image":case"link":Se("error",n),Se("load",n),i=r;break;case"details":Se("toggle",n),i=r;break;case"input":iy(n,r),i=Cf(n,r),Se("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Se("invalid",n);break;case"textarea":sy(n,r),i=Af(n,r),Se("invalid",n);break;default:i=r}Pf(t,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?MT(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xT(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ia(n,l):typeof l=="number"&&ia(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ra.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Se("scroll",n):l!=null&&lp(n,o,l,s))}switch(t){case"input":_l(n),oy(n,r,!1);break;case"textarea":_l(n),ay(n);break;case"option":r.value!=null&&n.setAttribute("value",""+zr(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?po(n,!!r.multiple,o,!1):r.defaultValue!=null&&po(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Cu)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(n&&e.stateNode!=null)t0(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(t=hi(ma.current),hi(Cn.current),Pl(e)){if(r=e.stateNode,t=e.memoizedProps,r[vn]=e,(o=r.nodeValue!==t)&&(n=qt,n!==null))switch(n.tag){case 3:Rl(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Rl(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ae(De),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&Bt!==null&&e.mode&1&&!(e.flags&128))_w(),Ao(),e.flags|=98560,o=!1;else if(o=Pl(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[vn]=e}else Ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),o=!1}else cn!==null&&(uh(cn),cn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||De.current&1?Ze===0&&(Ze=3):Gp())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Po(),th(n,e),n===null&&da(e.stateNode.containerInfo),mt(e),null;case 10:return Rp(e.type._context),mt(e),null;case 17:return Lt(e.type)&&Iu(),mt(e),null;case 19:if(Ae(De),o=e.memoizedState,o===null)return mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ts(o,!1);else{if(Ze!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Nu(n),s!==null){for(e.flags|=128,Ts(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ce(De,De.current&1|2),e.child}n=n.sibling}o.tail!==null&&Ge()>xo&&(e.flags|=128,r=!0,Ts(o,!1),e.lanes=4194304)}else{if(!r)if(n=Nu(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ts(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Pe)return mt(e),null}else 2*Ge()-o.renderingStartTime>xo&&t!==1073741824&&(e.flags|=128,r=!0,Ts(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,t=De.current,Ce(De,r?t&1|2:t&1),e):(mt(e),null);case 22:case 23:return qp(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function yP(n,e){switch(Cp(e),e.tag){case 1:return Lt(e.type)&&Iu(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Po(),Ae(Vt),Ae(Et),Mp(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Np(e),null;case 13:if(Ae(De),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ao()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ae(De),null;case 4:return Po(),null;case 10:return Rp(e.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var Nl=!1,vt=!1,vP=typeof WeakSet=="function"?WeakSet:Set,K=null;function uo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Fe(n,e,r)}else t.current=null}function nh(n,e,t){try{t()}catch(r){Fe(n,e,r)}}var Qy=!1;function _P(n,e){if(Ff=Eu,n=sw(),Tp(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,c=0,h=0,m=n,g=null;t:for(;;){for(var v;m!==t||i!==0&&m.nodeType!==3||(a=s+i),m!==o||r!==0&&m.nodeType!==3||(l=s+r),m.nodeType===3&&(s+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===n)break t;if(g===t&&++c===i&&(a=s),g===o&&++h===r&&(l=s),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Bf={focusedElem:n,selectionRange:t},Eu=!1,K=e;K!==null;)if(e=K,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,K=n;else for(;K!==null;){e=K;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var k=T.memoizedProps,N=T.memoizedState,S=e.stateNode,C=S.getSnapshotBeforeUpdate(e.elementType===e.type?k:ln(e.type,k),N);S.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){Fe(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}return T=Qy,Qy=!1,T}function Hs(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&nh(e,t,o)}i=i.next}while(i!==r)}}function _c(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function rh(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function n0(n){var e=n.alternate;e!==null&&(n.alternate=null,n0(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[vn],delete e[ha],delete e[qf],delete e[tP],delete e[nP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function r0(n){return n.tag===5||n.tag===3||n.tag===4}function Xy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||r0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ih(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Cu));else if(r!==4&&(n=n.child,n!==null))for(ih(n,e,t),n=n.sibling;n!==null;)ih(n,e,t),n=n.sibling}function oh(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(oh(n,e,t),n=n.sibling;n!==null;)oh(n,e,t),n=n.sibling}var it=null,un=!1;function dr(n,e,t){for(t=t.child;t!==null;)i0(n,e,t),t=t.sibling}function i0(n,e,t){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(dc,t)}catch{}switch(t.tag){case 5:vt||uo(t,e);case 6:var r=it,i=un;it=null,dr(n,e,t),it=r,un=i,it!==null&&(un?(n=it,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):it.removeChild(t.stateNode));break;case 18:it!==null&&(un?(n=it,t=t.stateNode,n.nodeType===8?$d(n.parentNode,t):n.nodeType===1&&$d(n,t),la(n)):$d(it,t.stateNode));break;case 4:r=it,i=un,it=t.stateNode.containerInfo,un=!0,dr(n,e,t),it=r,un=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&nh(t,e,s),i=i.next}while(i!==r)}dr(n,e,t);break;case 1:if(!vt&&(uo(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Fe(t,e,a)}dr(n,e,t);break;case 21:dr(n,e,t);break;case 22:t.mode&1?(vt=(r=vt)||t.memoizedState!==null,dr(n,e,t),vt=r):dr(n,e,t);break;default:dr(n,e,t)}}function Zy(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new vP),e.forEach(function(r){var i=PP.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function an(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,un=!1;break e;case 3:it=a.stateNode.containerInfo,un=!0;break e;case 4:it=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(it===null)throw Error(z(160));i0(o,s,i),it=null,un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o0(e,n),e=e.sibling}function o0(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(an(e,n),gn(n),r&4){try{Hs(3,n,n.return),_c(3,n)}catch(k){Fe(n,n.return,k)}try{Hs(5,n,n.return)}catch(k){Fe(n,n.return,k)}}break;case 1:an(e,n),gn(n),r&512&&t!==null&&uo(t,t.return);break;case 5:if(an(e,n),gn(n),r&512&&t!==null&&uo(t,t.return),n.flags&32){var i=n.stateNode;try{ia(i,"")}catch(k){Fe(n,n.return,k)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&RT(i,o),kf(a,s);var c=kf(a,o);for(s=0;s<l.length;s+=2){var h=l[s],m=l[s+1];h==="style"?MT(i,m):h==="dangerouslySetInnerHTML"?xT(i,m):h==="children"?ia(i,m):lp(i,h,m,c)}switch(a){case"input":If(i,o);break;case"textarea":PT(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?po(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?po(i,!!o.multiple,o.defaultValue,!0):po(i,!!o.multiple,o.multiple?[]:"",!1))}i[ha]=o}catch(k){Fe(n,n.return,k)}}break;case 6:if(an(e,n),gn(n),r&4){if(n.stateNode===null)throw Error(z(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(k){Fe(n,n.return,k)}}break;case 3:if(an(e,n),gn(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{la(e.containerInfo)}catch(k){Fe(n,n.return,k)}break;case 4:an(e,n),gn(n);break;case 13:an(e,n),gn(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||($p=Ge())),r&4&&Zy(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(vt=(c=vt)||h,an(e,n),vt=c):an(e,n),gn(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(K=n,h=n.child;h!==null;){for(m=K=h;K!==null;){switch(g=K,v=g.child,g.tag){case 0:case 11:case 14:case 15:Hs(4,g,g.return);break;case 1:uo(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,t=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(k){Fe(r,t,k)}}break;case 5:uo(g,g.return);break;case 22:if(g.memoizedState!==null){ev(m);continue}}v!==null?(v.return=g,K=v):ev(m)}h=h.sibling}e:for(h=null,m=n;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=m.stateNode,l=m.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NT("display",s))}catch(k){Fe(n,n.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(k){Fe(n,n.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===n)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:an(e,n),gn(n),r&4&&Zy(n);break;case 21:break;default:an(e,n),gn(n)}}function gn(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(r0(t)){var r=t;break e}t=t.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ia(i,""),r.flags&=-33);var o=Xy(n);oh(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Xy(n);ih(n,a,s);break;default:throw Error(z(161))}}catch(l){Fe(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function EP(n,e,t){K=n,s0(n)}function s0(n,e,t){for(var r=(n.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Nl;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=Nl;var c=vt;if(Nl=s,(vt=l)&&!c)for(K=i;K!==null;)s=K,l=s.child,s.tag===22&&s.memoizedState!==null?tv(i):l!==null?(l.return=s,K=l):tv(i);for(;o!==null;)K=o,s0(o),o=o.sibling;K=i,Nl=a,vt=c}jy(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):jy(n)}}function jy(n){for(;K!==null;){var e=K;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||_c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ln(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Oy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Oy(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&la(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}vt||e.flags&512&&rh(e)}catch(g){Fe(e,e.return,g)}}if(e===n){K=null;break}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}}function ev(n){for(;K!==null;){var e=K;if(e===n){K=null;break}var t=e.sibling;if(t!==null){t.return=e.return,K=t;break}K=e.return}}function tv(n){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{_c(4,e)}catch(l){Fe(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fe(e,i,l)}}var o=e.return;try{rh(e)}catch(l){Fe(e,o,l)}break;case 5:var s=e.return;try{rh(e)}catch(l){Fe(e,s,l)}}}catch(l){Fe(e,e.return,l)}if(e===n){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var TP=Math.ceil,Vu=ar.ReactCurrentDispatcher,Fp=ar.ReactCurrentOwner,jt=ar.ReactCurrentBatchConfig,pe=0,nt=null,Je=null,at=0,Ft=0,co=Qr(0),Ze=0,_a=null,wi=0,Ec=0,Bp=0,Ws=null,xt=null,$p=0,xo=1/0,Bn=null,Lu=!1,sh=null,Vr=null,Ml=!1,Sr=null,bu=0,Ks=0,ah=null,Zl=-1,jl=0;function At(){return pe&6?Ge():Zl!==-1?Zl:Zl=Ge()}function Lr(n){return n.mode&1?pe&2&&at!==0?at&-at:iP.transition!==null?(jl===0&&(jl=GT()),jl):(n=_e,n!==0||(n=window.event,n=n===void 0?16:XT(n.type)),n):1}function fn(n,e,t,r){if(50<Ks)throw Ks=0,ah=null,Error(z(185));Va(n,t,r),(!(pe&2)||n!==nt)&&(n===nt&&(!(pe&2)&&(Ec|=t),Ze===4&&vr(n,at)),bt(n,r),t===1&&pe===0&&!(e.mode&1)&&(xo=Ge()+500,gc&&Xr()))}function bt(n,e){var t=n.callbackNode;iR(n,e);var r=_u(n,n===nt?at:0);if(r===0)t!==null&&cy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&cy(t),e===1)n.tag===0?rP(nv.bind(null,n)):gw(nv.bind(null,n)),jR(function(){!(pe&6)&&Xr()}),t=null;else{switch(HT(r)){case 1:t=hp;break;case 4:t=zT;break;case 16:t=vu;break;case 536870912:t=qT;break;default:t=vu}t=p0(t,a0.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function a0(n,e){if(Zl=-1,jl=0,pe&6)throw Error(z(327));var t=n.callbackNode;if(_o()&&n.callbackNode!==t)return null;var r=_u(n,n===nt?at:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ou(n,r);else{e=r;var i=pe;pe|=2;var o=u0();(nt!==n||at!==e)&&(Bn=null,xo=Ge()+500,mi(n,e));do try{IP();break}catch(a){l0(n,a)}while(!0);Ap(),Vu.current=o,pe=i,Je!==null?e=0:(nt=null,at=0,e=Ze)}if(e!==0){if(e===2&&(i=Vf(n),i!==0&&(r=i,e=lh(n,i))),e===1)throw t=_a,mi(n,0),vr(n,r),bt(n,Ge()),t;if(e===6)vr(n,r);else{if(i=n.current.alternate,!(r&30)&&!wP(i)&&(e=Ou(n,r),e===2&&(o=Vf(n),o!==0&&(r=o,e=lh(n,o))),e===1))throw t=_a,mi(n,0),vr(n,r),bt(n,Ge()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ui(n,xt,Bn);break;case 3:if(vr(n,r),(r&130023424)===r&&(e=$p+500-Ge(),10<e)){if(_u(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){At(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=zf(ui.bind(null,n,xt,Bn),e);break}ui(n,xt,Bn);break;case 4:if(vr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-dn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TP(r/1960))-r,10<r){n.timeoutHandle=zf(ui.bind(null,n,xt,Bn),r);break}ui(n,xt,Bn);break;case 5:ui(n,xt,Bn);break;default:throw Error(z(329))}}}return bt(n,Ge()),n.callbackNode===t?a0.bind(null,n):null}function lh(n,e){var t=Ws;return n.current.memoizedState.isDehydrated&&(mi(n,e).flags|=256),n=Ou(n,e),n!==2&&(e=xt,xt=t,e!==null&&uh(e)),n}function uh(n){xt===null?xt=n:xt.push.apply(xt,n)}function wP(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!pn(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(n,e){for(e&=~Bp,e&=~Ec,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-dn(e),r=1<<t;n[t]=-1,e&=~r}}function nv(n){if(pe&6)throw Error(z(327));_o();var e=_u(n,0);if(!(e&1))return bt(n,Ge()),null;var t=Ou(n,e);if(n.tag!==0&&t===2){var r=Vf(n);r!==0&&(e=r,t=lh(n,r))}if(t===1)throw t=_a,mi(n,0),vr(n,e),bt(n,Ge()),t;if(t===6)throw Error(z(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ui(n,xt,Bn),bt(n,Ge()),null}function zp(n,e){var t=pe;pe|=1;try{return n(e)}finally{pe=t,pe===0&&(xo=Ge()+500,gc&&Xr())}}function Ci(n){Sr!==null&&Sr.tag===0&&!(pe&6)&&_o();var e=pe;pe|=1;var t=jt.transition,r=_e;try{if(jt.transition=null,_e=1,n)return n()}finally{_e=r,jt.transition=t,pe=e,!(pe&6)&&Xr()}}function qp(){Ft=co.current,Ae(co)}function mi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,ZR(t)),Je!==null)for(t=Je.return;t!==null;){var r=t;switch(Cp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Iu();break;case 3:Po(),Ae(Vt),Ae(Et),Mp();break;case 5:Np(r);break;case 4:Po();break;case 13:Ae(De);break;case 19:Ae(De);break;case 10:Rp(r.type._context);break;case 22:case 23:qp()}t=t.return}if(nt=n,Je=n=br(n.current,null),at=Ft=e,Ze=0,_a=null,Bp=Ec=wi=0,xt=Ws=null,fi!==null){for(e=0;e<fi.length;e++)if(t=fi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}fi=null}return n}function l0(n,e){do{var t=Je;try{if(Ap(),Yl.current=Du,Mu){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mu=!1}if(Ti=0,tt=Qe=Ve=null,Gs=!1,ga=0,Fp.current=null,t===null||t.return===null){Ze=1,_a=e,Je=null;break}e:{var o=n,s=t.return,a=t,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=qy(s);if(v!==null){v.flags&=-257,Gy(v,s,a,o,e),v.mode&1&&zy(o,c,e),e=v,l=c;var T=e.updateQueue;if(T===null){var k=new Set;k.add(l),e.updateQueue=k}else T.add(l);break e}else{if(!(e&1)){zy(o,c,e),Gp();break e}l=Error(z(426))}}else if(Pe&&a.mode&1){var N=qy(s);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Gy(N,s,a,o,e),Ip(ko(l,a));break e}}o=l=ko(l,a),Ze!==4&&(Ze=2),Ws===null?Ws=[o]:Ws.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=Hw(o,l,e);by(o,S);break e;case 1:a=l;var C=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Vr===null||!Vr.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=Ww(o,a,e);by(o,D);break e}}o=o.return}while(o!==null)}d0(t)}catch(O){e=O,Je===t&&t!==null&&(Je=t=t.return);continue}break}while(!0)}function u0(){var n=Vu.current;return Vu.current=Du,n===null?Du:n}function Gp(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),nt===null||!(wi&268435455)&&!(Ec&268435455)||vr(nt,at)}function Ou(n,e){var t=pe;pe|=2;var r=u0();(nt!==n||at!==e)&&(Bn=null,mi(n,e));do try{CP();break}catch(i){l0(n,i)}while(!0);if(Ap(),pe=t,Vu.current=r,Je!==null)throw Error(z(261));return nt=null,at=0,Ze}function CP(){for(;Je!==null;)c0(Je)}function IP(){for(;Je!==null&&!YA();)c0(Je)}function c0(n){var e=h0(n.alternate,n,Ft);n.memoizedProps=n.pendingProps,e===null?d0(n):Je=e,Fp.current=null}function d0(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=yP(t,e),t!==null){t.flags&=32767,Je=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ze=6,Je=null;return}}else if(t=gP(t,e,Ft),t!==null){Je=t;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=n}while(e!==null);Ze===0&&(Ze=5)}function ui(n,e,t){var r=_e,i=jt.transition;try{jt.transition=null,_e=1,SP(n,e,t,r)}finally{jt.transition=i,_e=r}return null}function SP(n,e,t,r){do _o();while(Sr!==null);if(pe&6)throw Error(z(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(z(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(oR(n,o),n===nt&&(Je=nt=null,at=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ml||(Ml=!0,p0(vu,function(){return _o(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=jt.transition,jt.transition=null;var s=_e;_e=1;var a=pe;pe|=4,Fp.current=null,_P(n,t),o0(t,n),HR(Bf),Eu=!!Ff,Bf=Ff=null,n.current=t,EP(t),QA(),pe=a,_e=s,jt.transition=o}else n.current=t;if(Ml&&(Ml=!1,Sr=n,bu=i),o=n.pendingLanes,o===0&&(Vr=null),jA(t.stateNode),bt(n,Ge()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lu)throw Lu=!1,n=sh,sh=null,n;return bu&1&&n.tag!==0&&_o(),o=n.pendingLanes,o&1?n===ah?Ks++:(Ks=0,ah=n):Ks=0,Xr(),null}function _o(){if(Sr!==null){var n=HT(bu),e=jt.transition,t=_e;try{if(jt.transition=null,_e=16>n?16:n,Sr===null)var r=!1;else{if(n=Sr,Sr=null,bu=0,pe&6)throw Error(z(331));var i=pe;for(pe|=4,K=n.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Hs(8,h,o)}var m=h.child;if(m!==null)m.return=h,K=m;else for(;K!==null;){h=K;var g=h.sibling,v=h.return;if(n0(h),h===c){K=null;break}if(g!==null){g.return=v,K=g;break}K=v}}}var T=o.alternate;if(T!==null){var k=T.child;if(k!==null){T.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Hs(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,K=S;break e}K=o.return}}var C=n.current;for(K=C;K!==null;){s=K;var R=s.child;if(s.subtreeFlags&2064&&R!==null)R.return=s,K=R;else e:for(s=C;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_c(9,a)}}catch(O){Fe(a,a.return,O)}if(a===s){K=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,K=D;break e}K=a.return}}if(pe=i,Xr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(dc,n)}catch{}r=!0}return r}finally{_e=t,jt.transition=e}}return!1}function rv(n,e,t){e=ko(t,e),e=Hw(n,e,1),n=Dr(n,e,1),e=At(),n!==null&&(Va(n,1,e),bt(n,e))}function Fe(n,e,t){if(n.tag===3)rv(n,n,t);else for(;e!==null;){if(e.tag===3){rv(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){n=ko(t,n),n=Ww(e,n,1),e=Dr(e,n,1),n=At(),e!==null&&(Va(e,1,n),bt(e,n));break}}e=e.return}}function AP(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=At(),n.pingedLanes|=n.suspendedLanes&t,nt===n&&(at&t)===t&&(Ze===4||Ze===3&&(at&130023424)===at&&500>Ge()-$p?mi(n,0):Bp|=t),bt(n,e)}function f0(n,e){e===0&&(n.mode&1?(e=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):e=1);var t=At();n=er(n,e),n!==null&&(Va(n,e,t),bt(n,t))}function RP(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),f0(n,t)}function PP(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),f0(n,t)}var h0;h0=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Vt.current)Mt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Mt=!1,mP(n,e,t);Mt=!!(n.flags&131072)}else Mt=!1,Pe&&e.flags&1048576&&yw(e,Ru,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xl(n,e),n=e.pendingProps;var i=So(e,Et.current);vo(e,t),i=Vp(null,e,r,n,i,t);var o=Lp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(o=!0,Su(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kp(e),i.updater=vc,e.stateNode=i,i._reactInternals=e,Yf(e,r,n,t),e=Zf(null,e,r,!0,o,t)):(e.tag=0,Pe&&o&&wp(e),St(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Xl(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xP(r),n=ln(r,n),i){case 0:e=Xf(null,e,r,n,t);break e;case 1:e=Ky(null,e,r,n,t);break e;case 11:e=Hy(null,e,r,n,t);break e;case 14:e=Wy(null,e,r,ln(r.type,n),t);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Xf(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Ky(n,e,r,i,t);case 3:e:{if(Qw(e),n===null)throw Error(z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Cw(n,e),xu(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ko(Error(z(423)),e),e=Jy(n,e,r,t,i);break e}else if(r!==i){i=ko(Error(z(424)),e),e=Jy(n,e,r,t,i);break e}else for(Bt=Mr(e.stateNode.containerInfo.firstChild),qt=e,Pe=!0,cn=null,t=Tw(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ao(),r===i){e=tr(n,e,t);break e}St(n,e,r,t)}e=e.child}return e;case 5:return Iw(e),n===null&&Wf(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,$f(r,i)?s=null:o!==null&&$f(r,o)&&(e.flags|=32),Yw(n,e),St(n,e,s,t),e.child;case 6:return n===null&&Wf(e),null;case 13:return Xw(n,e,t);case 4:return xp(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ro(e,null,r,t):St(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Hy(n,e,r,i,t);case 7:return St(n,e,e.pendingProps,t),e.child;case 8:return St(n,e,e.pendingProps.children,t),e.child;case 12:return St(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ce(Pu,r._currentValue),r._currentValue=s,o!==null)if(pn(o.value,s)){if(o.children===i.children&&!Vt.current){e=tr(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Jn(-1,t&-t),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),Kf(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(z(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),Kf(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}St(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vo(e,t),i=en(i),r=r(i),e.flags|=1,St(n,e,r,t),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),Wy(n,e,r,i,t);case 15:return Kw(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Xl(n,e),e.tag=1,Lt(r)?(n=!0,Su(e)):n=!1,vo(e,t),Gw(e,r,i),Yf(e,r,i,t),Zf(null,e,r,!0,n,t);case 19:return Zw(n,e,t);case 22:return Jw(n,e,t)}throw Error(z(156,e.tag))};function p0(n,e){return $T(n,e)}function kP(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(n,e,t,r){return new kP(n,e,t,r)}function Hp(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xP(n){if(typeof n=="function")return Hp(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cp)return 11;if(n===dp)return 14}return 2}function br(n,e){var t=n.alternate;return t===null?(t=Zt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function eu(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")Hp(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case eo:return gi(t.children,i,o,e);case up:s=8,i|=8;break;case _f:return n=Zt(12,t,e,i|2),n.elementType=_f,n.lanes=o,n;case Ef:return n=Zt(13,t,e,i),n.elementType=Ef,n.lanes=o,n;case Tf:return n=Zt(19,t,e,i),n.elementType=Tf,n.lanes=o,n;case IT:return Tc(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case wT:s=10;break e;case CT:s=9;break e;case cp:s=11;break e;case dp:s=14;break e;case pr:s=16,r=null;break e}throw Error(z(130,n==null?n:typeof n,""))}return e=Zt(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function gi(n,e,t,r){return n=Zt(7,n,r,e),n.lanes=t,n}function Tc(n,e,t,r){return n=Zt(22,n,r,e),n.elementType=IT,n.lanes=t,n.stateNode={isHidden:!1},n}function Yd(n,e,t){return n=Zt(6,n,null,e),n.lanes=t,n}function Qd(n,e,t){return e=Zt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function NP(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xd(0),this.expirationTimes=xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wp(n,e,t,r,i,o,s,a,l){return n=new NP(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Zt(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},kp(o),n}function MP(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function m0(n){if(!n)return qr;n=n._reactInternals;e:{if(Vi(n)!==n||n.tag!==1)throw Error(z(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(n.tag===1){var t=n.type;if(Lt(t))return mw(n,t,e)}return e}function g0(n,e,t,r,i,o,s,a,l){return n=Wp(t,r,!0,n,i,o,s,a,l),n.context=m0(null),t=n.current,r=At(),i=Lr(t),o=Jn(r,i),o.callback=e??null,Dr(t,o,i),n.current.lanes=i,Va(n,i,r),bt(n,r),n}function wc(n,e,t,r){var i=e.current,o=At(),s=Lr(i);return t=m0(t),e.context===null?e.context=t:e.pendingContext=t,e=Jn(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Dr(i,e,s),n!==null&&(fn(n,i,s,o),Jl(n,i,s)),s}function Uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function iv(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Kp(n,e){iv(n,e),(n=n.alternate)&&iv(n,e)}function DP(){return null}var y0=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jp(n){this._internalRoot=n}Cc.prototype.render=Jp.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(z(409));wc(n,e,null,null)};Cc.prototype.unmount=Jp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ci(function(){wc(null,n,null,null)}),e[jn]=null}};function Cc(n){this._internalRoot=n}Cc.prototype.unstable_scheduleHydration=function(n){if(n){var e=JT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<yr.length&&e!==0&&e<yr[t].priority;t++);yr.splice(t,0,n),t===0&&QT(n)}};function Yp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ic(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ov(){}function VP(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Uu(s);o.call(c)}}var s=g0(e,r,n,0,null,!1,!1,"",ov);return n._reactRootContainer=s,n[jn]=s.current,da(n.nodeType===8?n.parentNode:n),Ci(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Uu(l);a.call(c)}}var l=Wp(n,0,!1,null,null,!1,!1,"",ov);return n._reactRootContainer=l,n[jn]=l.current,da(n.nodeType===8?n.parentNode:n),Ci(function(){wc(e,l,t,r)}),l}function Sc(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Uu(s);a.call(l)}}wc(e,s,n,i)}else s=VP(t,e,n,i,r);return Uu(s)}WT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ps(e.pendingLanes);t!==0&&(pp(e,t|1),bt(e,Ge()),!(pe&6)&&(xo=Ge()+500,Xr()))}break;case 13:Ci(function(){var r=er(n,1);if(r!==null){var i=At();fn(r,n,1,i)}}),Kp(n,1)}};mp=function(n){if(n.tag===13){var e=er(n,134217728);if(e!==null){var t=At();fn(e,n,134217728,t)}Kp(n,134217728)}};KT=function(n){if(n.tag===13){var e=Lr(n),t=er(n,e);if(t!==null){var r=At();fn(t,n,e,r)}Kp(n,e)}};JT=function(){return _e};YT=function(n,e){var t=_e;try{return _e=n,e()}finally{_e=t}};Nf=function(n,e,t){switch(e){case"input":if(If(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=mc(r);if(!i)throw Error(z(90));AT(r),If(r,i)}}}break;case"textarea":PT(n,t);break;case"select":e=t.value,e!=null&&po(n,!!t.multiple,e,!1)}};LT=zp;bT=Ci;var LP={usingClientEntryPoint:!1,Events:[ba,io,mc,DT,VT,zp]},ws={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bP={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=FT(n),n===null?null:n.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||DP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{dc=Dl.inject(bP),wn=Dl}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LP;Kt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yp(e))throw Error(z(200));return MP(n,e,null,t)};Kt.createRoot=function(n,e){if(!Yp(n))throw Error(z(299));var t=!1,r="",i=y0;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wp(n,1,!1,null,null,t,!1,r,i),n[jn]=e.current,da(n.nodeType===8?n.parentNode:n),new Jp(e)};Kt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(z(188)):(n=Object.keys(n).join(","),Error(z(268,n)));return n=FT(e),n=n===null?null:n.stateNode,n};Kt.flushSync=function(n){return Ci(n)};Kt.hydrate=function(n,e,t){if(!Ic(e))throw Error(z(200));return Sc(null,n,e,!0,t)};Kt.hydrateRoot=function(n,e,t){if(!Yp(n))throw Error(z(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=y0;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=g0(e,null,n,1,t??null,i,!1,o,s),n[jn]=e.current,da(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Cc(e)};Kt.render=function(n,e,t){if(!Ic(e))throw Error(z(200));return Sc(null,n,e,!1,t)};Kt.unmountComponentAtNode=function(n){if(!Ic(n))throw Error(z(40));return n._reactRootContainer?(Ci(function(){Sc(null,null,n,!1,function(){n._reactRootContainer=null,n[jn]=null})}),!0):!1};Kt.unstable_batchedUpdates=zp;Kt.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Ic(t))throw Error(z(200));if(n==null||n._reactInternals===void 0)throw Error(z(38));return Sc(n,e,t,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function v0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v0)}catch(n){console.error(n)}}v0(),vT.exports=Kt;var OP=vT.exports,sv=OP;yf.createRoot=sv.createRoot,yf.hydrateRoot=sv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ea.apply(this,arguments)}var Ar;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ar||(Ar={}));const av="popstate";function UP(n){n===void 0&&(n={});function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Li(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),ch("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof o=="string"?o:Fu(o))}function r(i,o){Ac(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return BP(e,t,r,n)}function Ye(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ac(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FP(){return Math.random().toString(36).substr(2,8)}function lv(n,e){return{usr:n.state,key:n.key,idx:e}}function ch(n,e,t,r){return t===void 0&&(t=null),Ea({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Li(e):e,{state:t,key:e&&e.key||r||FP()})}function Fu(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Li(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function BP(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Ar.Pop,l=null,c=h();c==null&&(c=0,s.replaceState(Ea({},s.state,{idx:c}),""));function h(){return(s.state||{idx:null}).idx}function m(){a=Ar.Pop;let N=h(),S=N==null?null:N-c;c=N,l&&l({action:a,location:k.location,delta:S})}function g(N,S){a=Ar.Push;let C=ch(k.location,N,S);t&&t(C,N),c=h()+1;let R=lv(C,c),D=k.createHref(C);try{s.pushState(R,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(D)}o&&l&&l({action:a,location:k.location,delta:1})}function v(N,S){a=Ar.Replace;let C=ch(k.location,N,S);t&&t(C,N),c=h();let R=lv(C,c),D=k.createHref(C);s.replaceState(R,"",D),o&&l&&l({action:a,location:k.location,delta:0})}function T(N){let S=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof N=="string"?N:Fu(N);return C=C.replace(/ $/,"%20"),Ye(S,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,S)}let k={get action(){return a},get location(){return n(i,s)},listen(N){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(av,m),l=N,()=>{i.removeEventListener(av,m),l=null}},createHref(N){return e(i,N)},createURL:T,encodeLocation(N){let S=T(N);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(N){return s.go(N)}};return k}var uv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(uv||(uv={}));function $P(n,e,t){return t===void 0&&(t="/"),zP(n,e,t)}function zP(n,e,t,r){let i=typeof e=="string"?Li(e):e,o=Qp(i.pathname||"/",t);if(o==null)return null;let s=_0(n);qP(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=tk(o);a=ZP(s[l],c)}return a}function _0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Or([r,l.relativePath]),h=t.concat(l);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_0(o.children,e,h,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:QP(c,o.index),routesMeta:h})};return n.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of E0(o.path))i(o,s,l)}),e}function E0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=E0(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function qP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:XP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const GP=/^:[\w-]+$/,HP=3,WP=2,KP=1,JP=10,YP=-2,cv=n=>n==="*";function QP(n,e){let t=n.split("/"),r=t.length;return t.some(cv)&&(r+=YP),e&&(r+=WP),t.filter(i=>!cv(i)).reduce((i,o)=>i+(GP.test(o)?HP:o===""?KP:JP),r)}function XP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function ZP(n,e,t){let{routesMeta:r}=n,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",m=jP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),g=l.route;if(!m)return null;Object.assign(i,m.params),s.push({params:i,pathname:Or([o,m.pathname]),pathnameBase:sk(Or([o,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(o=Or([o,m.pathnameBase]))}return s}function jP(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ek(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,m)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let k=a[m]||"";s=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const T=a[m];return v&&!T?c[g]=void 0:c[g]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:n}}function ek(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Ac(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function tk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ac(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Qp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rk=n=>nk.test(n);function ik(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Li(n):n,o;if(t)if(rk(t))o=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),Ac(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?o=dv(t.substring(1),"/"):o=dv(t,e)}else o=e;return{pathname:o,search:ak(r),hash:lk(i)}}function dv(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Xd(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ok(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function T0(n,e){let t=ok(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function w0(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Li(n):(i=Ea({},n),Ye(!i.pathname||!i.pathname.includes("?"),Xd("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),Xd("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),Xd("#","search","hash",i)));let o=n===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=t;else{let m=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}a=m>=0?e[m]:"/"}let l=ik(i,a),c=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Or=n=>n.join("/").replace(/\/\/+/g,"/"),sk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ak=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function uk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const C0=["post","put","patch","delete"];new Set(C0);const ck=["get",...C0];new Set(ck);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ta.apply(this,arguments)}const Xp=F.createContext(null),dk=F.createContext(null),bi=F.createContext(null),Rc=F.createContext(null),Oi=F.createContext({outlet:null,matches:[],isDataRoute:!1}),I0=F.createContext(null);function fk(n,e){let{relative:t}=e===void 0?{}:e;Ua()||Ye(!1);let{basename:r,navigator:i}=F.useContext(bi),{hash:o,pathname:s,search:a}=A0(n,{relative:t}),l=s;return r!=="/"&&(l=s==="/"?r:Or([r,s])),i.createHref({pathname:l,search:a,hash:o})}function Ua(){return F.useContext(Rc)!=null}function Fa(){return Ua()||Ye(!1),F.useContext(Rc).location}function S0(n){F.useContext(bi).static||F.useLayoutEffect(n)}function Zp(){let{isDataRoute:n}=F.useContext(Oi);return n?Sk():hk()}function hk(){Ua()||Ye(!1);let n=F.useContext(Xp),{basename:e,future:t,navigator:r}=F.useContext(bi),{matches:i}=F.useContext(Oi),{pathname:o}=Fa(),s=JSON.stringify(T0(i,t.v7_relativeSplatPath)),a=F.useRef(!1);return S0(()=>{a.current=!0}),F.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let m=w0(c,JSON.parse(s),o,h.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Or([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,s,o,n])}function A0(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=F.useContext(bi),{matches:i}=F.useContext(Oi),{pathname:o}=Fa(),s=JSON.stringify(T0(i,r.v7_relativeSplatPath));return F.useMemo(()=>w0(n,JSON.parse(s),o,t==="path"),[n,s,o,t])}function pk(n,e){return mk(n,e)}function mk(n,e,t,r){Ua()||Ye(!1);let{navigator:i}=F.useContext(bi),{matches:o}=F.useContext(Oi),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=Fa(),h;if(e){var m;let N=typeof e=="string"?Li(e):e;l==="/"||(m=N.pathname)!=null&&m.startsWith(l)||Ye(!1),h=N}else h=c;let g=h.pathname||"/",v=g;if(l!=="/"){let N=l.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=$P(n,{pathname:v}),k=Ek(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:Or([l,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?l:Or([l,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,t,r);return e&&k?F.createElement(Rc.Provider,{value:{location:Ta({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ar.Pop}},k):k}function gk(){let n=Ik(),e=uk(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,null)}const yk=F.createElement(gk,null);class vk extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(Oi.Provider,{value:this.props.routeContext},F.createElement(I0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _k(n){let{routeContext:e,match:t,children:r}=n,i=F.useContext(Xp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(Oi.Provider,{value:e},r)}function Ek(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);h>=0||Ye(!1),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let m=s[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:g,errors:v}=t,T=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||T){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,m,g)=>{let v,T=!1,k=null,N=null;t&&(v=a&&m.route.id?a[m.route.id]:void 0,k=m.route.errorElement||yk,l&&(c<0&&g===0?(Ak("route-fallback"),T=!0,N=null):c===g&&(T=!0,N=m.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,g+1)),C=()=>{let R;return v?R=k:T?R=N:m.route.Component?R=F.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=h,F.createElement(_k,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?F.createElement(vk,{location:t.location,revalidation:t.revalidation,component:k,error:v,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):C()},null)}var R0=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(R0||{}),P0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(P0||{});function Tk(n){let e=F.useContext(Xp);return e||Ye(!1),e}function wk(n){let e=F.useContext(dk);return e||Ye(!1),e}function Ck(n){let e=F.useContext(Oi);return e||Ye(!1),e}function k0(n){let e=Ck(),t=e.matches[e.matches.length-1];return t.route.id||Ye(!1),t.route.id}function Ik(){var n;let e=F.useContext(I0),t=wk(),r=k0();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Sk(){let{router:n}=Tk(R0.UseNavigateStable),e=k0(P0.UseNavigateStable),t=F.useRef(!1);return S0(()=>{t.current=!0}),F.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Ta({fromRouteId:e},o)))},[n,e])}const fv={};function Ak(n,e,t){fv[n]||(fv[n]=!0)}function Rk(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function hr(n){Ye(!1)}function Pk(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ar.Pop,navigator:o,static:s=!1,future:a}=n;Ua()&&Ye(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:o,static:s,future:Ta({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=Li(r));let{pathname:h="/",search:m="",hash:g="",state:v=null,key:T="default"}=r,k=F.useMemo(()=>{let N=Qp(h,l);return N==null?null:{location:{pathname:N,search:m,hash:g,state:v,key:T},navigationType:i}},[l,h,m,g,v,T,i]);return k==null?null:F.createElement(bi.Provider,{value:c},F.createElement(Rc.Provider,{children:t,value:k}))}function kk(n){let{children:e,location:t}=n;return pk(dh(e),t)}new Promise(()=>{});function dh(n,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(n,(r,i)=>{if(!F.isValidElement(r))return;let o=[...e,i];if(r.type===F.Fragment){t.push.apply(t,dh(r.props.children,o));return}r.type!==hr&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=dh(r.props.children,o)),t.push(s)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fh(){return fh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fh.apply(this,arguments)}function xk(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Nk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Mk(n,e){return n.button===0&&(!e||e==="_self")&&!Nk(n)}const Dk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vk="6";try{window.__reactRouterVersion=Vk}catch{}const Lk="startTransition",hv=MA[Lk];function bk(n){let{basename:e,children:t,future:r,window:i}=n,o=F.useRef();o.current==null&&(o.current=UP({window:i,v5Compat:!0}));let s=o.current,[a,l]=F.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},h=F.useCallback(m=>{c&&hv?hv(()=>l(m)):l(m)},[l,c]);return F.useLayoutEffect(()=>s.listen(h),[s,h]),F.useEffect(()=>Rk(r),[r]),F.createElement(Pk,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s,future:r})}const Ok=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zn=F.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:h,viewTransition:m}=e,g=xk(e,Dk),{basename:v}=F.useContext(bi),T,k=!1;if(typeof c=="string"&&Uk.test(c)&&(T=c,Ok))try{let R=new URL(window.location.href),D=c.startsWith("//")?new URL(R.protocol+c):new URL(c),O=Qp(D.pathname,v);D.origin===R.origin&&O!=null?c=O+D.search+D.hash:k=!0}catch{}let N=fk(c,{relative:i}),S=Fk(c,{replace:s,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:m});function C(R){r&&r(R),R.defaultPrevented||S(R)}return F.createElement("a",fh({},g,{href:T||N,onClick:k||o?r:C,ref:t,target:l}))});var pv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(pv||(pv={}));var mv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(mv||(mv={}));function Fk(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=e===void 0?{}:e,l=Zp(),c=Fa(),h=A0(n,{relative:s});return F.useCallback(m=>{if(Mk(m,t)){m.preventDefault();let g=r!==void 0?r:Fu(c)===Fu(h);l(n,{replace:g,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[c,l,h,r,i,t,n,o,s,a])}function Bk(){return I.createElement("div",{className:"relative isolate overflow-hidden bg-white"},I.createElement("div",{className:"mx-auto max-w-7xl px-6 pb-24 pt-10 sm:pb-32 lg:flex lg:px-8 lg:py-40"},I.createElement("div",{className:"mx-auto max-w-2xl lg:mx-0 lg:max-w-xl lg:flex-shrink-0 lg:pt-8"},I.createElement("div",{className:"mt-24 sm:mt-32 lg:mt-16"},I.createElement("h1",{className:"mt-10 text-4xl font-bold tracking-tight text-gray-900 sm:text-6xl"},"valuez, optimisez et rvlez votre plein potentiel."),I.createElement("p",{className:"mt-6 text-lg leading-8 text-gray-600"},"Go'Top Pro est la plateforme de formation B2B conue pour les grants de salons de beaut, restaurants et boutiques. Diagnostiquez vos pratiques et recevez un parcours de formation sur-mesure gnr par l'IA."),I.createElement("div",{className:"mt-10 flex items-center gap-x-6"},I.createElement(zn,{to:"/quiz",className:"rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"valuer mon Potentiel"),I.createElement(zn,{to:"/login",className:"text-sm font-semibold leading-6 text-gray-900"},"Dj client ? Se connecter ",I.createElement("span",{"aria-hidden":"true"},""))))),I.createElement("div",{className:"mx-auto mt-16 flex max-w-2xl sm:mt-24 lg:ml-10 lg:mr-0 lg:mt-0 lg:max-w-none lg:flex-none xl:ml-32"},I.createElement("div",{className:"max-w-3xl flex-none sm:max-w-5xl lg:max-w-none"},I.createElement("div",{className:"-m-2 rounded-xl bg-gray-900/5 p-2 ring-1 ring-inset ring-gray-900/10 lg:-m-4 lg:rounded-2xl lg:p-4"},I.createElement("img",{src:"https://picsum.photos/seed/business/1200/800",alt:"App screenshot",width:2432,height:1442,className:"w-[76rem] rounded-md shadow-2xl ring-1 ring-gray-900/10"}))))))}const si=[{text:"Votre quipe est-elle forme aux techniques d'un bon accueil tlphonique ?",topic:"Accueil tlphonique"},{text:"Vos collaborateurs savent-ils remplir efficacement un carnet de RDV ?",topic:"Organisation du travail"},{text:"Entranez-vous vos collaborateurs  l'accueil client ?",topic:"Accueil physique"},{text:"L'quipe s'entrane-t-elle  faire un bon diagnostic sous forme de mise en situation ?",topic:"Communication verbale"},{text:"La propret du salon est-elle optimum ?",topic:"Propret et image"},{text:"Y a t-il des rgles de bonnes conduites crites  respecter en salon ?",topic:"Comportements de l'quipe"},{text:"Avez-vous adopt un code vestimentaire pour l'ensemble de l'quipe ?",topic:"Propret et image"},{text:"Avez-vous des fiches postes crites ?",topic:"Responsabilits et dlgation"},{text:"Envoyez-vous rgulirement vos collaborateurs en formation ?",topic:"Formations et mise en situation"},{text:"Vos tarifs sont-ils clairs pour toute l'quipe et pour vos clients ?",topic:"Organisation du travail"},{text:"Possdez-vous un fichier commercial  jour ?",topic:"Organisation du travail"},{text:"Organisez-vous occasionnellement des vnements festifs ?",topic:"Baromtre de l'ambiance"},{text:"Faites-vous des entretiens de suivi avec vos collaborateurs ?",topic:"Pratiques managriales"},{text:"Fixez-vous des objectifs chiffrs ?",topic:"Pratiques managriales"},{text:"Mettez-vous des runions en place rgulirement ?",topic:"Pratiques managriales"},{text:"Avez-vous des rgles de fonctionnement crites ?",topic:"Organisation du travail"}],$k=500,tu="Fcfa";var ye;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},n.getValidEnumValues=i=>{const o=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return n.objectValues(s)},n.objectValues=i=>n.objectKeys(i).map(function(o){return i[o]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},n.find=(i,o)=>{for(const s of i)if(o(s))return s},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}n.joinValues=r,n.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(ye||(ye={}));var gv;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(gv||(gv={}));const J=ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gr=n=>{switch(typeof n){case"undefined":return J.undefined;case"string":return J.string;case"number":return Number.isNaN(n)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(n)?J.array:n===null?J.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?J.promise:typeof Map<"u"&&n instanceof Map?J.map:typeof Set<"u"&&n instanceof Set?J.set:typeof Date<"u"&&n instanceof Date?J.date:J.object;default:return J.unknown}},q=ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class nr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(t(s));else{let a=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(s))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof nr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ye.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)if(i.path.length>0){const o=i.path[0];t[o]=t[o]||[],t[o].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}nr.create=n=>new nr(n);const hh=(n,e)=>{let t;switch(n.code){case q.invalid_type:n.received===J.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case q.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ye.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:t=`Unrecognized key(s) in object: ${ye.joinValues(n.keys,", ")}`;break;case q.invalid_union:t="Invalid input";break;case q.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ye.joinValues(n.options)}`;break;case q.invalid_enum_value:t=`Invalid enum value. Expected ${ye.joinValues(n.options)}, received '${n.received}'`;break;case q.invalid_arguments:t="Invalid function arguments";break;case q.invalid_return_type:t="Invalid function return type";break;case q.invalid_date:t="Invalid date";break;case q.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ye.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case q.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case q.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case q.custom:t="Invalid input";break;case q.invalid_intersection_types:t="Intersection results could not be merged";break;case q.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case q.not_finite:t="Number must be finite";break;default:t=e.defaultError,ye.assertNever(n)}return{message:t}};let zk=hh;function qk(){return zk}const Gk=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,o=[...t,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(s,{data:e,defaultError:a}).message;return{...i,path:o,message:a}};function H(n,e){const t=qk(),r=Gk({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===hh?void 0:hh].filter(i=>!!i)});n.common.issues.push(r)}class Rt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return ie;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const o=await i.key,s=await i.value;r.push({key:o,value:s})}return Rt.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return ie;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:e.value,value:r}}}const ie=Object.freeze({status:"aborted"}),xs=n=>({status:"dirty",value:n}),nn=n=>({status:"valid",value:n}),yv=n=>n.status==="aborted",vv=n=>n.status==="dirty",No=n=>n.status==="valid",Bu=n=>typeof Promise<"u"&&n instanceof Promise;var X;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(X||(X={}));class Pn{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _v=(n,e)=>{if(No(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new nr(n.common.issues);return this._error=t,this._error}}};function le(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,a)=>{const{message:l}=n;return s.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:i}}class fe{get description(){return this._def.description}_getType(e){return gr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:gr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rt,ctx:{common:e.parent.common,data:e.data,parsedType:gr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Bu(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gr(e)},i=this._parseSync({data:e,path:r.path,parent:r});return _v(r,i)}"~validate"(e){var r,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gr(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:t});return No(o)?{value:o.value}:{issues:t.common.issues}}catch(o){(i=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(o=>No(o)?{value:o.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gr(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Bu(i)?i:Promise.resolve(i));return _v(r,o)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{const s=e(i),a=()=>o.addIssue({code:q.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new Vo({schema:this,typeName:te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ur.create(this,this._def)}nullable(){return Lo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return In.create(this)}promise(){return Hu.create(this,this._def)}or(e){return zu.create([this,e],this._def)}and(e){return qu.create(this,e,this._def)}transform(e){return new Vo({...le(this._def),schema:this,typeName:te.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new yh({...le(this._def),innerType:this,defaultValue:t,typeName:te.ZodDefault})}brand(){return new hx({typeName:te.ZodBranded,type:this,...le(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new vh({...le(this._def),innerType:this,catchValue:t,typeName:te.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return jp.create(this,e)}readonly(){return _h.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Hk=/^c[^\s-]{8,}$/i,Wk=/^[0-9a-z]+$/,Kk=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jk=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yk=/^[a-z0-9_-]{21}$/i,Qk=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Xk=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zk=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zd;const ex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,rx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ix=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ox=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,x0="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sx=new RegExp(`^${x0}$`);function N0(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function ax(n){return new RegExp(`^${N0(n)}$`)}function lx(n){let e=`${x0}T${N0(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ux(n,e){return!!((e==="v4"||!e)&&ex.test(n)||(e==="v6"||!e)&&nx.test(n))}function cx(n,e){if(!Qk.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function dx(n,e){return!!((e==="v4"||!e)&&tx.test(n)||(e==="v6"||!e)&&rx.test(n))}class _n extends fe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const o=this._getOrReturnCtx(e);return H(o,{code:q.invalid_type,expected:J.string,received:o.parsedType}),ie}const r=new Rt;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=e.data.length>o.value,a=e.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(e,i),s?H(i,{code:q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&H(i,{code:q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")Zk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"email",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Zd||(Zd=new RegExp(jk,"u")),Zd.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"emoji",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Jk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"uuid",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")Yk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"nanoid",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Hk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cuid",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Wk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cuid2",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Kk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"ulid",code:q.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),H(i,{validation:"url",code:q.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"regex",code:q.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),H(i,{code:q.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),H(i,{code:q.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),H(i,{code:q.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?lx(o).test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:q.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?sx.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:q.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?ax(o).test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:q.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?Xk.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"duration",code:q.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?ux(e.data,o.version)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"ip",code:q.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?cx(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"jwt",code:q.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?dx(e.data,o.version)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cidr",code:q.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?ix.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"base64",code:q.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?ox.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"base64url",code:q.invalid_string,message:o.message}),r.dirty()):ye.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:q.invalid_string,...X.errToObj(r)})}_addCheck(e){return new _n({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...X.errToObj(e)})}url(e){return this._addCheck({kind:"url",...X.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...X.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...X.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...X.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...X.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...X.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...X.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...X.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...X.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...X.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...X.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...X.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...X.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...X.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...X.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...X.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...X.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...X.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...X.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...X.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...X.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...X.errToObj(t)})}nonempty(e){return this.min(1,X.errToObj(e))}trim(){return new _n({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _n({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _n({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}_n.create=n=>new _n({checks:[],typeName:te.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...le(n)});function fx(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,o=Number.parseInt(n.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}class Ii extends fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const o=this._getOrReturnCtx(e);return H(o,{code:q.invalid_type,expected:J.number,received:o.parsedType}),ie}let r;const i=new Rt;for(const o of this._def.checks)o.kind==="int"?ye.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),H(r,{code:q.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:q.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:q.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?fx(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),H(r,{code:q.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),H(r,{code:q.not_finite,message:o.message}),i.dirty()):ye.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,X.toString(t))}gt(e,t){return this.setLimit("min",e,!1,X.toString(t))}lte(e,t){return this.setLimit("max",e,!0,X.toString(t))}lt(e,t){return this.setLimit("max",e,!1,X.toString(t))}setLimit(e,t,r,i){return new Ii({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:X.toString(i)}]})}_addCheck(e){return new Ii({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:X.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:X.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ye.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ii.create=n=>new Ii({checks:[],typeName:te.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...le(n)});class Si extends fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==J.bigint)return this._getInvalidInput(e);let r;const i=new Rt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:q.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:q.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),H(r,{code:q.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):ye.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return H(t,{code:q.invalid_type,expected:J.bigint,received:t.parsedType}),ie}gte(e,t){return this.setLimit("min",e,!0,X.toString(t))}gt(e,t){return this.setLimit("min",e,!1,X.toString(t))}lte(e,t){return this.setLimit("max",e,!0,X.toString(t))}lt(e,t){return this.setLimit("max",e,!1,X.toString(t))}setLimit(e,t,r,i){return new Si({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:X.toString(i)}]})}_addCheck(e){return new Si({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Si.create=n=>new Si({checks:[],typeName:te.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...le(n)});class $u extends fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const r=this._getOrReturnCtx(e);return H(r,{code:q.invalid_type,expected:J.boolean,received:r.parsedType}),ie}return nn(e.data)}}$u.create=n=>new $u({typeName:te.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...le(n)});class Mo extends fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const o=this._getOrReturnCtx(e);return H(o,{code:q.invalid_type,expected:J.date,received:o.parsedType}),ie}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return H(o,{code:q.invalid_date}),ie}const r=new Rt;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:q.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:q.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):ye.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Mo({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:X.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:X.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Mo.create=n=>new Mo({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:te.ZodDate,...le(n)});class Ev extends fe{_parse(e){if(this._getType(e)!==J.symbol){const r=this._getOrReturnCtx(e);return H(r,{code:q.invalid_type,expected:J.symbol,received:r.parsedType}),ie}return nn(e.data)}}Ev.create=n=>new Ev({typeName:te.ZodSymbol,...le(n)});class Tv extends fe{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return H(r,{code:q.invalid_type,expected:J.undefined,received:r.parsedType}),ie}return nn(e.data)}}Tv.create=n=>new Tv({typeName:te.ZodUndefined,...le(n)});class wv extends fe{_parse(e){if(this._getType(e)!==J.null){const r=this._getOrReturnCtx(e);return H(r,{code:q.invalid_type,expected:J.null,received:r.parsedType}),ie}return nn(e.data)}}wv.create=n=>new wv({typeName:te.ZodNull,...le(n)});class Cv extends fe{constructor(){super(...arguments),this._any=!0}_parse(e){return nn(e.data)}}Cv.create=n=>new Cv({typeName:te.ZodAny,...le(n)});class ph extends fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nn(e.data)}}ph.create=n=>new ph({typeName:te.ZodUnknown,...le(n)});class Gr extends fe{_parse(e){const t=this._getOrReturnCtx(e);return H(t,{code:q.invalid_type,expected:J.never,received:t.parsedType}),ie}}Gr.create=n=>new Gr({typeName:te.ZodNever,...le(n)});class Iv extends fe{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return H(r,{code:q.invalid_type,expected:J.void,received:r.parsedType}),ie}return nn(e.data)}}Iv.create=n=>new Iv({typeName:te.ZodVoid,...le(n)});class In extends fe{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==J.array)return H(t,{code:q.invalid_type,expected:J.array,received:t.parsedType}),ie;if(i.exactLength!==null){const s=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(s||a)&&(H(t,{code:s?q.too_big:q.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(H(t,{code:q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(H(t,{code:q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((s,a)=>i.type._parseAsync(new Pn(t,s,t.path,a)))).then(s=>Rt.mergeArray(r,s));const o=[...t.data].map((s,a)=>i.type._parseSync(new Pn(t,s,t.path,a)));return Rt.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new In({...this._def,minLength:{value:e,message:X.toString(t)}})}max(e,t){return new In({...this._def,maxLength:{value:e,message:X.toString(t)}})}length(e,t){return new In({...this._def,exactLength:{value:e,message:X.toString(t)}})}nonempty(e){return this.min(1,e)}}In.create=(n,e)=>new In({type:n,minLength:null,maxLength:null,exactLength:null,typeName:te.ZodArray,...le(e)});function Yi(n){if(n instanceof We){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ur.create(Yi(r))}return new We({...n._def,shape:()=>e})}else return n instanceof In?new In({...n._def,type:Yi(n.element)}):n instanceof Ur?Ur.create(Yi(n.unwrap())):n instanceof Lo?Lo.create(Yi(n.unwrap())):n instanceof Ai?Ai.create(n.items.map(e=>Yi(e))):n}class We extends fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ye.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==J.object){const c=this._getOrReturnCtx(e);return H(c,{code:q.invalid_type,expected:J.object,received:c.parsedType}),ie}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof Gr&&this._def.unknownKeys==="strip"))for(const c in i.data)s.includes(c)||a.push(c);const l=[];for(const c of s){const h=o[c],m=i.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new Pn(i,m,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Gr){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(c==="strict")a.length>0&&(H(i,{code:q.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of a){const m=i.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new Pn(i,m,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of l){const m=await h.key,g=await h.value;c.push({key:m,value:g,alwaysSet:h.alwaysSet})}return c}).then(c=>Rt.mergeObjectSync(r,c)):Rt.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return X.errToObj,new We({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var o,s;const i=((s=(o=this._def).errorMap)==null?void 0:s.call(o,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:X.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:te.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const t={};for(const r of ye.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new We({...this._def,shape:()=>t})}omit(e){const t={};for(const r of ye.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new We({...this._def,shape:()=>t})}deepPartial(){return Yi(this)}partial(e){const t={};for(const r of ye.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}return new We({...this._def,shape:()=>t})}required(e){const t={};for(const r of ye.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Ur;)o=o._def.innerType;t[r]=o}return new We({...this._def,shape:()=>t})}keyof(){return M0(ye.objectKeys(this.shape))}}We.create=(n,e)=>new We({shape:()=>n,unknownKeys:"strip",catchall:Gr.create(),typeName:te.ZodObject,...le(e)});We.strictCreate=(n,e)=>new We({shape:()=>n,unknownKeys:"strict",catchall:Gr.create(),typeName:te.ZodObject,...le(e)});We.lazycreate=(n,e)=>new We({shape:n,unknownKeys:"strip",catchall:Gr.create(),typeName:te.ZodObject,...le(e)});class zu extends fe{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new nr(a.ctx.common.issues));return H(t,{code:q.invalid_union,unionErrors:s}),ie}if(t.common.async)return Promise.all(r.map(async o=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},h=l._parseSync({data:t.data,path:t.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!o&&(o={result:h,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(l=>new nr(l));return H(t,{code:q.invalid_union,unionErrors:a}),ie}}get options(){return this._def.options}}zu.create=(n,e)=>new zu({options:n,typeName:te.ZodUnion,...le(e)});function mh(n,e){const t=gr(n),r=gr(e);if(n===e)return{valid:!0,data:n};if(t===J.object&&r===J.object){const i=ye.objectKeys(e),o=ye.objectKeys(n).filter(a=>i.indexOf(a)!==-1),s={...n,...e};for(const a of o){const l=mh(n[a],e[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(t===J.array&&r===J.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<n.length;o++){const s=n[o],a=e[o],l=mh(s,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===J.date&&r===J.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class qu extends fe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(o,s)=>{if(yv(o)||yv(s))return ie;const a=mh(o.value,s.value);return a.valid?((vv(o)||vv(s))&&t.dirty(),{status:t.value,value:a.data}):(H(r,{code:q.invalid_intersection_types}),ie)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qu.create=(n,e,t)=>new qu({left:n,right:e,typeName:te.ZodIntersection,...le(t)});class Ai extends fe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.array)return H(r,{code:q.invalid_type,expected:J.array,received:r.parsedType}),ie;if(r.data.length<this._def.items.length)return H(r,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ie;!this._def.rest&&r.data.length>this._def.items.length&&(H(r,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Pn(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>Rt.mergeArray(t,s)):Rt.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new Ai({...this._def,rest:e})}}Ai.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ai({items:n,typeName:te.ZodTuple,rest:null,...le(e)})};class Gu extends fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return H(r,{code:q.invalid_type,expected:J.object,received:r.parsedType}),ie;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in r.data)i.push({key:o._parse(new Pn(r,a,r.path,a)),value:s._parse(new Pn(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Rt.mergeObjectAsync(t,i):Rt.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof fe?new Gu({keyType:e,valueType:t,typeName:te.ZodRecord,...le(r)}):new Gu({keyType:_n.create(),valueType:e,typeName:te.ZodRecord,...le(t)})}}class Sv extends fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.map)return H(r,{code:q.invalid_type,expected:J.map,received:r.parsedType}),ie;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Pn(r,a,r.path,[c,"key"])),value:o._parse(new Pn(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return ie;(c.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(c.value,h.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of s){const c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return ie;(c.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(c.value,h.value)}return{status:t.value,value:a}}}}Sv.create=(n,e,t)=>new Sv({valueType:e,keyType:n,typeName:te.ZodMap,...le(t)});class wa extends fe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.set)return H(r,{code:q.invalid_type,expected:J.set,received:r.parsedType}),ie;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(H(r,{code:q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(H(r,{code:q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const o=this._def.valueType;function s(l){const c=new Set;for(const h of l){if(h.status==="aborted")return ie;h.status==="dirty"&&t.dirty(),c.add(h.value)}return{status:t.value,value:c}}const a=[...r.data.values()].map((l,c)=>o._parse(new Pn(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(e,t){return new wa({...this._def,minSize:{value:e,message:X.toString(t)}})}max(e,t){return new wa({...this._def,maxSize:{value:e,message:X.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}wa.create=(n,e)=>new wa({valueType:n,minSize:null,maxSize:null,typeName:te.ZodSet,...le(e)});class gh extends fe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}gh.create=(n,e)=>new gh({getter:n,typeName:te.ZodLazy,...le(e)});class Av extends fe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return H(t,{received:t.data,code:q.invalid_literal,expected:this._def.value}),ie}return{status:"valid",value:e.data}}get value(){return this._def.value}}Av.create=(n,e)=>new Av({value:n,typeName:te.ZodLiteral,...le(e)});function M0(n,e){return new Do({values:n,typeName:te.ZodEnum,...le(e)})}class Do extends fe{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return H(t,{expected:ye.joinValues(r),received:t.parsedType,code:q.invalid_type}),ie}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return H(t,{received:t.data,code:q.invalid_enum_value,options:r}),ie}return nn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Do.create(e,{...this._def,...t})}exclude(e,t=this._def){return Do.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Do.create=M0;class Rv extends fe{_parse(e){const t=ye.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==J.string&&r.parsedType!==J.number){const i=ye.objectValues(t);return H(r,{expected:ye.joinValues(i),received:r.parsedType,code:q.invalid_type}),ie}if(this._cache||(this._cache=new Set(ye.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ye.objectValues(t);return H(r,{received:r.data,code:q.invalid_enum_value,options:i}),ie}return nn(e.data)}get enum(){return this._def.values}}Rv.create=(n,e)=>new Rv({values:n,typeName:te.ZodNativeEnum,...le(e)});class Hu extends fe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==J.promise&&t.common.async===!1)return H(t,{code:q.invalid_type,expected:J.promise,received:t.parsedType}),ie;const r=t.parsedType===J.promise?t.data:Promise.resolve(t.data);return nn(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Hu.create=(n,e)=>new Hu({type:n,typeName:te.ZodPromise,...le(e)});class Vo extends fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{H(r,s),s.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async a=>{if(t.value==="aborted")return ie;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?ie:l.status==="dirty"||t.value==="dirty"?xs(l.value):l});{if(t.value==="aborted")return ie;const a=this._def.schema._parseSync({data:s,path:r.path,parent:r});return a.status==="aborted"?ie:a.status==="dirty"||t.value==="dirty"?xs(a.value):a}}if(i.type==="refinement"){const s=a=>{const l=i.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ie:(a.status==="dirty"&&t.dirty(),s(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ie:(a.status==="dirty"&&t.dirty(),s(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!No(s))return ie;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>No(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:t.value,value:a})):ie);ye.assertNever(i)}}Vo.create=(n,e,t)=>new Vo({schema:n,typeName:te.ZodEffects,effect:e,...le(t)});Vo.createWithPreprocess=(n,e,t)=>new Vo({schema:e,effect:{type:"preprocess",transform:n},typeName:te.ZodEffects,...le(t)});class Ur extends fe{_parse(e){return this._getType(e)===J.undefined?nn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ur.create=(n,e)=>new Ur({innerType:n,typeName:te.ZodOptional,...le(e)});class Lo extends fe{_parse(e){return this._getType(e)===J.null?nn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lo.create=(n,e)=>new Lo({innerType:n,typeName:te.ZodNullable,...le(e)});class yh extends fe{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===J.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}yh.create=(n,e)=>new yh({innerType:n,typeName:te.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...le(e)});class vh extends fe{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Bu(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new nr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new nr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}vh.create=(n,e)=>new vh({innerType:n,typeName:te.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...le(e)});class Pv extends fe{_parse(e){if(this._getType(e)!==J.nan){const r=this._getOrReturnCtx(e);return H(r,{code:q.invalid_type,expected:J.nan,received:r.parsedType}),ie}return{status:"valid",value:e.data}}}Pv.create=n=>new Pv({typeName:te.ZodNaN,...le(n)});class hx extends fe{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class jp extends fe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ie:o.status==="dirty"?(t.dirty(),xs(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ie:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new jp({in:e,out:t,typeName:te.ZodPipeline})}}class _h extends fe{_parse(e){const t=this._def.innerType._parse(e),r=i=>(No(i)&&(i.value=Object.freeze(i.value)),i);return Bu(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}_h.create=(n,e)=>new _h({innerType:n,typeName:te.ZodReadonly,...le(e)});var te;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(te||(te={}));const ai=_n.create,kv=Ii.create;Si.create;const px=$u.create;Mo.create;const xv=ph.create;Gr.create;const Ns=In.create,mx=We.create,gx=zu.create;qu.create;Ai.create;const yx=Gu.create,vx=gh.create,_x=Do.create;Hu.create;Ur.create;Lo.create;const Ji={string:n=>_n.create({...n,coerce:!0}),number:n=>Ii.create({...n,coerce:!0}),boolean:n=>$u.create({...n,coerce:!0}),bigint:n=>Si.create({...n,coerce:!0}),date:n=>Mo.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ex,Tx;function wx(){return{geminiUrl:Ex,vertexUrl:Tx}}function Cx(n,e,t){var r,i,o;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const s=wx();return n.vertexai?(i=s.vertexUrl)!==null&&i!==void 0?i:e:(o=s.geminiUrl)!==null&&o!==void 0?o:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ba{}function ee(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(n,e,t){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){const h=l[c];f(h,e.slice(o+1),t[c])}else for(const c of l)f(c,e.slice(o+1),t)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];f(l[0],e.slice(o+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=t}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const r=e[t];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const o=n[i];return Array.isArray(o)?o.map(s=>u(s,e.slice(t+1))):void 0}else return}else n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Nv||(Nv={}));var Mv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Mv||(Mv={}));var Dv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Dv||(Dv={}));var Vv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Vv||(Vv={}));var Lv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Lv||(Lv={}));var ve;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(ve||(ve={}));var bv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(bv||(bv={}));var Ov;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Ov||(Ov={}));var Uv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Uv||(Uv={}));var Fv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Fv||(Fv={}));var Bv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Bv||(Bv={}));var $v;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})($v||($v={}));var zv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zv||(zv={}));var Wu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Wu||(Wu={}));var qv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qv||(qv={}));var Eh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Eh||(Eh={}));var Gv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Gv||(Gv={}));var Hv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Hv||(Hv={}));var Wv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Wv||(Wv={}));var Kv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Kv||(Kv={}));var Jv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Jv||(Jv={}));var Yv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Yv||(Yv={}));var Qv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Qv||(Qv={}));var Xv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Xv||(Xv={}));var Zv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Zv||(Zv={}));var jv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(jv||(jv={}));var e_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(e_||(e_={}));var t_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(t_||(t_={}));var n_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(n_||(n_={}));var r_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(r_||(r_={}));var i_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(i_||(i_={}));var o_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(o_||(o_={}));var s_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(s_||(s_={}));var a_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(a_||(a_={}));var l_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(l_||(l_={}));var u_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(u_||(u_={}));var c_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(c_||(c_={}));var d_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(d_||(d_={}));var f_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY"})(f_||(f_={}));var fo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(fo||(fo={}));class Cs{get text(){var e,t,r,i,o,s,a,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const m=[];for(const g of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,T]of Object.entries(g))v!=="text"&&v!=="thought"&&(T!==null||T!==void 0)&&m.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,t,r,i,o,s,a,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="inlineData"&&(v!==null||v!==void 0)&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,r,i,o,s,a,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,r,i,o,s,a,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,r,i,o,s,a,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class h_{}class p_{}class Ix{}class Sx{}class m_{}class g_{}class y_{}class Ax{}class v_{}class __{}class E_{}class Rx{}class Th{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Px{}class kx{}class xx{get text(){var e,t,r;let i="",o=!1;const s=[];for(const a of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,t,r;let i="";const o=[];for(const s of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Nx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Re(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function D0(n,e){const t=Re(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function V0(n,e){return Array.isArray(e)?e.map(t=>Ku(n,t)):[Ku(n,e)]}function Ku(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Mx(n,e){const t=Ku(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Dx(n,e){const t=Ku(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function T_(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function L0(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>T_(n,t)):[T_(n,e)]}function wh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function w_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function C_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Dt(n,e){if(e==null)throw new Error("ContentUnion is required");return wh(e)?e:{role:"user",parts:L0(n,e)}}function b0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Dt(n,t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Dt(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Dt(n,t)):[Dt(n,e)]}function hn(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(w_(e)||C_(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dt(n,e)]}const t=[],r=[],i=wh(e[0]);for(const o of e){const s=wh(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(w_(o)||C_(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||t.push({role:"user",parts:L0(n,r)}),t}const I_=_x(["string","number","integer","object","array","boolean","null"]),Vx=gx([I_,Ns(I_)]);function Lx(n=!0){const e=vx(()=>{const t=mx({type:Vx.optional(),format:ai().optional(),title:ai().optional(),description:ai().optional(),default:xv().optional(),items:e.optional(),minItems:Ji.string().optional(),maxItems:Ji.string().optional(),enum:Ns(xv()).optional(),properties:yx(ai(),e).optional(),required:Ns(ai()).optional(),minProperties:Ji.string().optional(),maxProperties:Ji.string().optional(),propertyOrdering:Ns(ai()).optional(),minimum:kv().optional(),maximum:kv().optional(),minLength:Ji.string().optional(),maxLength:Ji.string().optional(),pattern:ai().optional(),anyOf:Ns(e).optional(),additionalProperties:px().optional()});return n?t.strict():t});return e}function bx(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.keys(ve).includes(t[0].toUpperCase())?ve[t[0].toUpperCase()]:ve.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.keys(ve).includes(r.toUpperCase())?ve[r.toUpperCase()]:ve.TYPE_UNSPECIFIED})}}function Js(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&bx(n.type,e);for(const[s,a]of Object.entries(n))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.keys(ve).includes(a.toUpperCase())?a.toUpperCase():ve.TYPE_UNSPECIFIED}else if(t.includes(s))e[s]=Js(a);else if(r.includes(s)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Js(c))}e[s]=l}else if(i.includes(s)){const l={};for(const[c,h]of Object.entries(a))l[c]=Js(h);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Ju(n,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=Lx().parse(e);return Js(t)}else return Js(e)}function O0(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function U0(n,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Pc(n,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=Ju(n,t.parameters)),t.response&&(t.response=Ju(n,t.response));return e}function kc(n,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const r of e)t.push(r);return t}function Ox(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function Zr(n,e){if(typeof e!="string")throw new Error("name must be a string");return Ox(n,e,"cachedContents")}function F0(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function jr(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Ux(n){return n!=null&&typeof n=="object"&&"name"in n}function Fx(n){return n!=null&&typeof n=="object"&&"video"in n}function Bx(n){return n!=null&&typeof n=="object"&&"uri"in n}function B0(n,e){var t;let r;if(Ux(e)&&(r=e.name),!(Bx(e)&&(r=e.uri,r===void 0))&&!(Fx(e)&&(r=(t=e.video)===null||t===void 0?void 0:t.uri,r===void 0))){if(typeof e=="string"&&(r=e),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const o=r.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${r}`);r=o[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function $0(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function z0(n,e){for(const t of["models","tunedModels","publisherModels"])if($x(e,t))return e[t];return[]}function $x(n,e){return n!==null&&typeof n=="object"&&e in n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zx(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function qx(n,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(e,["data"]);r!=null&&f(t,["data"],r);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Gx(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],zx(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],qx(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function S_(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Gx(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function Hx(n,e){const t={},r=u(e,["behavior"]);r!=null&&f(t,["behavior"],r);const i=u(e,["description"]);i!=null&&f(t,["description"],i);const o=u(e,["name"]);o!=null&&f(t,["name"],o);const s=u(e,["parameters"]);s!=null&&f(t,["parameters"],s);const a=u(e,["response"]);return a!=null&&f(t,["response"],a),t}function Wx(n,e){const t={},r=u(e,["startTime"]);r!=null&&f(t,["startTime"],r);const i=u(e,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function Kx(n,e){const t={},r=u(e,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],Wx(n,r)),t}function Jx(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function Yx(n,e){const t={},r=u(e,["dynamicRetrievalConfig"]);return r!=null&&f(t,["dynamicRetrievalConfig"],Jx(n,r)),t}function Qx(){return{}}function Xx(n,e){const t={},r=u(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Hx(n,c))),f(t,["functionDeclarations"],l)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearch"]);i!=null&&f(t,["googleSearch"],Kx(n,i));const o=u(e,["googleSearchRetrieval"]);if(o!=null&&f(t,["googleSearchRetrieval"],Yx(n,o)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&f(t,["urlContext"],Qx());const a=u(e,["codeExecution"]);return a!=null&&f(t,["codeExecution"],a),t}function Zx(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function jx(n,e){const t={},r=u(e,["latitude"]);r!=null&&f(t,["latitude"],r);const i=u(e,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function eN(n,e){const t={},r=u(e,["latLng"]);return r!=null&&f(t,["latLng"],jx(n,r)),t}function tN(n,e){const t={},r=u(e,["functionCallingConfig"]);r!=null&&f(t,["functionCallingConfig"],Zx(n,r));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],eN(n,i)),t}function nN(n,e,t){const r={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const s=u(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const a=u(e,["contents"]);if(t!==void 0&&a!=null){let m=hn(n,a);Array.isArray(m)&&(m=m.map(g=>S_(n,g))),f(t,["contents"],m)}const l=u(e,["systemInstruction"]);t!==void 0&&l!=null&&f(t,["systemInstruction"],S_(n,Dt(n,l)));const c=u(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>Xx(n,g))),f(t,["tools"],m)}const h=u(e,["toolConfig"]);if(t!==void 0&&h!=null&&f(t,["toolConfig"],tN(n,h)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function rN(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["model"],D0(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],nN(n,i,t)),t}function iN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],Zr(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function oN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],Zr(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function sN(n,e,t){const r={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),r}function aN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],Zr(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],sN(n,i,t)),t}function lN(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),r}function uN(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],lN(n,r,t)),t}function cN(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function dN(n,e){const t={},r=u(e,["displayName"]);r!=null&&f(t,["displayName"],r);const i=u(e,["data"]);i!=null&&f(t,["data"],i);const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function fN(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],cN(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],dN(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function A_(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>fN(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function hN(n,e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=u(e,["description"]);r!=null&&f(t,["description"],r);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);const s=u(e,["response"]);return s!=null&&f(t,["response"],s),t}function pN(n,e){const t={},r=u(e,["startTime"]);r!=null&&f(t,["startTime"],r);const i=u(e,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function mN(n,e){const t={},r=u(e,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],pN(n,r)),t}function gN(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function yN(n,e){const t={},r=u(e,["dynamicRetrievalConfig"]);return r!=null&&f(t,["dynamicRetrievalConfig"],gN(n,r)),t}function vN(){return{}}function _N(n,e){const t={},r=u(e,["apiKeyString"]);return r!=null&&f(t,["apiKeyString"],r),t}function EN(n,e){const t={},r=u(e,["apiKeyConfig"]);r!=null&&f(t,["apiKeyConfig"],_N(n,r));const i=u(e,["authType"]);i!=null&&f(t,["authType"],i);const o=u(e,["googleServiceAccountConfig"]);o!=null&&f(t,["googleServiceAccountConfig"],o);const s=u(e,["httpBasicAuthConfig"]);s!=null&&f(t,["httpBasicAuthConfig"],s);const a=u(e,["oauthConfig"]);a!=null&&f(t,["oauthConfig"],a);const l=u(e,["oidcConfig"]);return l!=null&&f(t,["oidcConfig"],l),t}function TN(n,e){const t={},r=u(e,["authConfig"]);return r!=null&&f(t,["authConfig"],EN(n,r)),t}function wN(n,e){const t={},r=u(e,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>hN(n,m))),f(t,["functionDeclarations"],h)}const i=u(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=u(e,["googleSearch"]);o!=null&&f(t,["googleSearch"],mN(n,o));const s=u(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],yN(n,s)),u(e,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],vN());const l=u(e,["googleMaps"]);if(l!=null&&f(t,["googleMaps"],TN(n,l)),u(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=u(e,["codeExecution"]);return c!=null&&f(t,["codeExecution"],c),t}function CN(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function IN(n,e){const t={},r=u(e,["latitude"]);r!=null&&f(t,["latitude"],r);const i=u(e,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function SN(n,e){const t={},r=u(e,["latLng"]);return r!=null&&f(t,["latLng"],IN(n,r)),t}function AN(n,e){const t={},r=u(e,["functionCallingConfig"]);r!=null&&f(t,["functionCallingConfig"],CN(n,r));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],SN(n,i)),t}function RN(n,e,t){const r={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const s=u(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const a=u(e,["contents"]);if(t!==void 0&&a!=null){let g=hn(n,a);Array.isArray(g)&&(g=g.map(v=>A_(n,v))),f(t,["contents"],g)}const l=u(e,["systemInstruction"]);t!==void 0&&l!=null&&f(t,["systemInstruction"],A_(n,Dt(n,l)));const c=u(e,["tools"]);if(t!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>wN(n,v))),f(t,["tools"],g)}const h=u(e,["toolConfig"]);t!==void 0&&h!=null&&f(t,["toolConfig"],AN(n,h));const m=u(e,["kmsKeyName"]);return t!==void 0&&m!=null&&f(t,["encryption_spec","kmsKeyName"],m),r}function PN(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["model"],D0(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],RN(n,i,t)),t}function kN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],Zr(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function xN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],Zr(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function NN(n,e,t){const r={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),r}function MN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],Zr(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],NN(n,i,t)),t}function DN(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),r}function VN(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],DN(n,r,t)),t}function nu(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["model"]);o!=null&&f(t,["model"],o);const s=u(e,["createTime"]);s!=null&&f(t,["createTime"],s);const a=u(e,["updateTime"]);a!=null&&f(t,["updateTime"],a);const l=u(e,["expireTime"]);l!=null&&f(t,["expireTime"],l);const c=u(e,["usageMetadata"]);return c!=null&&f(t,["usageMetadata"],c),t}function LN(){return{}}function bN(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>nu(n,s))),f(t,["cachedContents"],o)}return t}function ru(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["model"]);o!=null&&f(t,["model"],o);const s=u(e,["createTime"]);s!=null&&f(t,["createTime"],s);const a=u(e,["updateTime"]);a!=null&&f(t,["updateTime"],a);const l=u(e,["expireTime"]);l!=null&&f(t,["expireTime"],l);const c=u(e,["usageMetadata"]);return c!=null&&f(t,["usageMetadata"],c),t}function ON(){return{}}function UN(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ru(n,s))),f(t,["cachedContents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(bo||(bo={}));class xc{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let s={config:{}};r?typeof r=="object"?s=Object.assign({},r):s=r:s={config:{}},s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FN extends Ba{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xc(bo.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=PN(this.apiClient,e);return a=ee("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ru(this.apiClient,h))}else{const c=rN(this.apiClient,e);return a=ee("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>nu(this.apiClient,h))}}async get(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=kN(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ru(this.apiClient,h))}else{const c=iN(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>nu(this.apiClient,h))}}async delete(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=xN(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(()=>{const h=ON(),m=new __;return Object.assign(m,h),m})}else{const c=oN(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(()=>{const h=LN(),m=new __;return Object.assign(m,h),m})}}async update(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=MN(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ru(this.apiClient,h))}else{const c=aN(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>nu(this.apiClient,h))}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=VN(this.apiClient,e);return a=ee("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=UN(this.apiClient,h),g=new E_;return Object.assign(g,m),g})}else{const c=uN(this.apiClient,e);return a=ee("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=bN(this.apiClient,h),g=new E_;return Object.assign(g,m),g})}}}function R_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(n){return this instanceof Me?(this.v=n,this):new Me(n)}function Ys(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(T){return Promise.resolve(T).then(v,m)}}function a(v,T){r[v]&&(i[v]=function(k){return new Promise(function(N,S){o.push([v,k,N,S])>1||l(v,k)})},T&&(i[v]=T(i[v])))}function l(v,T){try{c(r[v](T))}catch(k){g(o[0][3],k)}}function c(v){v.value instanceof Me?Promise.resolve(v.value.v).then(h,m):g(o[0][2],v)}function h(v){l("next",v)}function m(v){l("throw",v)}function g(v,T){v(T),o.shift(),o.length&&l(o[0][0],o[0][1])}}function iu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R_=="function"?R_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:q0(t)}function q0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function $N(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function P_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let o=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),o&&!q0(n[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class zN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new qN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qN{constructor(e,t,r,i={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),$N(o)}async sendMessage(e){var t;await this.sendPromise;const r=Dt(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];h!=null&&(g=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(r,v,g)})(),await this.sendPromise,i}async sendMessageStream(e){var t;await this.sendPromise;const r=Dt(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const t=e?P_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,i;return Ys(this,arguments,function*(){var s,a,l,c;const h=[];try{for(var m=!0,g=iu(e),v;v=yield Me(g.next()),s=v.done,!s;m=!0){c=v.value,m=!1;const T=c;if(BN(T)){const k=(i=(r=T.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;k!==void 0&&h.push(k)}yield yield Me(T)}}catch(T){a={error:T}}finally{try{!m&&!s&&(l=g.return)&&(yield Me(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(t,h)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(o=>o.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...P_(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GN(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),r}function HN(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],GN(n,r,t)),t}function WN(n,e){const t={},r=u(e,["details"]);r!=null&&f(t,["details"],r);const i=u(e,["message"]);i!=null&&f(t,["message"],i);const o=u(e,["code"]);return o!=null&&f(t,["code"],o),t}function KN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["mimeType"]);o!=null&&f(t,["mimeType"],o);const s=u(e,["sizeBytes"]);s!=null&&f(t,["sizeBytes"],s);const a=u(e,["createTime"]);a!=null&&f(t,["createTime"],a);const l=u(e,["expirationTime"]);l!=null&&f(t,["expirationTime"],l);const c=u(e,["updateTime"]);c!=null&&f(t,["updateTime"],c);const h=u(e,["sha256Hash"]);h!=null&&f(t,["sha256Hash"],h);const m=u(e,["uri"]);m!=null&&f(t,["uri"],m);const g=u(e,["downloadUri"]);g!=null&&f(t,["downloadUri"],g);const v=u(e,["state"]);v!=null&&f(t,["state"],v);const T=u(e,["source"]);T!=null&&f(t,["source"],T);const k=u(e,["videoMetadata"]);k!=null&&f(t,["videoMetadata"],k);const N=u(e,["error"]);return N!=null&&f(t,["error"],WN(n,N)),t}function JN(n,e){const t={},r=u(e,["file"]);r!=null&&f(t,["file"],KN(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function YN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","file"],B0(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function QN(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","file"],B0(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function XN(n,e){const t={},r=u(e,["details"]);r!=null&&f(t,["details"],r);const i=u(e,["message"]);i!=null&&f(t,["message"],i);const o=u(e,["code"]);return o!=null&&f(t,["code"],o),t}function Ch(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["mimeType"]);o!=null&&f(t,["mimeType"],o);const s=u(e,["sizeBytes"]);s!=null&&f(t,["sizeBytes"],s);const a=u(e,["createTime"]);a!=null&&f(t,["createTime"],a);const l=u(e,["expirationTime"]);l!=null&&f(t,["expirationTime"],l);const c=u(e,["updateTime"]);c!=null&&f(t,["updateTime"],c);const h=u(e,["sha256Hash"]);h!=null&&f(t,["sha256Hash"],h);const m=u(e,["uri"]);m!=null&&f(t,["uri"],m);const g=u(e,["downloadUri"]);g!=null&&f(t,["downloadUri"],g);const v=u(e,["state"]);v!=null&&f(t,["state"],v);const T=u(e,["source"]);T!=null&&f(t,["source"],T);const k=u(e,["videoMetadata"]);k!=null&&f(t,["videoMetadata"],k);const N=u(e,["error"]);return N!=null&&f(t,["error"],XN(n,N)),t}function ZN(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ch(n,s))),f(t,["files"],o)}return t}function jN(){return{}}function eM(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tM extends Ba{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xc(bo.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Ch(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HN(this.apiClient,e);return o=ee("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=ZN(this.apiClient,l),h=new Rx;return Object.assign(h,c),h})}}async createInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=JN(this.apiClient,e);return o=ee("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(()=>{const l=jN(),c=new Px;return Object.assign(c,l),c})}}async get(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YN(this.apiClient,e);return o=ee("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Ch(this.apiClient,l))}}async delete(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=QN(this.apiClient,e);return o=ee("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(()=>{const l=eM(),c=new kx;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(n,e){const t={},r=u(e,["voiceName"]);return r!=null&&f(t,["voiceName"],r),t}function rM(n,e){const t={},r=u(e,["voiceName"]);return r!=null&&f(t,["voiceName"],r),t}function G0(n,e){const t={},r=u(e,["prebuiltVoiceConfig"]);return r!=null&&f(t,["prebuiltVoiceConfig"],nM(n,r)),t}function iM(n,e){const t={},r=u(e,["prebuiltVoiceConfig"]);return r!=null&&f(t,["prebuiltVoiceConfig"],rM(n,r)),t}function oM(n,e){const t={},r=u(e,["speaker"]);r!=null&&f(t,["speaker"],r);const i=u(e,["voiceConfig"]);return i!=null&&f(t,["voiceConfig"],G0(n,i)),t}function sM(n,e){const t={},r=u(e,["speakerVoiceConfigs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>oM(n,o))),f(t,["speakerVoiceConfigs"],i)}return t}function aM(n,e){const t={},r=u(e,["voiceConfig"]);r!=null&&f(t,["voiceConfig"],G0(n,r));const i=u(e,["multiSpeakerVoiceConfig"]);i!=null&&f(t,["multiSpeakerVoiceConfig"],sM(n,i));const o=u(e,["languageCode"]);return o!=null&&f(t,["languageCode"],o),t}function lM(n,e){const t={},r=u(e,["voiceConfig"]);if(r!=null&&f(t,["voiceConfig"],iM(n,r)),u(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(e,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function uM(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function cM(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function dM(n,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(e,["data"]);r!=null&&f(t,["data"],r);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function fM(n,e){const t={},r=u(e,["displayName"]);r!=null&&f(t,["displayName"],r);const i=u(e,["data"]);i!=null&&f(t,["data"],i);const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function hM(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],uM(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],dM(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function pM(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],cM(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],fM(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function mM(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>hM(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function gM(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>pM(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function yM(n,e){const t={},r=u(e,["behavior"]);r!=null&&f(t,["behavior"],r);const i=u(e,["description"]);i!=null&&f(t,["description"],i);const o=u(e,["name"]);o!=null&&f(t,["name"],o);const s=u(e,["parameters"]);s!=null&&f(t,["parameters"],s);const a=u(e,["response"]);return a!=null&&f(t,["response"],a),t}function vM(n,e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=u(e,["description"]);r!=null&&f(t,["description"],r);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);const s=u(e,["response"]);return s!=null&&f(t,["response"],s),t}function _M(n,e){const t={},r=u(e,["startTime"]);r!=null&&f(t,["startTime"],r);const i=u(e,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function EM(n,e){const t={},r=u(e,["startTime"]);r!=null&&f(t,["startTime"],r);const i=u(e,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function TM(n,e){const t={},r=u(e,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],_M(n,r)),t}function wM(n,e){const t={},r=u(e,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],EM(n,r)),t}function CM(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function IM(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function SM(n,e){const t={},r=u(e,["dynamicRetrievalConfig"]);return r!=null&&f(t,["dynamicRetrievalConfig"],CM(n,r)),t}function AM(n,e){const t={},r=u(e,["dynamicRetrievalConfig"]);return r!=null&&f(t,["dynamicRetrievalConfig"],IM(n,r)),t}function RM(){return{}}function PM(n,e){const t={},r=u(e,["apiKeyString"]);return r!=null&&f(t,["apiKeyString"],r),t}function kM(n,e){const t={},r=u(e,["apiKeyConfig"]);r!=null&&f(t,["apiKeyConfig"],PM(n,r));const i=u(e,["authType"]);i!=null&&f(t,["authType"],i);const o=u(e,["googleServiceAccountConfig"]);o!=null&&f(t,["googleServiceAccountConfig"],o);const s=u(e,["httpBasicAuthConfig"]);s!=null&&f(t,["httpBasicAuthConfig"],s);const a=u(e,["oauthConfig"]);a!=null&&f(t,["oauthConfig"],a);const l=u(e,["oidcConfig"]);return l!=null&&f(t,["oidcConfig"],l),t}function xM(n,e){const t={},r=u(e,["authConfig"]);return r!=null&&f(t,["authConfig"],kM(n,r)),t}function NM(){return{}}function MM(n,e){const t={},r=u(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>yM(n,c))),f(t,["functionDeclarations"],l)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearch"]);i!=null&&f(t,["googleSearch"],TM(n,i));const o=u(e,["googleSearchRetrieval"]);if(o!=null&&f(t,["googleSearchRetrieval"],SM(n,o)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&f(t,["urlContext"],NM());const a=u(e,["codeExecution"]);return a!=null&&f(t,["codeExecution"],a),t}function DM(n,e){const t={},r=u(e,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>vM(n,m))),f(t,["functionDeclarations"],h)}const i=u(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=u(e,["googleSearch"]);o!=null&&f(t,["googleSearch"],wM(n,o));const s=u(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],AM(n,s)),u(e,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],RM());const l=u(e,["googleMaps"]);if(l!=null&&f(t,["googleMaps"],xM(n,l)),u(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=u(e,["codeExecution"]);return c!=null&&f(t,["codeExecution"],c),t}function VM(n,e){const t={},r=u(e,["handle"]);if(r!=null&&f(t,["handle"],r),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function LM(n,e){const t={},r=u(e,["handle"]);r!=null&&f(t,["handle"],r);const i=u(e,["transparent"]);return i!=null&&f(t,["transparent"],i),t}function k_(){return{}}function x_(){return{}}function bM(n,e){const t={},r=u(e,["disabled"]);r!=null&&f(t,["disabled"],r);const i=u(e,["startOfSpeechSensitivity"]);i!=null&&f(t,["startOfSpeechSensitivity"],i);const o=u(e,["endOfSpeechSensitivity"]);o!=null&&f(t,["endOfSpeechSensitivity"],o);const s=u(e,["prefixPaddingMs"]);s!=null&&f(t,["prefixPaddingMs"],s);const a=u(e,["silenceDurationMs"]);return a!=null&&f(t,["silenceDurationMs"],a),t}function OM(n,e){const t={},r=u(e,["disabled"]);r!=null&&f(t,["disabled"],r);const i=u(e,["startOfSpeechSensitivity"]);i!=null&&f(t,["startOfSpeechSensitivity"],i);const o=u(e,["endOfSpeechSensitivity"]);o!=null&&f(t,["endOfSpeechSensitivity"],o);const s=u(e,["prefixPaddingMs"]);s!=null&&f(t,["prefixPaddingMs"],s);const a=u(e,["silenceDurationMs"]);return a!=null&&f(t,["silenceDurationMs"],a),t}function UM(n,e){const t={},r=u(e,["automaticActivityDetection"]);r!=null&&f(t,["automaticActivityDetection"],bM(n,r));const i=u(e,["activityHandling"]);i!=null&&f(t,["activityHandling"],i);const o=u(e,["turnCoverage"]);return o!=null&&f(t,["turnCoverage"],o),t}function FM(n,e){const t={},r=u(e,["automaticActivityDetection"]);r!=null&&f(t,["automaticActivityDetection"],OM(n,r));const i=u(e,["activityHandling"]);i!=null&&f(t,["activityHandling"],i);const o=u(e,["turnCoverage"]);return o!=null&&f(t,["turnCoverage"],o),t}function BM(n,e){const t={},r=u(e,["targetTokens"]);return r!=null&&f(t,["targetTokens"],r),t}function $M(n,e){const t={},r=u(e,["targetTokens"]);return r!=null&&f(t,["targetTokens"],r),t}function zM(n,e){const t={},r=u(e,["triggerTokens"]);r!=null&&f(t,["triggerTokens"],r);const i=u(e,["slidingWindow"]);return i!=null&&f(t,["slidingWindow"],BM(n,i)),t}function qM(n,e){const t={},r=u(e,["triggerTokens"]);r!=null&&f(t,["triggerTokens"],r);const i=u(e,["slidingWindow"]);return i!=null&&f(t,["slidingWindow"],$M(n,i)),t}function GM(n,e){const t={},r=u(e,["proactiveAudio"]);return r!=null&&f(t,["proactiveAudio"],r),t}function HM(n,e){const t={},r=u(e,["proactiveAudio"]);return r!=null&&f(t,["proactiveAudio"],r),t}function WM(n,e,t){const r={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const s=u(e,["temperature"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","temperature"],s);const a=u(e,["topP"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topP"],a);const l=u(e,["topK"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topK"],l);const c=u(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const h=u(e,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const m=u(e,["seed"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","seed"],m);const g=u(e,["speechConfig"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","speechConfig"],aM(n,U0(n,g)));const v=u(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],v);const T=u(e,["systemInstruction"]);t!==void 0&&T!=null&&f(t,["setup","systemInstruction"],mM(n,Dt(n,T)));const k=u(e,["tools"]);if(t!==void 0&&k!=null){let U=kc(n,k);Array.isArray(U)&&(U=U.map(P=>MM(n,Pc(n,P)))),f(t,["setup","tools"],U)}const N=u(e,["sessionResumption"]);t!==void 0&&N!=null&&f(t,["setup","sessionResumption"],VM(n,N));const S=u(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&f(t,["setup","inputAudioTranscription"],k_());const C=u(e,["outputAudioTranscription"]);t!==void 0&&C!=null&&f(t,["setup","outputAudioTranscription"],k_());const R=u(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&f(t,["setup","realtimeInputConfig"],UM(n,R));const D=u(e,["contextWindowCompression"]);t!==void 0&&D!=null&&f(t,["setup","contextWindowCompression"],zM(n,D));const O=u(e,["proactivity"]);return t!==void 0&&O!=null&&f(t,["setup","proactivity"],GM(n,O)),r}function KM(n,e,t){const r={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const s=u(e,["temperature"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","temperature"],s);const a=u(e,["topP"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topP"],a);const l=u(e,["topK"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topK"],l);const c=u(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const h=u(e,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const m=u(e,["seed"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","seed"],m);const g=u(e,["speechConfig"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","speechConfig"],lM(n,U0(n,g)));const v=u(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],v);const T=u(e,["systemInstruction"]);t!==void 0&&T!=null&&f(t,["setup","systemInstruction"],gM(n,Dt(n,T)));const k=u(e,["tools"]);if(t!==void 0&&k!=null){let U=kc(n,k);Array.isArray(U)&&(U=U.map(P=>DM(n,Pc(n,P)))),f(t,["setup","tools"],U)}const N=u(e,["sessionResumption"]);t!==void 0&&N!=null&&f(t,["setup","sessionResumption"],LM(n,N));const S=u(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&f(t,["setup","inputAudioTranscription"],x_());const C=u(e,["outputAudioTranscription"]);t!==void 0&&C!=null&&f(t,["setup","outputAudioTranscription"],x_());const R=u(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&f(t,["setup","realtimeInputConfig"],FM(n,R));const D=u(e,["contextWindowCompression"]);t!==void 0&&D!=null&&f(t,["setup","contextWindowCompression"],qM(n,D));const O=u(e,["proactivity"]);return t!==void 0&&O!=null&&f(t,["setup","proactivity"],HM(n,O)),r}function JM(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["setup","model"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],WM(n,i,t)),t}function YM(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["setup","model"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],KM(n,i,t)),t}function QM(){return{}}function XM(){return{}}function ZM(){return{}}function jM(){return{}}function eD(n,e){const t={},r=u(e,["media"]);r!=null&&f(t,["mediaChunks"],V0(n,r));const i=u(e,["audio"]);i!=null&&f(t,["audio"],Dx(n,i));const o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);const s=u(e,["video"]);s!=null&&f(t,["video"],Mx(n,s));const a=u(e,["text"]);return a!=null&&f(t,["text"],a),u(e,["activityStart"])!=null&&f(t,["activityStart"],QM()),u(e,["activityEnd"])!=null&&f(t,["activityEnd"],ZM()),t}function tD(n,e){const t={},r=u(e,["media"]);if(r!=null&&f(t,["mediaChunks"],V0(n,r)),u(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=u(e,["audioStreamEnd"]);if(i!=null&&f(t,["audioStreamEnd"],i),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(u(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return u(e,["activityStart"])!=null&&f(t,["activityStart"],XM()),u(e,["activityEnd"])!=null&&f(t,["activityEnd"],jM()),t}function H0(n,e){const t={},r=u(e,["text"]);r!=null&&f(t,["text"],r);const i=u(e,["weight"]);return i!=null&&f(t,["weight"],i),t}function nD(n,e){const t={},r=u(e,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>H0(n,o))),f(t,["weightedPrompts"],i)}return t}function W0(n,e){const t={},r=u(e,["temperature"]);r!=null&&f(t,["temperature"],r);const i=u(e,["topK"]);i!=null&&f(t,["topK"],i);const o=u(e,["seed"]);o!=null&&f(t,["seed"],o);const s=u(e,["guidance"]);s!=null&&f(t,["guidance"],s);const a=u(e,["bpm"]);a!=null&&f(t,["bpm"],a);const l=u(e,["density"]);l!=null&&f(t,["density"],l);const c=u(e,["brightness"]);c!=null&&f(t,["brightness"],c);const h=u(e,["scale"]);h!=null&&f(t,["scale"],h);const m=u(e,["muteBass"]);m!=null&&f(t,["muteBass"],m);const g=u(e,["muteDrums"]);g!=null&&f(t,["muteDrums"],g);const v=u(e,["onlyBassAndDrums"]);v!=null&&f(t,["onlyBassAndDrums"],v);const T=u(e,["musicGenerationMode"]);return T!=null&&f(t,["musicGenerationMode"],T),t}function rD(n,e){const t={},r=u(e,["musicGenerationConfig"]);return r!=null&&f(t,["musicGenerationConfig"],W0(n,r)),t}function K0(n,e){const t={},r=u(e,["model"]);return r!=null&&f(t,["model"],r),t}function J0(n,e){const t={},r=u(e,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>H0(n,o))),f(t,["weightedPrompts"],i)}return t}function Ih(n,e){const t={},r=u(e,["setup"]);r!=null&&f(t,["setup"],K0(n,r));const i=u(e,["clientContent"]);i!=null&&f(t,["clientContent"],J0(n,i));const o=u(e,["musicGenerationConfig"]);o!=null&&f(t,["musicGenerationConfig"],W0(n,o));const s=u(e,["playbackControl"]);return s!=null&&f(t,["playbackControl"],s),t}function iD(){return{}}function oD(){return{}}function sD(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function aD(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function lD(n,e){const t={},r=u(e,["data"]);r!=null&&f(t,["data"],r);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function uD(n,e){const t={},r=u(e,["displayName"]);r!=null&&f(t,["displayName"],r);const i=u(e,["data"]);i!=null&&f(t,["data"],i);const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function cD(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],sD(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],lD(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function dD(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],aD(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],uD(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function fD(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>cD(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function hD(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>dD(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function N_(n,e){const t={},r=u(e,["text"]);r!=null&&f(t,["text"],r);const i=u(e,["finished"]);return i!=null&&f(t,["finished"],i),t}function M_(n,e){const t={},r=u(e,["text"]);r!=null&&f(t,["text"],r);const i=u(e,["finished"]);return i!=null&&f(t,["finished"],i),t}function pD(n,e){const t={},r=u(e,["retrievedUrl"]);r!=null&&f(t,["retrievedUrl"],r);const i=u(e,["urlRetrievalStatus"]);return i!=null&&f(t,["urlRetrievalStatus"],i),t}function mD(n,e){const t={},r=u(e,["urlMetadata"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>pD(n,o))),f(t,["urlMetadata"],i)}return t}function gD(n,e){const t={},r=u(e,["modelTurn"]);r!=null&&f(t,["modelTurn"],fD(n,r));const i=u(e,["turnComplete"]);i!=null&&f(t,["turnComplete"],i);const o=u(e,["interrupted"]);o!=null&&f(t,["interrupted"],o);const s=u(e,["groundingMetadata"]);s!=null&&f(t,["groundingMetadata"],s);const a=u(e,["generationComplete"]);a!=null&&f(t,["generationComplete"],a);const l=u(e,["inputTranscription"]);l!=null&&f(t,["inputTranscription"],N_(n,l));const c=u(e,["outputTranscription"]);c!=null&&f(t,["outputTranscription"],N_(n,c));const h=u(e,["urlContextMetadata"]);return h!=null&&f(t,["urlContextMetadata"],mD(n,h)),t}function yD(n,e){const t={},r=u(e,["modelTurn"]);r!=null&&f(t,["modelTurn"],hD(n,r));const i=u(e,["turnComplete"]);i!=null&&f(t,["turnComplete"],i);const o=u(e,["interrupted"]);o!=null&&f(t,["interrupted"],o);const s=u(e,["groundingMetadata"]);s!=null&&f(t,["groundingMetadata"],s);const a=u(e,["generationComplete"]);a!=null&&f(t,["generationComplete"],a);const l=u(e,["inputTranscription"]);l!=null&&f(t,["inputTranscription"],M_(n,l));const c=u(e,["outputTranscription"]);return c!=null&&f(t,["outputTranscription"],M_(n,c)),t}function vD(n,e){const t={},r=u(e,["id"]);r!=null&&f(t,["id"],r);const i=u(e,["args"]);i!=null&&f(t,["args"],i);const o=u(e,["name"]);return o!=null&&f(t,["name"],o),t}function _D(n,e){const t={},r=u(e,["args"]);r!=null&&f(t,["args"],r);const i=u(e,["name"]);return i!=null&&f(t,["name"],i),t}function ED(n,e){const t={},r=u(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>vD(n,o))),f(t,["functionCalls"],i)}return t}function TD(n,e){const t={},r=u(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>_D(n,o))),f(t,["functionCalls"],i)}return t}function wD(n,e){const t={},r=u(e,["ids"]);return r!=null&&f(t,["ids"],r),t}function CD(n,e){const t={},r=u(e,["ids"]);return r!=null&&f(t,["ids"],r),t}function Vl(n,e){const t={},r=u(e,["modality"]);r!=null&&f(t,["modality"],r);const i=u(e,["tokenCount"]);return i!=null&&f(t,["tokenCount"],i),t}function Ll(n,e){const t={},r=u(e,["modality"]);r!=null&&f(t,["modality"],r);const i=u(e,["tokenCount"]);return i!=null&&f(t,["tokenCount"],i),t}function ID(n,e){const t={},r=u(e,["promptTokenCount"]);r!=null&&f(t,["promptTokenCount"],r);const i=u(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);const o=u(e,["responseTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);const s=u(e,["toolUsePromptTokenCount"]);s!=null&&f(t,["toolUsePromptTokenCount"],s);const a=u(e,["thoughtsTokenCount"]);a!=null&&f(t,["thoughtsTokenCount"],a);const l=u(e,["totalTokenCount"]);l!=null&&f(t,["totalTokenCount"],l);const c=u(e,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(T=>Vl(n,T))),f(t,["promptTokensDetails"],v)}const h=u(e,["cacheTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(T=>Vl(n,T))),f(t,["cacheTokensDetails"],v)}const m=u(e,["responseTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(T=>Vl(n,T))),f(t,["responseTokensDetails"],v)}const g=u(e,["toolUsePromptTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>Vl(n,T))),f(t,["toolUsePromptTokensDetails"],v)}return t}function SD(n,e){const t={},r=u(e,["promptTokenCount"]);r!=null&&f(t,["promptTokenCount"],r);const i=u(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);const o=u(e,["candidatesTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);const s=u(e,["toolUsePromptTokenCount"]);s!=null&&f(t,["toolUsePromptTokenCount"],s);const a=u(e,["thoughtsTokenCount"]);a!=null&&f(t,["thoughtsTokenCount"],a);const l=u(e,["totalTokenCount"]);l!=null&&f(t,["totalTokenCount"],l);const c=u(e,["promptTokensDetails"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(k=>Ll(n,k))),f(t,["promptTokensDetails"],T)}const h=u(e,["cacheTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(k=>Ll(n,k))),f(t,["cacheTokensDetails"],T)}const m=u(e,["candidatesTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(k=>Ll(n,k))),f(t,["responseTokensDetails"],T)}const g=u(e,["toolUsePromptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(k=>Ll(n,k))),f(t,["toolUsePromptTokensDetails"],T)}const v=u(e,["trafficType"]);return v!=null&&f(t,["trafficType"],v),t}function AD(n,e){const t={},r=u(e,["timeLeft"]);return r!=null&&f(t,["timeLeft"],r),t}function RD(n,e){const t={},r=u(e,["timeLeft"]);return r!=null&&f(t,["timeLeft"],r),t}function PD(n,e){const t={},r=u(e,["newHandle"]);r!=null&&f(t,["newHandle"],r);const i=u(e,["resumable"]);i!=null&&f(t,["resumable"],i);const o=u(e,["lastConsumedClientMessageIndex"]);return o!=null&&f(t,["lastConsumedClientMessageIndex"],o),t}function kD(n,e){const t={},r=u(e,["newHandle"]);r!=null&&f(t,["newHandle"],r);const i=u(e,["resumable"]);i!=null&&f(t,["resumable"],i);const o=u(e,["lastConsumedClientMessageIndex"]);return o!=null&&f(t,["lastConsumedClientMessageIndex"],o),t}function xD(n,e){const t={};u(e,["setupComplete"])!=null&&f(t,["setupComplete"],iD());const i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],gD(n,i));const o=u(e,["toolCall"]);o!=null&&f(t,["toolCall"],ED(n,o));const s=u(e,["toolCallCancellation"]);s!=null&&f(t,["toolCallCancellation"],wD(n,s));const a=u(e,["usageMetadata"]);a!=null&&f(t,["usageMetadata"],ID(n,a));const l=u(e,["goAway"]);l!=null&&f(t,["goAway"],AD(n,l));const c=u(e,["sessionResumptionUpdate"]);return c!=null&&f(t,["sessionResumptionUpdate"],PD(n,c)),t}function ND(n,e){const t={};u(e,["setupComplete"])!=null&&f(t,["setupComplete"],oD());const i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],yD(n,i));const o=u(e,["toolCall"]);o!=null&&f(t,["toolCall"],TD(n,o));const s=u(e,["toolCallCancellation"]);s!=null&&f(t,["toolCallCancellation"],CD(n,s));const a=u(e,["usageMetadata"]);a!=null&&f(t,["usageMetadata"],SD(n,a));const l=u(e,["goAway"]);l!=null&&f(t,["goAway"],RD(n,l));const c=u(e,["sessionResumptionUpdate"]);return c!=null&&f(t,["sessionResumptionUpdate"],kD(n,c)),t}function MD(){return{}}function DD(n,e){const t={},r=u(e,["text"]);r!=null&&f(t,["text"],r);const i=u(e,["weight"]);return i!=null&&f(t,["weight"],i),t}function VD(n,e){const t={},r=u(e,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>DD(n,o))),f(t,["weightedPrompts"],i)}return t}function LD(n,e){const t={},r=u(e,["temperature"]);r!=null&&f(t,["temperature"],r);const i=u(e,["topK"]);i!=null&&f(t,["topK"],i);const o=u(e,["seed"]);o!=null&&f(t,["seed"],o);const s=u(e,["guidance"]);s!=null&&f(t,["guidance"],s);const a=u(e,["bpm"]);a!=null&&f(t,["bpm"],a);const l=u(e,["density"]);l!=null&&f(t,["density"],l);const c=u(e,["brightness"]);c!=null&&f(t,["brightness"],c);const h=u(e,["scale"]);h!=null&&f(t,["scale"],h);const m=u(e,["muteBass"]);m!=null&&f(t,["muteBass"],m);const g=u(e,["muteDrums"]);g!=null&&f(t,["muteDrums"],g);const v=u(e,["onlyBassAndDrums"]);v!=null&&f(t,["onlyBassAndDrums"],v);const T=u(e,["musicGenerationMode"]);return T!=null&&f(t,["musicGenerationMode"],T),t}function bD(n,e){const t={},r=u(e,["clientContent"]);r!=null&&f(t,["clientContent"],VD(n,r));const i=u(e,["musicGenerationConfig"]);return i!=null&&f(t,["musicGenerationConfig"],LD(n,i)),t}function OD(n,e){const t={},r=u(e,["data"]);r!=null&&f(t,["data"],r);const i=u(e,["mimeType"]);i!=null&&f(t,["mimeType"],i);const o=u(e,["sourceMetadata"]);return o!=null&&f(t,["sourceMetadata"],bD(n,o)),t}function UD(n,e){const t={},r=u(e,["audioChunks"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>OD(n,o))),f(t,["audioChunks"],i)}return t}function FD(n,e){const t={},r=u(e,["text"]);r!=null&&f(t,["text"],r);const i=u(e,["filteredReason"]);return i!=null&&f(t,["filteredReason"],i),t}function BD(n,e){const t={};u(e,["setupComplete"])!=null&&f(t,["setupComplete"],MD());const i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],UD(n,i));const o=u(e,["filteredPrompt"]);return o!=null&&f(t,["filteredPrompt"],FD(n,o)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $D(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function zD(n,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(e,["data"]);r!=null&&f(t,["data"],r);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function qD(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],$D(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],zD(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function Nc(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>qD(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function GD(n,e){const t={};if(u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(e,["category"]);r!=null&&f(t,["category"],r);const i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function HD(n,e){const t={},r=u(e,["behavior"]);r!=null&&f(t,["behavior"],r);const i=u(e,["description"]);i!=null&&f(t,["description"],i);const o=u(e,["name"]);o!=null&&f(t,["name"],o);const s=u(e,["parameters"]);s!=null&&f(t,["parameters"],s);const a=u(e,["response"]);return a!=null&&f(t,["response"],a),t}function WD(n,e){const t={},r=u(e,["startTime"]);r!=null&&f(t,["startTime"],r);const i=u(e,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function KD(n,e){const t={},r=u(e,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],WD(n,r)),t}function JD(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function YD(n,e){const t={},r=u(e,["dynamicRetrievalConfig"]);return r!=null&&f(t,["dynamicRetrievalConfig"],JD(n,r)),t}function QD(){return{}}function XD(n,e){const t={},r=u(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>HD(n,c))),f(t,["functionDeclarations"],l)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearch"]);i!=null&&f(t,["googleSearch"],KD(n,i));const o=u(e,["googleSearchRetrieval"]);if(o!=null&&f(t,["googleSearchRetrieval"],YD(n,o)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&f(t,["urlContext"],QD());const a=u(e,["codeExecution"]);return a!=null&&f(t,["codeExecution"],a),t}function ZD(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function jD(n,e){const t={},r=u(e,["latitude"]);r!=null&&f(t,["latitude"],r);const i=u(e,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function e1(n,e){const t={},r=u(e,["latLng"]);return r!=null&&f(t,["latLng"],jD(n,r)),t}function t1(n,e){const t={},r=u(e,["functionCallingConfig"]);r!=null&&f(t,["functionCallingConfig"],ZD(n,r));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],e1(n,i)),t}function n1(n,e){const t={},r=u(e,["voiceName"]);return r!=null&&f(t,["voiceName"],r),t}function Y0(n,e){const t={},r=u(e,["prebuiltVoiceConfig"]);return r!=null&&f(t,["prebuiltVoiceConfig"],n1(n,r)),t}function r1(n,e){const t={},r=u(e,["speaker"]);r!=null&&f(t,["speaker"],r);const i=u(e,["voiceConfig"]);return i!=null&&f(t,["voiceConfig"],Y0(n,i)),t}function i1(n,e){const t={},r=u(e,["speakerVoiceConfigs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>r1(n,o))),f(t,["speakerVoiceConfigs"],i)}return t}function o1(n,e){const t={},r=u(e,["voiceConfig"]);r!=null&&f(t,["voiceConfig"],Y0(n,r));const i=u(e,["multiSpeakerVoiceConfig"]);i!=null&&f(t,["multiSpeakerVoiceConfig"],i1(n,i));const o=u(e,["languageCode"]);return o!=null&&f(t,["languageCode"],o),t}function s1(n,e){const t={},r=u(e,["includeThoughts"]);r!=null&&f(t,["includeThoughts"],r);const i=u(e,["thinkingBudget"]);return i!=null&&f(t,["thinkingBudget"],i),t}function a1(n,e,t){const r={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Nc(n,Dt(n,i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const g=u(e,["logprobs"]);g!=null&&f(r,["logprobs"],g);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const T=u(e,["frequencyPenalty"]);T!=null&&f(r,["frequencyPenalty"],T);const k=u(e,["seed"]);k!=null&&f(r,["seed"],k);const N=u(e,["responseMimeType"]);N!=null&&f(r,["responseMimeType"],N);const S=u(e,["responseSchema"]);if(S!=null&&f(r,["responseSchema"],Ju(n,S)),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=u(e,["safetySettings"]);if(t!==void 0&&C!=null){let A=C;Array.isArray(A)&&(A=A.map(M=>GD(n,M))),f(t,["safetySettings"],A)}const R=u(e,["tools"]);if(t!==void 0&&R!=null){let A=kc(n,R);Array.isArray(A)&&(A=A.map(M=>XD(n,Pc(n,M)))),f(t,["tools"],A)}const D=u(e,["toolConfig"]);if(t!==void 0&&D!=null&&f(t,["toolConfig"],t1(n,D)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=u(e,["cachedContent"]);t!==void 0&&O!=null&&f(t,["cachedContent"],Zr(n,O));const U=u(e,["responseModalities"]);U!=null&&f(r,["responseModalities"],U);const P=u(e,["mediaResolution"]);P!=null&&f(r,["mediaResolution"],P);const E=u(e,["speechConfig"]);if(E!=null&&f(r,["speechConfig"],o1(n,O0(n,E))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=u(e,["thinkingConfig"]);return w!=null&&f(r,["thinkingConfig"],s1(n,w)),r}function D_(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);if(i!=null){let s=hn(n,i);Array.isArray(s)&&(s=s.map(a=>Nc(n,a))),f(t,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(t,["generationConfig"],a1(n,o,t)),t}function l1(n,e,t){const r={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);const o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);const s=u(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&f(t,["requests[]","outputDimensionality"],s),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function u1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);i!=null&&f(t,["requests[]","content"],b0(n,i));const o=u(e,["config"]);o!=null&&f(t,["config"],l1(n,o,t));const s=u(e,["model"]);return s!==void 0&&f(t,["requests[]","model"],Re(n,s)),t}function c1(n,e,t){const r={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);const s=u(e,["guidanceScale"]);if(t!==void 0&&s!=null&&f(t,["parameters","guidanceScale"],s),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);const l=u(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);const c=u(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&f(t,["parameters","includeSafetyAttributes"],c);const h=u(e,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const m=u(e,["language"]);t!==void 0&&m!=null&&f(t,["parameters","language"],m);const g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);const v=u(e,["outputCompressionQuality"]);if(t!==void 0&&v!=null&&f(t,["parameters","outputOptions","compressionQuality"],v),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function d1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&f(t,["config"],c1(n,o,t)),t}function f1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","name"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function h1(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);const s=u(e,["filter"]);t!==void 0&&s!=null&&f(t,["_query","filter"],s);const a=u(e,["queryBase"]);return t!==void 0&&a!=null&&f(t,["_url","models_url"],$0(n,a)),r}function p1(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],h1(n,r,t)),t}function m1(n,e,t){const r={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const s=u(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&f(t,["defaultCheckpointId"],s),r}function g1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","name"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],m1(n,i,t)),t}function y1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","name"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function v1(n,e){const t={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function _1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);if(i!=null){let s=hn(n,i);Array.isArray(s)&&(s=s.map(a=>Nc(n,a))),f(t,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(t,["config"],v1(n,o)),t}function E1(n,e){const t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=u(e,["imageBytes"]);r!=null&&f(t,["bytesBase64Encoded"],jr(n,r));const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function T1(n,e,t){const r={},i=u(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=u(e,["durationSeconds"]);if(t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(e,["aspectRatio"]);if(t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s),u(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=u(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(e,["negativePrompt"]);if(t!==void 0&&l!=null&&f(t,["parameters","negativePrompt"],l),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function w1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(t,["instances[0]","image"],E1(n,o));const s=u(e,["config"]);return s!=null&&f(t,["config"],T1(n,s,t)),t}function C1(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function I1(n,e){const t={},r=u(e,["displayName"]);r!=null&&f(t,["displayName"],r);const i=u(e,["data"]);i!=null&&f(t,["data"],i);const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function S1(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],C1(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],I1(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function Yo(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>S1(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function A1(n,e){const t={},r=u(e,["featureSelectionPreference"]);return r!=null&&f(t,["featureSelectionPreference"],r),t}function R1(n,e){const t={},r=u(e,["method"]);r!=null&&f(t,["method"],r);const i=u(e,["category"]);i!=null&&f(t,["category"],i);const o=u(e,["threshold"]);return o!=null&&f(t,["threshold"],o),t}function P1(n,e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=u(e,["description"]);r!=null&&f(t,["description"],r);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);const s=u(e,["response"]);return s!=null&&f(t,["response"],s),t}function k1(n,e){const t={},r=u(e,["startTime"]);r!=null&&f(t,["startTime"],r);const i=u(e,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function x1(n,e){const t={},r=u(e,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],k1(n,r)),t}function N1(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function M1(n,e){const t={},r=u(e,["dynamicRetrievalConfig"]);return r!=null&&f(t,["dynamicRetrievalConfig"],N1(n,r)),t}function D1(){return{}}function V1(n,e){const t={},r=u(e,["apiKeyString"]);return r!=null&&f(t,["apiKeyString"],r),t}function L1(n,e){const t={},r=u(e,["apiKeyConfig"]);r!=null&&f(t,["apiKeyConfig"],V1(n,r));const i=u(e,["authType"]);i!=null&&f(t,["authType"],i);const o=u(e,["googleServiceAccountConfig"]);o!=null&&f(t,["googleServiceAccountConfig"],o);const s=u(e,["httpBasicAuthConfig"]);s!=null&&f(t,["httpBasicAuthConfig"],s);const a=u(e,["oauthConfig"]);a!=null&&f(t,["oauthConfig"],a);const l=u(e,["oidcConfig"]);return l!=null&&f(t,["oidcConfig"],l),t}function b1(n,e){const t={},r=u(e,["authConfig"]);return r!=null&&f(t,["authConfig"],L1(n,r)),t}function Q0(n,e){const t={},r=u(e,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>P1(n,m))),f(t,["functionDeclarations"],h)}const i=u(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=u(e,["googleSearch"]);o!=null&&f(t,["googleSearch"],x1(n,o));const s=u(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],M1(n,s)),u(e,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],D1());const l=u(e,["googleMaps"]);if(l!=null&&f(t,["googleMaps"],b1(n,l)),u(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=u(e,["codeExecution"]);return c!=null&&f(t,["codeExecution"],c),t}function O1(n,e){const t={},r=u(e,["mode"]);r!=null&&f(t,["mode"],r);const i=u(e,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function U1(n,e){const t={},r=u(e,["latitude"]);r!=null&&f(t,["latitude"],r);const i=u(e,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function F1(n,e){const t={},r=u(e,["latLng"]);return r!=null&&f(t,["latLng"],U1(n,r)),t}function B1(n,e){const t={},r=u(e,["functionCallingConfig"]);r!=null&&f(t,["functionCallingConfig"],O1(n,r));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],F1(n,i)),t}function $1(n,e){const t={},r=u(e,["voiceName"]);return r!=null&&f(t,["voiceName"],r),t}function z1(n,e){const t={},r=u(e,["prebuiltVoiceConfig"]);return r!=null&&f(t,["prebuiltVoiceConfig"],$1(n,r)),t}function q1(n,e){const t={},r=u(e,["voiceConfig"]);if(r!=null&&f(t,["voiceConfig"],z1(n,r)),u(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(e,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function G1(n,e){const t={},r=u(e,["includeThoughts"]);r!=null&&f(t,["includeThoughts"],r);const i=u(e,["thinkingBudget"]);return i!=null&&f(t,["thinkingBudget"],i),t}function H1(n,e,t){const r={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Yo(n,Dt(n,i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const g=u(e,["logprobs"]);g!=null&&f(r,["logprobs"],g);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const T=u(e,["frequencyPenalty"]);T!=null&&f(r,["frequencyPenalty"],T);const k=u(e,["seed"]);k!=null&&f(r,["seed"],k);const N=u(e,["responseMimeType"]);N!=null&&f(r,["responseMimeType"],N);const S=u(e,["responseSchema"]);S!=null&&f(r,["responseSchema"],Ju(n,S));const C=u(e,["routingConfig"]);C!=null&&f(r,["routingConfig"],C);const R=u(e,["modelSelectionConfig"]);R!=null&&f(r,["modelConfig"],A1(n,R));const D=u(e,["safetySettings"]);if(t!==void 0&&D!=null){let Oe=D;Array.isArray(Oe)&&(Oe=Oe.map(on=>R1(n,on))),f(t,["safetySettings"],Oe)}const O=u(e,["tools"]);if(t!==void 0&&O!=null){let Oe=kc(n,O);Array.isArray(Oe)&&(Oe=Oe.map(on=>Q0(n,Pc(n,on)))),f(t,["tools"],Oe)}const U=u(e,["toolConfig"]);t!==void 0&&U!=null&&f(t,["toolConfig"],B1(n,U));const P=u(e,["labels"]);t!==void 0&&P!=null&&f(t,["labels"],P);const E=u(e,["cachedContent"]);t!==void 0&&E!=null&&f(t,["cachedContent"],Zr(n,E));const w=u(e,["responseModalities"]);w!=null&&f(r,["responseModalities"],w);const A=u(e,["mediaResolution"]);A!=null&&f(r,["mediaResolution"],A);const M=u(e,["speechConfig"]);M!=null&&f(r,["speechConfig"],q1(n,O0(n,M)));const V=u(e,["audioTimestamp"]);V!=null&&f(r,["audioTimestamp"],V);const x=u(e,["thinkingConfig"]);return x!=null&&f(r,["thinkingConfig"],G1(n,x)),r}function V_(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);if(i!=null){let s=hn(n,i);Array.isArray(s)&&(s=s.map(a=>Yo(n,a))),f(t,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(t,["generationConfig"],H1(n,o,t)),t}function W1(n,e,t){const r={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);const o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["instances[]","title"],o);const s=u(e,["outputDimensionality"]);t!==void 0&&s!=null&&f(t,["parameters","outputDimensionality"],s);const a=u(e,["mimeType"]);t!==void 0&&a!=null&&f(t,["instances[]","mimeType"],a);const l=u(e,["autoTruncate"]);return t!==void 0&&l!=null&&f(t,["parameters","autoTruncate"],l),r}function K1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);i!=null&&f(t,["instances[]","content"],b0(n,i));const o=u(e,["config"]);return o!=null&&f(t,["config"],W1(n,o,t)),t}function J1(n,e,t){const r={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);const s=u(e,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const a=u(e,["aspectRatio"]);t!==void 0&&a!=null&&f(t,["parameters","aspectRatio"],a);const l=u(e,["guidanceScale"]);t!==void 0&&l!=null&&f(t,["parameters","guidanceScale"],l);const c=u(e,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const h=u(e,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const m=u(e,["personGeneration"]);t!==void 0&&m!=null&&f(t,["parameters","personGeneration"],m);const g=u(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&f(t,["parameters","includeSafetyAttributes"],g);const v=u(e,["includeRaiReason"]);t!==void 0&&v!=null&&f(t,["parameters","includeRaiReason"],v);const T=u(e,["language"]);t!==void 0&&T!=null&&f(t,["parameters","language"],T);const k=u(e,["outputMimeType"]);t!==void 0&&k!=null&&f(t,["parameters","outputOptions","mimeType"],k);const N=u(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&f(t,["parameters","outputOptions","compressionQuality"],N);const S=u(e,["addWatermark"]);t!==void 0&&S!=null&&f(t,["parameters","addWatermark"],S);const C=u(e,["enhancePrompt"]);return t!==void 0&&C!=null&&f(t,["parameters","enhancePrompt"],C),r}function Y1(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&f(t,["config"],J1(n,o,t)),t}function em(n,e){const t={},r=u(e,["gcsUri"]);r!=null&&f(t,["gcsUri"],r);const i=u(e,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],jr(n,i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Q1(n,e){const t={},r=u(e,["maskMode"]);r!=null&&f(t,["maskMode"],r);const i=u(e,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);const o=u(e,["maskDilation"]);return o!=null&&f(t,["dilation"],o),t}function X1(n,e){const t={},r=u(e,["controlType"]);r!=null&&f(t,["controlType"],r);const i=u(e,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function Z1(n,e){const t={},r=u(e,["styleDescription"]);return r!=null&&f(t,["styleDescription"],r),t}function j1(n,e){const t={},r=u(e,["subjectType"]);r!=null&&f(t,["subjectType"],r);const i=u(e,["subjectDescription"]);return i!=null&&f(t,["subjectDescription"],i),t}function eV(n,e){const t={},r=u(e,["referenceImage"]);r!=null&&f(t,["referenceImage"],em(n,r));const i=u(e,["referenceId"]);i!=null&&f(t,["referenceId"],i);const o=u(e,["referenceType"]);o!=null&&f(t,["referenceType"],o);const s=u(e,["maskImageConfig"]);s!=null&&f(t,["maskImageConfig"],Q1(n,s));const a=u(e,["controlImageConfig"]);a!=null&&f(t,["controlImageConfig"],X1(n,a));const l=u(e,["styleImageConfig"]);l!=null&&f(t,["styleImageConfig"],Z1(n,l));const c=u(e,["subjectImageConfig"]);return c!=null&&f(t,["subjectImageConfig"],j1(n,c)),t}function tV(n,e,t){const r={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);const s=u(e,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const a=u(e,["aspectRatio"]);t!==void 0&&a!=null&&f(t,["parameters","aspectRatio"],a);const l=u(e,["guidanceScale"]);t!==void 0&&l!=null&&f(t,["parameters","guidanceScale"],l);const c=u(e,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const h=u(e,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const m=u(e,["personGeneration"]);t!==void 0&&m!=null&&f(t,["parameters","personGeneration"],m);const g=u(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&f(t,["parameters","includeSafetyAttributes"],g);const v=u(e,["includeRaiReason"]);t!==void 0&&v!=null&&f(t,["parameters","includeRaiReason"],v);const T=u(e,["language"]);t!==void 0&&T!=null&&f(t,["parameters","language"],T);const k=u(e,["outputMimeType"]);t!==void 0&&k!=null&&f(t,["parameters","outputOptions","mimeType"],k);const N=u(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&f(t,["parameters","outputOptions","compressionQuality"],N);const S=u(e,["editMode"]);t!==void 0&&S!=null&&f(t,["parameters","editMode"],S);const C=u(e,["baseSteps"]);return t!==void 0&&C!=null&&f(t,["parameters","editConfig","baseSteps"],C),r}function nV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>eV(n,l))),f(t,["instances[0]","referenceImages"],a)}const s=u(e,["config"]);return s!=null&&f(t,["config"],tV(n,s,t)),t}function rV(n,e,t){const r={},i=u(e,["includeRaiReason"]);t!==void 0&&i!=null&&f(t,["parameters","includeRaiReason"],i);const o=u(e,["outputMimeType"]);t!==void 0&&o!=null&&f(t,["parameters","outputOptions","mimeType"],o);const s=u(e,["outputCompressionQuality"]);t!==void 0&&s!=null&&f(t,["parameters","outputOptions","compressionQuality"],s);const a=u(e,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const l=u(e,["mode"]);return t!==void 0&&l!=null&&f(t,["parameters","mode"],l),r}function iV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["image"]);i!=null&&f(t,["instances[0]","image"],em(n,i));const o=u(e,["upscaleFactor"]);o!=null&&f(t,["parameters","upscaleConfig","upscaleFactor"],o);const s=u(e,["config"]);return s!=null&&f(t,["config"],rV(n,s,t)),t}function oV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","name"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function sV(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);const s=u(e,["filter"]);t!==void 0&&s!=null&&f(t,["_query","filter"],s);const a=u(e,["queryBase"]);return t!==void 0&&a!=null&&f(t,["_url","models_url"],$0(n,a)),r}function aV(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],sV(n,r,t)),t}function lV(n,e,t){const r={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const s=u(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&f(t,["defaultCheckpointId"],s),r}function uV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],lV(n,i,t)),t}function cV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","name"],Re(n,r));const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function dV(n,e,t){const r={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Yo(n,Dt(n,i)));const o=u(e,["tools"]);if(t!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Q0(n,l))),f(t,["tools"],a)}const s=u(e,["generationConfig"]);return t!==void 0&&s!=null&&f(t,["generationConfig"],s),r}function fV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);if(i!=null){let s=hn(n,i);Array.isArray(s)&&(s=s.map(a=>Yo(n,a))),f(t,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(t,["config"],dV(n,o,t)),t}function hV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["contents"]);if(i!=null){let s=hn(n,i);Array.isArray(s)&&(s=s.map(a=>Yo(n,a))),f(t,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(t,["config"],o),t}function pV(n,e,t){const r={},i=u(e,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);const s=u(e,["fps"]);t!==void 0&&s!=null&&f(t,["parameters","fps"],s);const a=u(e,["durationSeconds"]);t!==void 0&&a!=null&&f(t,["parameters","durationSeconds"],a);const l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const c=u(e,["aspectRatio"]);t!==void 0&&c!=null&&f(t,["parameters","aspectRatio"],c);const h=u(e,["resolution"]);t!==void 0&&h!=null&&f(t,["parameters","resolution"],h);const m=u(e,["personGeneration"]);t!==void 0&&m!=null&&f(t,["parameters","personGeneration"],m);const g=u(e,["pubsubTopic"]);t!==void 0&&g!=null&&f(t,["parameters","pubsubTopic"],g);const v=u(e,["negativePrompt"]);t!==void 0&&v!=null&&f(t,["parameters","negativePrompt"],v);const T=u(e,["enhancePrompt"]);return t!==void 0&&T!=null&&f(t,["parameters","enhancePrompt"],T),r}function mV(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["_url","model"],Re(n,r));const i=u(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(t,["instances[0]","image"],em(n,o));const s=u(e,["config"]);return s!=null&&f(t,["config"],pV(n,s,t)),t}function gV(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function yV(n,e){const t={},r=u(e,["data"]);r!=null&&f(t,["data"],r);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function vV(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],gV(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],yV(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function _V(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>vV(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function EV(n,e){const t={},r=u(e,["citationSources"]);return r!=null&&f(t,["citations"],r),t}function TV(n,e){const t={},r=u(e,["retrievedUrl"]);r!=null&&f(t,["retrievedUrl"],r);const i=u(e,["urlRetrievalStatus"]);return i!=null&&f(t,["urlRetrievalStatus"],i),t}function wV(n,e){const t={},r=u(e,["urlMetadata"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>TV(n,o))),f(t,["urlMetadata"],i)}return t}function CV(n,e){const t={},r=u(e,["content"]);r!=null&&f(t,["content"],_V(n,r));const i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],EV(n,i));const o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);const s=u(e,["finishReason"]);s!=null&&f(t,["finishReason"],s);const a=u(e,["urlContextMetadata"]);a!=null&&f(t,["urlContextMetadata"],wV(n,a));const l=u(e,["avgLogprobs"]);l!=null&&f(t,["avgLogprobs"],l);const c=u(e,["groundingMetadata"]);c!=null&&f(t,["groundingMetadata"],c);const h=u(e,["index"]);h!=null&&f(t,["index"],h);const m=u(e,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const g=u(e,["safetyRatings"]);return g!=null&&f(t,["safetyRatings"],g),t}function L_(n,e){const t={},r=u(e,["candidates"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>CV(n,l))),f(t,["candidates"],a)}const i=u(e,["modelVersion"]);i!=null&&f(t,["modelVersion"],i);const o=u(e,["promptFeedback"]);o!=null&&f(t,["promptFeedback"],o);const s=u(e,["usageMetadata"]);return s!=null&&f(t,["usageMetadata"],s),t}function IV(n,e){const t={},r=u(e,["values"]);return r!=null&&f(t,["values"],r),t}function SV(){return{}}function AV(n,e){const t={},r=u(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>IV(n,s))),f(t,["embeddings"],o)}return u(e,["metadata"])!=null&&f(t,["metadata"],SV()),t}function RV(n,e){const t={},r=u(e,["bytesBase64Encoded"]);r!=null&&f(t,["imageBytes"],jr(n,r));const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function X0(n,e){const t={},r=u(e,["safetyAttributes","categories"]);r!=null&&f(t,["categories"],r);const i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function PV(n,e){const t={},r=u(e,["_self"]);r!=null&&f(t,["image"],RV(n,r));const i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const o=u(e,["_self"]);return o!=null&&f(t,["safetyAttributes"],X0(n,o)),t}function kV(n,e){const t={},r=u(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>PV(n,s))),f(t,["generatedImages"],o)}const i=u(e,["positivePromptSafetyAttributes"]);return i!=null&&f(t,["positivePromptSafetyAttributes"],X0(n,i)),t}function xV(n,e){const t={},r=u(e,["baseModel"]);r!=null&&f(t,["baseModel"],r);const i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function Sh(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);o!=null&&f(t,["description"],o);const s=u(e,["version"]);s!=null&&f(t,["version"],s);const a=u(e,["_self"]);a!=null&&f(t,["tunedModelInfo"],xV(n,a));const l=u(e,["inputTokenLimit"]);l!=null&&f(t,["inputTokenLimit"],l);const c=u(e,["outputTokenLimit"]);c!=null&&f(t,["outputTokenLimit"],c);const h=u(e,["supportedGenerationMethods"]);return h!=null&&f(t,["supportedActions"],h),t}function NV(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["_self"]);if(i!=null){let o=z0(n,i);Array.isArray(o)&&(o=o.map(s=>Sh(n,s))),f(t,["models"],o)}return t}function MV(){return{}}function DV(n,e){const t={},r=u(e,["totalTokens"]);r!=null&&f(t,["totalTokens"],r);const i=u(e,["cachedContentTokenCount"]);return i!=null&&f(t,["cachedContentTokenCount"],i),t}function VV(n,e){const t={},r=u(e,["video","uri"]);r!=null&&f(t,["uri"],r);const i=u(e,["video","encodedVideo"]);i!=null&&f(t,["videoBytes"],jr(n,i));const o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function LV(n,e){const t={},r=u(e,["_self"]);return r!=null&&f(t,["video"],VV(n,r)),t}function bV(n,e){const t={},r=u(e,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>LV(n,a))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function OV(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const a=u(e,["response","generateVideoResponse"]);return a!=null&&f(t,["response"],bV(n,a)),t}function UV(n,e){const t={},r=u(e,["fps"]);r!=null&&f(t,["fps"],r);const i=u(e,["endOffset"]);i!=null&&f(t,["endOffset"],i);const o=u(e,["startOffset"]);return o!=null&&f(t,["startOffset"],o),t}function FV(n,e){const t={},r=u(e,["displayName"]);r!=null&&f(t,["displayName"],r);const i=u(e,["data"]);i!=null&&f(t,["data"],i);const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function BV(n,e){const t={},r=u(e,["videoMetadata"]);r!=null&&f(t,["videoMetadata"],UV(n,r));const i=u(e,["thought"]);i!=null&&f(t,["thought"],i);const o=u(e,["inlineData"]);o!=null&&f(t,["inlineData"],FV(n,o));const s=u(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const a=u(e,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=u(e,["fileData"]);l!=null&&f(t,["fileData"],l);const c=u(e,["functionCall"]);c!=null&&f(t,["functionCall"],c);const h=u(e,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const m=u(e,["text"]);return m!=null&&f(t,["text"],m),t}function $V(n,e){const t={},r=u(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>BV(n,s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function zV(n,e){const t={},r=u(e,["citations"]);return r!=null&&f(t,["citations"],r),t}function qV(n,e){const t={},r=u(e,["content"]);r!=null&&f(t,["content"],$V(n,r));const i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],zV(n,i));const o=u(e,["finishMessage"]);o!=null&&f(t,["finishMessage"],o);const s=u(e,["finishReason"]);s!=null&&f(t,["finishReason"],s);const a=u(e,["avgLogprobs"]);a!=null&&f(t,["avgLogprobs"],a);const l=u(e,["groundingMetadata"]);l!=null&&f(t,["groundingMetadata"],l);const c=u(e,["index"]);c!=null&&f(t,["index"],c);const h=u(e,["logprobsResult"]);h!=null&&f(t,["logprobsResult"],h);const m=u(e,["safetyRatings"]);return m!=null&&f(t,["safetyRatings"],m),t}function b_(n,e){const t={},r=u(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>qV(n,h))),f(t,["candidates"],c)}const i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=u(e,["responseId"]);o!=null&&f(t,["responseId"],o);const s=u(e,["modelVersion"]);s!=null&&f(t,["modelVersion"],s);const a=u(e,["promptFeedback"]);a!=null&&f(t,["promptFeedback"],a);const l=u(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function GV(n,e){const t={},r=u(e,["truncated"]);r!=null&&f(t,["truncated"],r);const i=u(e,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function HV(n,e){const t={},r=u(e,["values"]);r!=null&&f(t,["values"],r);const i=u(e,["statistics"]);return i!=null&&f(t,["statistics"],GV(n,i)),t}function WV(n,e){const t={},r=u(e,["billableCharacterCount"]);return r!=null&&f(t,["billableCharacterCount"],r),t}function KV(n,e){const t={},r=u(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>HV(n,s))),f(t,["embeddings"],o)}const i=u(e,["metadata"]);return i!=null&&f(t,["metadata"],WV(n,i)),t}function JV(n,e){const t={},r=u(e,["gcsUri"]);r!=null&&f(t,["gcsUri"],r);const i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],jr(n,i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Z0(n,e){const t={},r=u(e,["safetyAttributes","categories"]);r!=null&&f(t,["categories"],r);const i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function tm(n,e){const t={},r=u(e,["_self"]);r!=null&&f(t,["image"],JV(n,r));const i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const o=u(e,["_self"]);o!=null&&f(t,["safetyAttributes"],Z0(n,o));const s=u(e,["prompt"]);return s!=null&&f(t,["enhancedPrompt"],s),t}function YV(n,e){const t={},r=u(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>tm(n,s))),f(t,["generatedImages"],o)}const i=u(e,["positivePromptSafetyAttributes"]);return i!=null&&f(t,["positivePromptSafetyAttributes"],Z0(n,i)),t}function QV(n,e){const t={},r=u(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>tm(n,o))),f(t,["generatedImages"],i)}return t}function XV(n,e){const t={},r=u(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>tm(n,o))),f(t,["generatedImages"],i)}return t}function ZV(n,e){const t={},r=u(e,["endpoint"]);r!=null&&f(t,["name"],r);const i=u(e,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function jV(n,e){const t={},r=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&f(t,["baseModel"],r);const i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function eL(n,e){const t={},r=u(e,["checkpointId"]);r!=null&&f(t,["checkpointId"],r);const i=u(e,["epoch"]);i!=null&&f(t,["epoch"],i);const o=u(e,["step"]);return o!=null&&f(t,["step"],o),t}function Ah(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);o!=null&&f(t,["description"],o);const s=u(e,["versionId"]);s!=null&&f(t,["version"],s);const a=u(e,["deployedModels"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(v=>ZV(n,v))),f(t,["endpoints"],g)}const l=u(e,["labels"]);l!=null&&f(t,["labels"],l);const c=u(e,["_self"]);c!=null&&f(t,["tunedModelInfo"],jV(n,c));const h=u(e,["defaultCheckpointId"]);h!=null&&f(t,["defaultCheckpointId"],h);const m=u(e,["checkpoints"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>eL(n,v))),f(t,["checkpoints"],g)}return t}function tL(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["_self"]);if(i!=null){let o=z0(n,i);Array.isArray(o)&&(o=o.map(s=>Ah(n,s))),f(t,["models"],o)}return t}function nL(){return{}}function rL(n,e){const t={},r=u(e,["totalTokens"]);return r!=null&&f(t,["totalTokens"],r),t}function iL(n,e){const t={},r=u(e,["tokensInfo"]);return r!=null&&f(t,["tokensInfo"],r),t}function oL(n,e){const t={},r=u(e,["gcsUri"]);r!=null&&f(t,["uri"],r);const i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],jr(n,i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function sL(n,e){const t={},r=u(e,["_self"]);return r!=null&&f(t,["video"],oL(n,r)),t}function aL(n,e){const t={},r=u(e,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>sL(n,a))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function lL(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const a=u(e,["response"]);return a!=null&&f(t,["response"],aL(n,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uL="Content-Type",cL="X-Server-Timeout",dL="User-Agent",Rh="x-goog-api-client",fL="0.15.0",hL=`google-genai-sdk/${fL}`,pL="v1beta1",mL="v1beta",O_=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class j0 extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Ph extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class gL{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:pL,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:mL,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(t))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const i=new AbortController,o=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await U_(i),new Th(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await U_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Ys(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:l}=yield Me(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=o.decode(l);try{const m=JSON.parse(c);if("error"in m){const g=JSON.parse(JSON.stringify(m.error)),v=g.status,T=g.code,k=`got status: ${v}. ${JSON.stringify(m)}`;if(T>=400&&T<500)throw new j0(k);if(T>=500&&T<600)throw new Ph(k)}}catch(m){const g=m;if(g.name==="ClientError"||g.name==="ServerError")throw m}s+=c;let h=s.match(O_);for(;h;){const m=h[1];try{const g=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new Th(g)),s=s.slice(h[0].length),h=s.match(O_)}catch(g){throw new Error(`exception parsing stream chunk ${m}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=hL+" "+this.clientOptions.userAgentExtra;return e[dL]=t,e[Rh]=t,e[uL]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))t.append(r,i);e.timeout&&e.timeout>0&&t.append(cL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l=await this.fetchUploadUrl(i,t);return o.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var r;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:ee("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function U_(n){var e;if(n===void 0)throw new Ph("response is undefined");if(!n.ok){const t=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=`got status: ${t} ${r}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new j0(o):t>=500&&t<600?new Ph(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yL="mcp_used/unknown";function kh(n){for(const e of n)if(nm(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function xh(n){var e;n[Rh]=(((e=n[Rh])!==null&&e!==void 0?e:"")+` ${yL}`).trimStart()}function vL(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>nm(i)))!==null&&r!==void 0?r:!1}function _L(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>!nm(i)))!==null&&r!==void 0?r:!1}function nm(n){return n!==null&&typeof n=="object"&&"tool"in n&&"callTool"in n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EL(n,e,t){const r=new Nx,i=JSON.parse(t.data),o=BD(n,i);Object.assign(r,o),e(r)}class TL{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=IL(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(R=>{c=R}),m=e.callbacks,g=function(){c({})},v=this.apiClient,T={onopen:g,onmessage:R=>{EL(v,m.onmessage,R)},onerror:(t=m==null?void 0:m.onerror)!==null&&t!==void 0?t:function(R){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(R){}},k=this.webSocketFactory.create(l,CL(s),T);k.connect(),await h;const N=Re(this.apiClient,e.model),S=K0(this.apiClient,{model:N}),C=Ih(this.apiClient,{setup:S});return k.send(JSON.stringify(C)),new wL(k,this.apiClient)}}class wL{constructor(e,t){this.conn=e,this.apiClient=t}async setClientContent(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=nD(this.apiClient,e),r=J0(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=rD(this.apiClient,e),r=Ih(this.apiClient,t);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const t=Ih(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(fo.PLAY)}pause(){this.sendPlaybackControl(fo.PAUSE)}stop(){this.sendPlaybackControl(fo.STOP)}resetContext(){this.sendPlaybackControl(fo.RESET_CONTEXT)}close(){this.conn.close()}}function CL(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function IL(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function AL(n,e,t){const r=new xx;let i;if(t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),n.isVertexAI()){const o=ND(n,i);Object.assign(r,o)}else{const o=xD(n,i);Object.assign(r,o)}e(r)}class RL{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new TL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,o,s,a;const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const m=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&kh(e.config.tools)&&xh(m);const g=NL(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const w=this.apiClient.getApiKey();h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateContent?key=${w}`}let v=()=>{};const T=new Promise(w=>{v=w}),k=e.callbacks,N=function(){var w;(w=k==null?void 0:k.onopen)===null||w===void 0||w.call(k),v({})},S=this.apiClient,C={onopen:N,onmessage:w=>{AL(S,k.onmessage,w)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(w){},onclose:(r=k==null?void 0:k.onclose)!==null&&r!==void 0?r:function(w){}},R=this.webSocketFactory.create(h,xL(g),C);R.connect(),await T;let D=Re(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const w=this.apiClient.getProject(),A=this.apiClient.getLocation();D=`projects/${w}/locations/${A}/`+D}let O={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Wu.AUDIO]}:e.config.responseModalities=[Wu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],P=[];for(const w of U)if(this.isCallableTool(w)){const A=w;P.push(await A.tool())}else P.push(w);P.length>0&&(e.config.tools=P);const E={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=YM(this.apiClient,E):O=JM(this.apiClient,E),delete O.config,R.send(JSON.stringify(O)),new kL(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const PL={turnComplete:!0};class kL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=hn(e,t.turns),e.isVertexAI()?r=r.map(i=>Yo(e,i)):r=r.map(i=>Nc(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(SL)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},PL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:tD(this.apiClient,e)}:t={realtimeInput:eD(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function xL(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function NL(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F_=10;function B_(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ou(s)){i=!0;break}if(!i)return!0;const o=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ou(n){return"callTool"in n&&typeof n.callTool=="function"}function $_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ML extends Ba{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,o,s,a;if(t.config&&t.config.tools&&kh(t.config.tools)&&(t.config.httpOptions||(t.config.httpOptions={}),t.config.httpOptions.headers||(t.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),xh(t.config.httpOptions.headers)),!vL(t)||B_(t.config))return await this.generateContentInternal(t);if(_L(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");const l=await this.transformCallableTools(t);let c,h;const m=hn(this.apiClient,l.contents),g=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:F_;let v=0;for(;v<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const T=c.candidates[0].content,k=[];for(const N of(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(ou(N)){const C=await N.callTool(c.functionCalls);k.push(...C)}v++,h={role:"user",parts:k},l.contents=hn(this.apiClient,l.contents),l.contents.push(T),l.contents.push(h),$_(l.config)&&(m.push(T),m.push(h))}return $_(l.config)&&(c.automaticFunctionCallingHistory=m),c},this.generateContentStream=async t=>{if(t.config&&t.config.tools&&kh(t.config.tools)&&(t.config.httpOptions||(t.config.httpOptions={}),t.config.httpOptions.headers||(t.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),xh(t.config.httpOptions.headers)),B_(t.config)){const r=await this.transformCallableTools(t);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o}:a={generatedImages:s},a}),this.list=async t=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new xc(bo.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)}}async transformCallableTools(e){var t;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const i=await Promise.all(r.map(async s=>ou(s)?await s.tool():s)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};return o.config.tools=i,o}async initAfcToolsMap(e){var t,r,i;const o=new Map;for(const s of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(ou(s)){const a=s,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var t,r,i;const o=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:F_;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,h,m){var g,v;return Ys(this,arguments,function*(){for(var T,k,N,S;a<o;){s&&(a++,s=!1);const O=yield Me(c.transformCallableTools(m)),U=yield Me(c.generateContentStreamInternal(O)),P=[],E=[];try{for(var C=!0,R=(k=void 0,iu(U)),D;D=yield Me(R.next()),T=D.done,!T;C=!0){S=D.value,C=!1;const w=S;if(yield yield Me(w),w.candidates&&(!((g=w.candidates[0])===null||g===void 0)&&g.content)){E.push(w.candidates[0].content);for(const A of(v=w.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<o&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(A.functionCall.name)){const M=yield Me(h.get(A.functionCall.name).callTool([A.functionCall]));P.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(w){k={error:w}}finally{try{!C&&!T&&(N=R.return)&&(yield Me(N.call(R)))}finally{if(k)throw k.error}}if(P.length>0){s=!0;const w=new Cs;w.candidates=[{content:{role:"user",parts:P}}],yield yield Me(w);const A=[];A.push(...E),A.push({role:"user",parts:P});const M=hn(c.apiClient,m.contents).concat(A);m.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=V_(this.apiClient,e);return a=ee("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=b_(this.apiClient,h),g=new Cs;return Object.assign(g,m),g})}else{const c=D_(this.apiClient,e);return a=ee("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=L_(this.apiClient,h),g=new Cs;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=V_(this.apiClient,e);a=ee("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=this.apiClient;return s=h.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return Ys(this,arguments,function*(){var g,v,T,k;try{for(var N=!0,S=iu(m),C;C=yield Me(S.next()),g=C.done,!g;N=!0){k=C.value,N=!1;const D=b_(h,yield Me(k.json())),O=new Cs;Object.assign(O,D),yield yield Me(O)}}catch(R){v={error:R}}finally{try{!N&&!g&&(T=S.return)&&(yield Me(T.call(S)))}finally{if(v)throw v.error}}})})}else{const c=D_(this.apiClient,e);a=ee("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=this.apiClient;return s=h.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return Ys(this,arguments,function*(){var g,v,T,k;try{for(var N=!0,S=iu(m),C;C=yield Me(S.next()),g=C.done,!g;N=!0){k=C.value,N=!1;const D=L_(h,yield Me(k.json())),O=new Cs;Object.assign(O,D),yield yield Me(O)}}catch(R){v={error:R}}finally{try{!N&&!g&&(T=S.return)&&(yield Me(T.call(S)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=K1(this.apiClient,e);return a=ee("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=KV(this.apiClient,h),g=new h_;return Object.assign(g,m),g})}else{const c=u1(this.apiClient,e);return a=ee("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=AV(this.apiClient,h),g=new h_;return Object.assign(g,m),g})}}async generateImagesInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Y1(this.apiClient,e);return a=ee("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=YV(this.apiClient,h),g=new p_;return Object.assign(g,m),g})}else{const c=d1(this.apiClient,e);return a=ee("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=kV(this.apiClient,h),g=new p_;return Object.assign(g,m),g})}}async editImageInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=nV(this.apiClient,e);return o=ee("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=QV(this.apiClient,l),h=new Ix;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=iV(this.apiClient,e);return o=ee("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=XV(this.apiClient,l),h=new Sx;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=oV(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ah(this.apiClient,h))}else{const c=f1(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sh(this.apiClient,h))}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=aV(this.apiClient,e);return a=ee("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=tL(this.apiClient,h),g=new m_;return Object.assign(g,m),g})}else{const c=p1(this.apiClient,e);return a=ee("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=NV(this.apiClient,h),g=new m_;return Object.assign(g,m),g})}}async update(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=uV(this.apiClient,e);return a=ee("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ah(this.apiClient,h))}else{const c=g1(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sh(this.apiClient,h))}}async delete(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=cV(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(()=>{const h=nL(),m=new g_;return Object.assign(m,h),m})}else{const c=y1(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(()=>{const h=MV(),m=new g_;return Object.assign(m,h),m})}}async countTokens(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=fV(this.apiClient,e);return a=ee("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=rL(this.apiClient,h),g=new y_;return Object.assign(g,m),g})}else{const c=_1(this.apiClient,e);return a=ee("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=DV(this.apiClient,h),g=new y_;return Object.assign(g,m),g})}}async computeTokens(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=hV(this.apiClient,e);return o=ee("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=iL(this.apiClient,l),h=new Ax;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=mV(this.apiClient,e);return a=ee("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>lL(this.apiClient,h))}else{const c=w1(this.apiClient,e);return a=ee("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>OV(this.apiClient,h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DL(n,e){const t={},r=u(e,["operationName"]);r!=null&&f(t,["_url","operationName"],r);const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function VL(n,e){const t={},r=u(e,["operationName"]);r!=null&&f(t,["_url","operationName"],r);const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function LL(n,e){const t={},r=u(e,["operationName"]);r!=null&&f(t,["operationName"],r);const i=u(e,["resourceName"]);i!=null&&f(t,["_url","resourceName"],i);const o=u(e,["config"]);return o!=null&&f(t,["config"],o),t}function bL(n,e){const t={},r=u(e,["video","uri"]);r!=null&&f(t,["uri"],r);const i=u(e,["video","encodedVideo"]);i!=null&&f(t,["videoBytes"],jr(n,i));const o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function OL(n,e){const t={},r=u(e,["_self"]);return r!=null&&f(t,["video"],bL(n,r)),t}function UL(n,e){const t={},r=u(e,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>OL(n,a))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function FL(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const a=u(e,["response","generateVideoResponse"]);return a!=null&&f(t,["response"],UL(n,a)),t}function BL(n,e){const t={},r=u(e,["gcsUri"]);r!=null&&f(t,["uri"],r);const i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],jr(n,i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function $L(n,e){const t={},r=u(e,["_self"]);return r!=null&&f(t,["video"],BL(n,r)),t}function zL(n,e){const t={},r=u(e,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$L(n,a))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function z_(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const a=u(e,["response"]);return a!=null&&f(t,["response"],zL(n,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qL extends Ba{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=VL(this.apiClient,e);return a=ee("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>z_(this.apiClient,h))}else{const c=DL(this.apiClient,e);return a=ee("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>FL(this.apiClient,h))}}async fetchPredictVideosOperationInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=LL(this.apiClient,e);return o=ee("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>z_(this.apiClient,l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GL(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],r);const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function HL(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);const s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),r}function WL(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],HL(n,r,t)),t}function KL(n,e){const t={},r=u(e,["textInput"]);r!=null&&f(t,["textInput"],r);const i=u(e,["output"]);return i!=null&&f(t,["output"],i),t}function JL(n,e){const t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=u(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>KL(n,o))),f(t,["examples","examples"],i)}return t}function YL(n,e,t){const r={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&f(t,["displayName"],i),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(e,["epochCount"]);t!==void 0&&o!=null&&f(t,["tuningTask","hyperparameters","epochCount"],o);const s=u(e,["learningRateMultiplier"]);if(s!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);const l=u(e,["learningRate"]);return t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","learningRate"],l),r}function QL(n,e){const t={},r=u(e,["baseModel"]);r!=null&&f(t,["baseModel"],r);const i=u(e,["trainingDataset"]);i!=null&&f(t,["tuningTask","trainingData"],JL(n,i));const o=u(e,["config"]);return o!=null&&f(t,["config"],YL(n,o,t)),t}function XL(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["_url","name"],r);const i=u(e,["config"]);return i!=null&&f(t,["config"],i),t}function ZL(n,e,t){const r={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);const s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),r}function jL(n,e){const t={},r=u(e,["config"]);return r!=null&&f(t,["config"],ZL(n,r,t)),t}function eb(n,e,t){const r={},i=u(e,["gcsUri"]);if(t!==void 0&&i!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],i),u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function tb(n,e){const t={},r=u(e,["gcsUri"]);return r!=null&&f(t,["validationDatasetUri"],r),t}function nb(n,e,t){const r={},i=u(e,["validationDataset"]);t!==void 0&&i!=null&&f(t,["supervisedTuningSpec"],tb(n,i));const o=u(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&f(t,["tunedModelDisplayName"],o);const s=u(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);const a=u(e,["epochCount"]);t!==void 0&&a!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=u(e,["learningRateMultiplier"]);t!==void 0&&l!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=u(e,["exportLastCheckpointOnly"]);t!==void 0&&c!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const h=u(e,["adapterSize"]);if(t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],h),u(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function rb(n,e){const t={},r=u(e,["baseModel"]);r!=null&&f(t,["baseModel"],r);const i=u(e,["trainingDataset"]);i!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],eb(n,i,t));const o=u(e,["config"]);return o!=null&&f(t,["config"],nb(n,o,t)),t}function ib(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["model"],r);const i=u(e,["name"]);return i!=null&&f(t,["endpoint"],i),t}function eC(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["state"]);i!=null&&f(t,["state"],F0(n,i));const o=u(e,["createTime"]);o!=null&&f(t,["createTime"],o);const s=u(e,["tuningTask","startTime"]);s!=null&&f(t,["startTime"],s);const a=u(e,["tuningTask","completeTime"]);a!=null&&f(t,["endTime"],a);const l=u(e,["updateTime"]);l!=null&&f(t,["updateTime"],l);const c=u(e,["description"]);c!=null&&f(t,["description"],c);const h=u(e,["baseModel"]);h!=null&&f(t,["baseModel"],h);const m=u(e,["_self"]);m!=null&&f(t,["tunedModel"],ib(n,m));const g=u(e,["distillationSpec"]);g!=null&&f(t,["distillationSpec"],g);const v=u(e,["experiment"]);v!=null&&f(t,["experiment"],v);const T=u(e,["labels"]);T!=null&&f(t,["labels"],T);const k=u(e,["pipelineJob"]);k!=null&&f(t,["pipelineJob"],k);const N=u(e,["tunedModelDisplayName"]);return N!=null&&f(t,["tunedModelDisplayName"],N),t}function ob(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>eC(n,s))),f(t,["tuningJobs"],o)}return t}function sb(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);return s!=null&&f(t,["error"],s),t}function ab(n,e){const t={},r=u(e,["checkpointId"]);r!=null&&f(t,["checkpointId"],r);const i=u(e,["epoch"]);i!=null&&f(t,["epoch"],i);const o=u(e,["step"]);o!=null&&f(t,["step"],o);const s=u(e,["endpoint"]);return s!=null&&f(t,["endpoint"],s),t}function lb(n,e){const t={},r=u(e,["model"]);r!=null&&f(t,["model"],r);const i=u(e,["endpoint"]);i!=null&&f(t,["endpoint"],i);const o=u(e,["checkpoints"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>ab(n,a))),f(t,["checkpoints"],s)}return t}function Nh(n,e){const t={},r=u(e,["name"]);r!=null&&f(t,["name"],r);const i=u(e,["state"]);i!=null&&f(t,["state"],F0(n,i));const o=u(e,["createTime"]);o!=null&&f(t,["createTime"],o);const s=u(e,["startTime"]);s!=null&&f(t,["startTime"],s);const a=u(e,["endTime"]);a!=null&&f(t,["endTime"],a);const l=u(e,["updateTime"]);l!=null&&f(t,["updateTime"],l);const c=u(e,["error"]);c!=null&&f(t,["error"],c);const h=u(e,["description"]);h!=null&&f(t,["description"],h);const m=u(e,["baseModel"]);m!=null&&f(t,["baseModel"],m);const g=u(e,["tunedModel"]);g!=null&&f(t,["tunedModel"],lb(n,g));const v=u(e,["supervisedTuningSpec"]);v!=null&&f(t,["supervisedTuningSpec"],v);const T=u(e,["tuningDataStats"]);T!=null&&f(t,["tuningDataStats"],T);const k=u(e,["encryptionSpec"]);k!=null&&f(t,["encryptionSpec"],k);const N=u(e,["partnerModelTuningSpec"]);N!=null&&f(t,["partnerModelTuningSpec"],N);const S=u(e,["distillationSpec"]);S!=null&&f(t,["distillationSpec"],S);const C=u(e,["experiment"]);C!=null&&f(t,["experiment"],C);const R=u(e,["labels"]);R!=null&&f(t,["labels"],R);const D=u(e,["pipelineJob"]);D!=null&&f(t,["pipelineJob"],D);const O=u(e,["tunedModelDisplayName"]);return O!=null&&f(t,["tunedModelDisplayName"],O),t}function ub(n,e){const t={},r=u(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=u(e,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Nh(n,s))),f(t,["tuningJobs"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cb extends Ba{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new xc(bo.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const r=await this.tuneMldevInternal(t);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Eh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=XL(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Nh(this.apiClient,h))}else{const c=GL(this.apiClient,e);return a=ee("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>eC(this.apiClient,h))}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=jL(this.apiClient,e);return a=ee("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=ub(this.apiClient,h),g=new v_;return Object.assign(g,m),g})}else{const c=WL(this.apiClient,e);return a=ee("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=ob(this.apiClient,h),g=new v_;return Object.assign(g,m),g})}}async tuneInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=rb(this.apiClient,e);return o=ee("tuningJobs",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Nh(this.apiClient,l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=QL(this.apiClient,e);return o=ee("tunedModels",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>sb(this.apiClient,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class db{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fb=1024*1024*8,hb=3,pb=1e3,mb=2,jd="x-goog-upload-status";async function gb(n,e,t){var r,i,o;let s=0,a=0,l=new Th(new Response),c="upload";for(s=n.size;a<s;){const m=Math.min(fb,s-a),g=n.slice(a,a+m);a+m>=s&&(c+=", finalize");let v=0,T=pb;for(;v<hb&&(l=await t.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[jd]));)v++,await vb(T),T=T*mb;if(a+=m,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[jd])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function yb(n){return{size:n.size,type:n.type}}function vb(n){return new Promise(e=>setTimeout(e,n))}class _b{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gb(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yb(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eb{create(e,t,r){return new Tb(e,t,r)}}class Tb{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q_="x-goog-api-key";class wb{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(q_)===null&&e.append(q_,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cb="gl-node/";class Ib{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=Cx(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new wb(this.apiKey);this.apiClient=new gL({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Cb+"web",uploader:new _b,downloader:new db}),this.models=new ML(this.apiClient),this.live=new RL(this.apiClient,i,new Eb),this.chats=new zN(this.models,this.apiClient),this.caches=new FN(this.apiClient),this.files=new tM(this.apiClient),this.operations=new qL(this.apiClient),this.tunings=new cb(this.apiClient)}}const Sb=void 0;console.warn("Gemini API key not found. Please set the API_KEY.");new Ib({apiKey:Sb});ve.ARRAY,ve.OBJECT,ve.STRING,ve.STRING,ve.STRING,ve.STRING,ve.STRING,ve.STRING,ve.STRING,ve.ARRAY,ve.OBJECT,ve.STRING,ve.ARRAY,ve.STRING,ve.STRING,ve.STRING,ve.STRING,ve.ARRAY,ve.STRING,ve.STRING;const Ab=async n=>{throw new Error("Gemini API key is not configured.")};var G_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Rb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},nC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=o>>2,m=(o&3)<<4|a>>4;let g=(a&15)<<2|c>>6,v=c&63;l||(v=64,s||(g=64)),r.push(t[h],t[m],t[g],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Rb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||c==null||m==null)throw new Pb;const g=o<<2|a>>4;if(r.push(g),c!==64){const v=a<<4&240|c>>2;if(r.push(v),m!==64){const T=c<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Pb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kb=function(n){const e=tC(n);return nC.encodeByteArray(e,!0)},Yu=function(n){return kb(n).replace(/\./g,"")},rC=function(n){try{return nC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=()=>xb().__FIREBASE_DEFAULTS__,Mb=()=>{if(typeof process>"u"||typeof G_>"u")return;const n=G_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Db=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rC(n[1]);return e&&JSON.parse(e)},Mc=()=>{try{return Nb()||Mb()||Db()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iC=n=>{var e,t;return(t=(e=Mc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oC=n=>{const e=iC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sC=()=>{var n;return(n=Mc())===null||n===void 0?void 0:n.config},aC=n=>{var e;return(e=Mc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yu(JSON.stringify(t)),Yu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function bb(){var n;const e=(n=Mc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ob(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ub(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bb(){const n=Tt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $b(){return!bb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zb(){try{return typeof indexedDB=="object"}catch{return!1}}function qb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="FirebaseError";class Mn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Gb,Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Hb(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Mn(i,a,r)}}function Hb(n,e){return n.replace(Wb,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Wb=/\{\$([^}]+)}/g;function Kb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(H_(o)&&H_(s)){if(!Qu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function H_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ms(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ds(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Jb(n,e){const t=new Yb(n,e);return t.subscribe.bind(t)}class Yb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Qb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ef),i.error===void 0&&(i.error=ef),i.complete===void 0&&(i.complete=ef);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ef(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n){return n&&n._delegate?n._delegate:n}class Hr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Vb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jb(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zb(n){return n===ci?void 0:n}function jb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(de||(de={}));const tO={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},nO=de.INFO,rO={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},iO=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=rO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rm{constructor(e){this.name=e,this._logLevel=nO,this._logHandler=iO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const oO=(n,e)=>e.some(t=>n instanceof t);let W_,K_;function sO(){return W_||(W_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aO(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uC=new WeakMap,Mh=new WeakMap,cC=new WeakMap,tf=new WeakMap,im=new WeakMap;function lO(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Fr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&uC.set(t,n)}).catch(()=>{}),im.set(e,n),e}function uO(n){if(Mh.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Mh.set(n,e)}let Dh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cO(n){Dh=n(Dh)}function dO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(nf(this),e,...t);return cC.set(r,e.sort?e.sort():[e]),Fr(r)}:aO().includes(n)?function(...e){return n.apply(nf(this),e),Fr(uC.get(this))}:function(...e){return Fr(n.apply(nf(this),e))}}function fO(n){return typeof n=="function"?dO(n):(n instanceof IDBTransaction&&uO(n),oO(n,sO())?new Proxy(n,Dh):n)}function Fr(n){if(n instanceof IDBRequest)return lO(n);if(tf.has(n))return tf.get(n);const e=fO(n);return e!==n&&(tf.set(n,e),im.set(e,n)),e}const nf=n=>im.get(n);function hO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=Fr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Fr(s.result),l.oldVersion,l.newVersion,Fr(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const pO=["get","getKey","getAll","getAllKeys","count"],mO=["put","add","delete","clear"],rf=new Map;function J_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=mO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pO.includes(t)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return rf.set(e,o),o}cO(n=>({...n,get:(e,t,r)=>J_(e,t)||n.get(e,t,r),has:(e,t)=>!!J_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function yO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vh="@firebase/app",Y_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new rm("@firebase/app"),vO="@firebase/app-compat",_O="@firebase/analytics-compat",EO="@firebase/analytics",TO="@firebase/app-check-compat",wO="@firebase/app-check",CO="@firebase/auth",IO="@firebase/auth-compat",SO="@firebase/database",AO="@firebase/data-connect",RO="@firebase/database-compat",PO="@firebase/functions",kO="@firebase/functions-compat",xO="@firebase/installations",NO="@firebase/installations-compat",MO="@firebase/messaging",DO="@firebase/messaging-compat",VO="@firebase/performance",LO="@firebase/performance-compat",bO="@firebase/remote-config",OO="@firebase/remote-config-compat",UO="@firebase/storage",FO="@firebase/storage-compat",BO="@firebase/firestore",$O="@firebase/vertexai-preview",zO="@firebase/firestore-compat",qO="firebase",GO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="[DEFAULT]",HO={[Vh]:"fire-core",[vO]:"fire-core-compat",[EO]:"fire-analytics",[_O]:"fire-analytics-compat",[wO]:"fire-app-check",[TO]:"fire-app-check-compat",[CO]:"fire-auth",[IO]:"fire-auth-compat",[SO]:"fire-rtdb",[AO]:"fire-data-connect",[RO]:"fire-rtdb-compat",[PO]:"fire-fn",[kO]:"fire-fn-compat",[xO]:"fire-iid",[NO]:"fire-iid-compat",[MO]:"fire-fcm",[DO]:"fire-fcm-compat",[VO]:"fire-perf",[LO]:"fire-perf-compat",[bO]:"fire-rc",[OO]:"fire-rc-compat",[UO]:"fire-gcs",[FO]:"fire-gcs-compat",[BO]:"fire-fst",[zO]:"fire-fst-compat",[$O]:"fire-vertex","fire-js":"fire-js",[qO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,WO=new Map,bh=new Map;function Q_(n,e){try{n.container.addComponent(e)}catch(t){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ri(n){const e=n.name;if(bh.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;bh.set(e,n);for(const t of Xu.values())Q_(t,n);for(const t of WO.values())Q_(t,n);return!0}function Dc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function En(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new $a("app","Firebase",KO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=GO;function dC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(t||(t=sC()),!t)throw Br.create("no-options");const o=Xu.get(i);if(o){if(Qu(t,o.options)&&Qu(r,o.config))return o;throw Br.create("duplicate-app",{appName:i})}const s=new eO(i);for(const l of bh.values())s.addComponent(l);const a=new JO(t,r,s);return Xu.set(i,a),a}function om(n=Lh){const e=Xu.get(n);if(!e&&n===Lh&&sC())return dC();if(!e)throw Br.create("no-app",{appName:n});return e}function Sn(n,e,t){var r;let i=(r=HO[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Ri(new Hr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="firebase-heartbeat-database",QO=1,Ca="firebase-heartbeat-store";let of=null;function fC(){return of||(of=hO(YO,QO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ca)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),of}async function XO(n){try{const t=(await fC()).transaction(Ca),r=await t.objectStore(Ca).get(hC(n));return await t.done,r}catch(e){if(e instanceof Mn)rr.warn(e.message);else{const t=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(t.message)}}}async function X_(n,e){try{const r=(await fC()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,hC(n)),await r.done}catch(t){if(t instanceof Mn)rr.warn(t.message);else{const r=Br.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});rr.warn(r.message)}}}function hC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=1024,jO=30*24*60*60*1e3;class eU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nU(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Z_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=jO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Z_(),{heartbeatsToSend:r,unsentEntries:i}=tU(this._heartbeatsCache.heartbeats),o=Yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return rr.warn(t),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function tU(n,e=ZO){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),j_(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),j_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class nU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zb()?qb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return X_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return X_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function j_(n){return Yu(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(n){Ri(new Hr("platform-logger",e=>new gO(e),"PRIVATE")),Ri(new Hr("heartbeat",e=>new eU(e),"PRIVATE")),Sn(Vh,Y_,n),Sn(Vh,Y_,"esm2017"),Sn("fire-js","")}rU("");var iU="firebase",oU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn(iU,oU,"app");function sm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function pC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sU=pC,mC=new $a("auth","Firebase",pC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new rm("@firebase/auth");function aU(n,...e){Zu.logLevel<=de.WARN&&Zu.warn(`Auth (${Ui}): ${n}`,...e)}function su(n,...e){Zu.logLevel<=de.ERROR&&Zu.error(`Auth (${Ui}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n,...e){throw am(n,...e)}function Gt(n,...e){return am(n,...e)}function gC(n,e,t){const r=Object.assign(Object.assign({},sU()),{[e]:t});return new $a("auth","Firebase",r).create(e,{appName:n.name})}function Yn(n){return gC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function am(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return mC.create(n,...e)}function Y(n,e,...t){if(!n)throw am(e,...t)}function Hn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw su(e),new Error(e)}function ir(n,e){n||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yC(){return eE()==="http:"||eE()==="https:"}function eE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yC()||Ub()||"connection"in navigator)?navigator.onLine:!0}function uU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=Lb()||Fb()}get(){return lU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(n,e){ir(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=new za(3e4,6e4);function Yt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function rn(n,e,t,r,i={}){return _C(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Qo(Object.assign({key:n.config.apiKey},s)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},o);return Ob()||(c.referrerPolicy="no-referrer"),vC.fetch()(EC(n,n.config.apiHost,t,a),c)})}async function _C(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},cU),e);try{const i=new hU(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Vs(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vs(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Vs(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Vs(n,"user-disabled",s);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw gC(n,h,c);mn(n,h)}}catch(i){if(i instanceof Mn)throw i;mn(n,"network-request-failed",{message:String(i)})}}async function Fi(n,e,t,r,i={}){const o=await rn(n,e,t,r,i);return"mfaPendingCredential"in o&&mn(n,"multi-factor-auth-required",{_serverResponse:o}),o}function EC(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?lm(n.config,i):`${n.config.apiScheme}://${i}`}function fU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Gt(this.auth,"network-request-failed")),dU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vs(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Gt(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(n){return n!==void 0&&n.getResponse!==void 0}function nE(n){return n!==void 0&&n.enterprise!==void 0}class pU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(n){return(await rn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gU(n,e){return rn(n,"GET","/v2/recaptchaConfig",Yt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(n,e){return rn(n,"POST","/v1/accounts:delete",e)}async function TC(n,e){return rn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vU(n,e=!1){const t=xe(n),r=await t.getIdToken(e),i=um(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Qs(sf(i.auth_time)),issuedAtTime:Qs(sf(i.iat)),expirationTime:Qs(sf(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function sf(n){return Number(n)*1e3}function um(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const i=rC(t);return i?JSON.parse(i):(su("Failed to decode base64 JWT payload"),null)}catch(i){return su("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rE(n){const e=um(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mn&&_U(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _U({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qs(this.lastLoginAt),this.creationTime=Qs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ia(n,TC(t,{idToken:r}));Y(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?wC(o.providerUserInfo):[],a=wU(n.providerData,s),l=n.isAnonymous,c=!(n.email&&o.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Uh(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function TU(n){const e=xe(n);await ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wC(n){return n.map(e=>{var{providerId:t}=e,r=sm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(n,e){const t=await _C(n,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=EC(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vC.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IU(n,e){return rn(n,"POST","/v2/accounts:revokeToken",Yt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const t=rE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await CU(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new Eo;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Wn{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Uh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vU(this,e)}reload(){return TU(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ju(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Yn(this.auth));const e=await this.getIdToken();return await Ia(this,yU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,c,h;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=t.createdAt)!==null&&c!==void 0?c:void 0,C=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:R,emailVerified:D,isAnonymous:O,providerData:U,stsTokenManager:P}=t;Y(R&&P,e,"internal-error");const E=Eo.fromJSON(this.name,P);Y(typeof R=="string",e,"internal-error"),fr(m,e.name),fr(g,e.name),Y(typeof D=="boolean",e,"internal-error"),Y(typeof O=="boolean",e,"internal-error"),fr(v,e.name),fr(T,e.name),fr(k,e.name),fr(N,e.name),fr(S,e.name),fr(C,e.name);const w=new Wn({uid:R,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:O,photoURL:T,phoneNumber:v,tenantId:k,stsTokenManager:E,createdAt:S,lastLoginAt:C});return U&&Array.isArray(U)&&(w.providerData=U.map(A=>Object.assign({},A))),N&&(w._redirectEventId=N),w}static async _fromIdTokenResponse(e,t,r=!1){const i=new Eo;i.updateFromServerResponse(t);const o=new Wn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ju(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Y(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?wC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Eo;a.updateFromIdToken(r);const l=new Wn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Uh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function Kn(n){ir(n instanceof Function,"Expected a class definition");let e=iE.get(n);return e?(ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}CC.type="NONE";const oE=CC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n,e,t){return`firebase:${n}:${e}:${t}`}class To{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=au(this.userKey,i.apiKey,o),this.fullPersistenceKey=au("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new To(Kn(oE),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||Kn(oE);const s=au(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(s);if(h){const m=Wn._fromJSON(e,h);c!==o&&(a=m),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new To(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new To(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kC(e))return"Blackberry";if(xC(e))return"Webos";if(SC(e))return"Safari";if((e.includes("chrome/")||AC(e))&&!e.includes("edge/"))return"Chrome";if(PC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IC(n=Tt()){return/firefox\//i.test(n)}function SC(n=Tt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AC(n=Tt()){return/crios\//i.test(n)}function RC(n=Tt()){return/iemobile/i.test(n)}function PC(n=Tt()){return/android/i.test(n)}function kC(n=Tt()){return/blackberry/i.test(n)}function xC(n=Tt()){return/webos/i.test(n)}function cm(n=Tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SU(n=Tt()){var e;return cm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AU(){return Bb()&&document.documentMode===10}function NC(n=Tt()){return cm(n)||PC(n)||xC(n)||kC(n)||/windows phone/i.test(n)||RC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(n,e=[]){let t;switch(n){case"Browser":t=sE(Tt());break;case"Worker":t=`${sE(Tt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ui}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e={}){return rn(n,"GET","/v2/passwordPolicy",Yt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=6;class xU{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:kU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new RU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await TC(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(En(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ju(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Yn(this));const t=e?xe(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PU(this),t=new xU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await IU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kn(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Kn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(t);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&aU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ei(n){return xe(n)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jb(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MU(n){qa=n}function dm(n){return qa.loadJS(n)}function DU(){return qa.recaptchaV2Script}function VU(){return qa.recaptchaEnterpriseScript}function LU(){return qa.gapiScript}function DC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const bU="recaptcha-enterprise",OU="NO_RECAPTCHA";class UU{constructor(e){this.type=bU,this.auth=ei(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{gU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new pU(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;nE(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(OU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&nE(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=VU();l.length!==0&&(l+=a),dm(l).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})}}async function lE(n,e,t,r=!1){const i=new UU(n);let o;try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function uE(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lE(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await lE(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(n,e){const t=Dc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Qu(o,e??{}))return i;mn(i,"already-initialized")}return t.initialize({options:e})}function BU(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Kn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $U(n,e,t){const r=ei(n);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=VC(e),{host:s,port:a}=zU(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),qU()}function VC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zU(n){const e=VC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:cE(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:cE(s)}}}function cE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,t){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function GU(n,e){return rn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(n,e){return Fi(n,"POST","/v1/accounts:signInWithPassword",Yt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(n,e){return Fi(n,"POST","/v1/accounts:signInWithEmailLink",Yt(n,e))}async function KU(n,e){return Fi(n,"POST","/v1/accounts:signInWithEmailLink",Yt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Vc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Sa(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Sa(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uE(e,t,"signInWithPassword",HU);case"emailLink":return WU(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uE(e,r,"signUpPassword",GU);case"emailLink":return KU(e,{idToken:t,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(n,e){return Fi(n,"POST","/v1/accounts:signInWithIdp",Yt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU="http://localhost";class Pi extends Vc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=sm(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Pi(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:JU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(n,e){return rn(n,"POST","/v1/accounts:sendVerificationCode",Yt(n,e))}async function QU(n,e){return Fi(n,"POST","/v1/accounts:signInWithPhoneNumber",Yt(n,e))}async function XU(n,e){const t=await Fi(n,"POST","/v1/accounts:signInWithPhoneNumber",Yt(n,e));if(t.temporaryProof)throw Vs(n,"account-exists-with-different-credential",t);return t}const ZU={USER_NOT_FOUND:"user-not-found"};async function jU(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Fi(n,"POST","/v1/accounts:signInWithPhoneNumber",Yt(n,t),ZU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Vc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Xs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Xs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return QU(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return XU(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return jU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!t&&!i&&!o?null:new Xs({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tF(n){const e=Ms(Ds(n)).link,t=e?Ms(Ds(e)).deep_link_id:null,r=Ms(Ds(n)).deep_link_id;return(r?Ms(Ds(r)).link:null)||r||t||e||n}class fm{constructor(e){var t,r,i,o,s,a;const l=Ms(Ds(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,m=eF((i=l.mode)!==null&&i!==void 0?i:null);Y(c&&h&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=h,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=tF(e);try{return new fm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,t){return Sa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=fm.parseLink(t);return Y(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends LC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Ga{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com";_r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pi._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Er.credential(t,r)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ga{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Ga{constructor(){super("twitter.com")}static credential(e,t){return Pi._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return wr.credential(t,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Wn._fromIdTokenResponse(e,r,i),s=dE(r);return new Oo({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=dE(r);return new Oo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function dE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Mn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ec(e,t,r,i)}}function bC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(n,o,e,r):o})}async function nF(n,e,t=!1){const r=await Ia(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(n,e,t=!1){const{auth:r}=n;if(En(r.app))return Promise.reject(Yn(r));const i="reauthenticate";try{const o=await Ia(n,bC(r,i,e,n),t);Y(o.idToken,r,"internal-error");const s=um(o.idToken);Y(s,r,"internal-error");const{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),Oo._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(n,e,t=!1){if(En(n.app))return Promise.reject(Yn(n));const r="signIn",i=await bC(n,r,e),o=await Oo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function UC(n,e){return OC(ei(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(n){const e=ei(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function oF(n,e,t){return En(n.app)?Promise.reject(Yn(n)):UC(xe(n),Xo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iF(n),r})}function sF(n,e,t,r){return xe(n).onIdTokenChanged(e,t,r)}function aF(n,e,t){return xe(n).beforeAuthStateChanged(e,t)}function lF(n,e,t,r){return xe(n).onAuthStateChanged(e,t,r)}function uF(n){return xe(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(n,e){return rn(n,"POST","/v2/accounts/mfaEnrollment:start",Yt(n,e))}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=1e3,fF=10;class BC extends FC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);AU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fF):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BC.type="LOCAL";const hF=BC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends FC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$C.type="SESSION";const zC=$C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Lc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(t.origin,o)),l=await pF(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=hm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(){return window}function gF(n){Ke().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(){return typeof Ke().WorkerGlobalScope<"u"&&typeof Ke().importScripts=="function"}async function yF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _F(){return pm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firebaseLocalStorageDb",EF=1,nc="firebaseLocalStorage",GC="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bc(n,e){return n.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function TF(){const n=indexedDB.deleteDatabase(qC);return new Ha(n).toPromise()}function Fh(){const n=indexedDB.open(qC,EF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(nc,{keyPath:GC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(nc)?e(r):(r.close(),await TF(),e(await Fh()))})})}async function fE(n,e,t){const r=bc(n,!0).put({[GC]:e,value:t});return new Ha(r).toPromise()}async function wF(n,e){const t=bc(n,!1).get(e),r=await new Ha(t).toPromise();return r===void 0?null:r.value}function hE(n,e){const t=bc(n,!0).delete(e);return new Ha(t).toPromise()}const CF=800,IF=3;class HC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>IF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lc._getInstance(_F()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await yF(),!this.activeServiceWorker)return;this.sender=new mF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fh();return await fE(e,tc,"1"),await hE(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>fE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=bc(i,!1).getAll();return new Ha(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HC.type="LOCAL";const SF=HC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(n,e){return rn(n,"POST","/v2/accounts/mfaSignIn:start",Yt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=500,PF=6e4,bl=1e12;class kF{constructor(e){this.auth=e,this.counter=bl,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new xF(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||bl;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||bl;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||bl;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class xF{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Y(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=NF(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},PF)},RF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function NF(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=DC("rcb"),MF=new za(3e4,6e4);class DF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ke().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return Y(VF(t),e,"argument-error"),this.shouldResolveImmediately(t)&&tE(Ke().grecaptcha)?Promise.resolve(Ke().grecaptcha):new Promise((r,i)=>{const o=Ke().setTimeout(()=>{i(Gt(e,"network-request-failed"))},MF.get());Ke()[af]=()=>{Ke().clearTimeout(o),delete Ke()[af];const a=Ke().grecaptcha;if(!a||!tE(a)){i(Gt(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const m=l(c,h);return this.counter++,m},this.hostLanguage=t,r(a)};const s=`${DU()}?${Qo({onload:af,render:"explicit",hl:t})}`;dm(s).catch(()=>{clearTimeout(o),i(Gt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Ke().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function VF(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class LF{async load(e){return new kF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="recaptcha",bF={theme:"light",type:"image"};class OF{constructor(e,t,r=Object.assign({},bF)){this.parameters=r,this.type=WC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ei(e),this.isInvisible=this.parameters.size==="invisible",Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;Y(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new LF:new DF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ke()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Y(yC()&&!pm(),this.auth,"internal-error"),await UF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await mU(this.auth);Y(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function UF(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Xs._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function BF(n,e,t){if(En(n.app))return Promise.reject(Yn(n));const r=ei(n),i=await $F(r,e,xe(t));return new FF(i,o=>UC(r,o))}async function $F(n,e,t){var r;const i=await t.verify();try{Y(typeof i=="string",n,"argument-error"),Y(t.type===WC,n,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const s=o.session;if("phoneNumber"in o)return Y(s.type==="enroll",n,"internal-error"),(await cF(n,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Y(s.type==="signin",n,"internal-error");const a=((r=o.multiFactorHint)===null||r===void 0?void 0:r.uid)||o.multiFactorUid;return Y(a,n,"missing-multi-factor-info"),(await AF(n,{mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:s}=await YU(n,{phoneNumber:o.phoneNumber,recaptchaToken:i});return s}}finally{t._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(n,e){return e?Kn(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends Vc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qF(n){return OC(n.auth,new mm(n),n.bypassAuthState)}function GF(n){const{auth:e,user:t}=n;return Y(t,e,"internal-error"),rF(t,new mm(n),n.bypassAuthState)}async function HF(n){const{auth:e,user:t}=n;return Y(t,e,"internal-error"),nF(t,new mm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qF;case"linkViaPopup":case"linkViaRedirect":return HF;case"reauthViaPopup":case"reauthViaRedirect":return GF;default:mn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=new za(2e3,1e4);class ho extends KC{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WF.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="pendingRedirect",lu=new Map;class JF extends KC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lu.get(this.auth._key());if(!e){try{const r=await YF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lu.set(this.auth._key(),e)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YF(n,e){const t=ZF(e),r=XF(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function QF(n,e){lu.set(n._key(),e)}function XF(n){return Kn(n._redirectPersistence)}function ZF(n){return au(KF,n.config.apiKey,n.name)}async function jF(n,e,t=!1){if(En(n.app))return Promise.reject(Yn(n));const r=ei(n),i=zF(r,e),s=await new JF(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=10*60*1e3;class t2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Gt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e2&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(e))}saveEventToCache(e){this.cachedEventUids.add(pE(e)),this.lastProcessedEventTime=Date.now()}}function pE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function n2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(n,e={}){return rn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o2=/^https?/;async function s2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await r2(n);for(const t of e)try{if(a2(t))return}catch{}mn(n,"unauthorized-domain")}function a2(n){const e=Oh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!o2.test(t))return!1;if(i2.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new za(3e4,6e4);function mE(){const n=Ke().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function u2(n){return new Promise((e,t)=>{var r,i,o;function s(){mE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mE(),t(Gt(n,"network-request-failed"))},timeout:l2.get()})}if(!((i=(r=Ke().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ke().gapi)===null||o===void 0)&&o.load)s();else{const a=DC("iframefcb");return Ke()[a]=()=>{gapi.load?s():t(Gt(n,"network-request-failed"))},dm(`${LU()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw uu=null,e})}let uu=null;function c2(n){return uu=uu||u2(n),uu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new za(5e3,15e3),f2="__/auth/iframe",h2="emulator/auth/iframe",p2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g2(n){const e=n.config;Y(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?lm(e,h2):`https://${n.config.authDomain}/${f2}`,r={apiKey:e.apiKey,appName:n.name,v:Ui},i=m2.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Qo(r).slice(1)}`}async function y2(n){const e=await c2(n),t=Ke().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:g2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p2,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Gt(n,"network-request-failed"),a=Ke().setTimeout(()=>{o(s)},d2.get());function l(){Ke().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_2=500,E2=600,T2="_blank",w2="http://localhost";class gE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function C2(n,e,t,r=_2,i=E2){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},v2),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Tt().toLowerCase();t&&(a=AC(c)?T2:t),IC(c)&&(e=e||w2,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[v,T])=>`${g}${v}=${T},`,"");if(SU(c)&&a!=="_self")return I2(e||"",a),new gE(null);const m=window.open(e||"",a,h);Y(m,n,"popup-blocked");try{m.focus()}catch{}return new gE(m)}function I2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="__/auth/handler",A2="emulator/auth/handler",R2=encodeURIComponent("fac");async function yE(n,e,t,r,i,o){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ui,eventId:i};if(e instanceof LC){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Kb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))s[h]=m}if(e instanceof Ga){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${R2}=${encodeURIComponent(l)}`:"";return`${P2(n)}?${Qo(a).slice(1)}${c}`}function P2({config:n}){return n.emulator?lm(n,A2):`https://${n.authDomain}/${S2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="webStorageSupport";class k2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zC,this._completeRedirectFn=jF,this._overrideRedirectResult=QF}async _openPopup(e,t,r,i){var o;ir((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await yE(e,t,r,Oh(),i);return C2(e,s,hm())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await yE(e,t,r,Oh(),i);return gF(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ir(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await y2(e),r=new t2(e);return t.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lf,{type:lf},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[lf];s!==void 0&&t(!!s),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=s2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NC()||SC()||cm()}}const x2=k2;var vE="@firebase/auth",_E="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D2(n){Ri(new Hr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(n)},c=new NU(r,i,o,l);return BU(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ri(new Hr("auth-internal",e=>{const t=ei(e.getProvider("auth").getImmediate());return(r=>new N2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(vE,_E,M2(n)),Sn(vE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=5*60,L2=aC("authIdTokenMaxAge")||V2;let EE=null;const b2=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>L2)return;const i=t==null?void 0:t.token;EE!==i&&(EE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function O2(n=om()){const e=Dc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=FU(n,{popupRedirectResolver:x2,persistence:[SF,hF,zC]}),r=aC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=b2(o.toString());aF(t,s,()=>s(t.currentUser)),sF(t,a=>s(a))}}const i=iC("auth");return i&&$U(t,`http://${i}`),t}function U2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}MU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Gt("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",U2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D2("Browser");var TE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,YC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,E){function w(){}w.prototype=E.prototype,P.D=E.prototype,P.prototype=new w,P.prototype.constructor=P,P.C=function(A,M,V){for(var x=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)x[Oe-2]=arguments[Oe];return E.prototype[M].apply(A,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,E,w){w||(w=0);var A=Array(16);if(typeof E=="string")for(var M=0;16>M;++M)A[M]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(M=0;16>M;++M)A[M]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;E=P.g[0],w=P.g[1],M=P.g[2];var V=P.g[3],x=E+(V^w&(M^V))+A[0]+3614090360&4294967295;E=w+(x<<7&4294967295|x>>>25),x=V+(M^E&(w^M))+A[1]+3905402710&4294967295,V=E+(x<<12&4294967295|x>>>20),x=M+(w^V&(E^w))+A[2]+606105819&4294967295,M=V+(x<<17&4294967295|x>>>15),x=w+(E^M&(V^E))+A[3]+3250441966&4294967295,w=M+(x<<22&4294967295|x>>>10),x=E+(V^w&(M^V))+A[4]+4118548399&4294967295,E=w+(x<<7&4294967295|x>>>25),x=V+(M^E&(w^M))+A[5]+1200080426&4294967295,V=E+(x<<12&4294967295|x>>>20),x=M+(w^V&(E^w))+A[6]+2821735955&4294967295,M=V+(x<<17&4294967295|x>>>15),x=w+(E^M&(V^E))+A[7]+4249261313&4294967295,w=M+(x<<22&4294967295|x>>>10),x=E+(V^w&(M^V))+A[8]+1770035416&4294967295,E=w+(x<<7&4294967295|x>>>25),x=V+(M^E&(w^M))+A[9]+2336552879&4294967295,V=E+(x<<12&4294967295|x>>>20),x=M+(w^V&(E^w))+A[10]+4294925233&4294967295,M=V+(x<<17&4294967295|x>>>15),x=w+(E^M&(V^E))+A[11]+2304563134&4294967295,w=M+(x<<22&4294967295|x>>>10),x=E+(V^w&(M^V))+A[12]+1804603682&4294967295,E=w+(x<<7&4294967295|x>>>25),x=V+(M^E&(w^M))+A[13]+4254626195&4294967295,V=E+(x<<12&4294967295|x>>>20),x=M+(w^V&(E^w))+A[14]+2792965006&4294967295,M=V+(x<<17&4294967295|x>>>15),x=w+(E^M&(V^E))+A[15]+1236535329&4294967295,w=M+(x<<22&4294967295|x>>>10),x=E+(M^V&(w^M))+A[1]+4129170786&4294967295,E=w+(x<<5&4294967295|x>>>27),x=V+(w^M&(E^w))+A[6]+3225465664&4294967295,V=E+(x<<9&4294967295|x>>>23),x=M+(E^w&(V^E))+A[11]+643717713&4294967295,M=V+(x<<14&4294967295|x>>>18),x=w+(V^E&(M^V))+A[0]+3921069994&4294967295,w=M+(x<<20&4294967295|x>>>12),x=E+(M^V&(w^M))+A[5]+3593408605&4294967295,E=w+(x<<5&4294967295|x>>>27),x=V+(w^M&(E^w))+A[10]+38016083&4294967295,V=E+(x<<9&4294967295|x>>>23),x=M+(E^w&(V^E))+A[15]+3634488961&4294967295,M=V+(x<<14&4294967295|x>>>18),x=w+(V^E&(M^V))+A[4]+3889429448&4294967295,w=M+(x<<20&4294967295|x>>>12),x=E+(M^V&(w^M))+A[9]+568446438&4294967295,E=w+(x<<5&4294967295|x>>>27),x=V+(w^M&(E^w))+A[14]+3275163606&4294967295,V=E+(x<<9&4294967295|x>>>23),x=M+(E^w&(V^E))+A[3]+4107603335&4294967295,M=V+(x<<14&4294967295|x>>>18),x=w+(V^E&(M^V))+A[8]+1163531501&4294967295,w=M+(x<<20&4294967295|x>>>12),x=E+(M^V&(w^M))+A[13]+2850285829&4294967295,E=w+(x<<5&4294967295|x>>>27),x=V+(w^M&(E^w))+A[2]+4243563512&4294967295,V=E+(x<<9&4294967295|x>>>23),x=M+(E^w&(V^E))+A[7]+1735328473&4294967295,M=V+(x<<14&4294967295|x>>>18),x=w+(V^E&(M^V))+A[12]+2368359562&4294967295,w=M+(x<<20&4294967295|x>>>12),x=E+(w^M^V)+A[5]+4294588738&4294967295,E=w+(x<<4&4294967295|x>>>28),x=V+(E^w^M)+A[8]+2272392833&4294967295,V=E+(x<<11&4294967295|x>>>21),x=M+(V^E^w)+A[11]+1839030562&4294967295,M=V+(x<<16&4294967295|x>>>16),x=w+(M^V^E)+A[14]+4259657740&4294967295,w=M+(x<<23&4294967295|x>>>9),x=E+(w^M^V)+A[1]+2763975236&4294967295,E=w+(x<<4&4294967295|x>>>28),x=V+(E^w^M)+A[4]+1272893353&4294967295,V=E+(x<<11&4294967295|x>>>21),x=M+(V^E^w)+A[7]+4139469664&4294967295,M=V+(x<<16&4294967295|x>>>16),x=w+(M^V^E)+A[10]+3200236656&4294967295,w=M+(x<<23&4294967295|x>>>9),x=E+(w^M^V)+A[13]+681279174&4294967295,E=w+(x<<4&4294967295|x>>>28),x=V+(E^w^M)+A[0]+3936430074&4294967295,V=E+(x<<11&4294967295|x>>>21),x=M+(V^E^w)+A[3]+3572445317&4294967295,M=V+(x<<16&4294967295|x>>>16),x=w+(M^V^E)+A[6]+76029189&4294967295,w=M+(x<<23&4294967295|x>>>9),x=E+(w^M^V)+A[9]+3654602809&4294967295,E=w+(x<<4&4294967295|x>>>28),x=V+(E^w^M)+A[12]+3873151461&4294967295,V=E+(x<<11&4294967295|x>>>21),x=M+(V^E^w)+A[15]+530742520&4294967295,M=V+(x<<16&4294967295|x>>>16),x=w+(M^V^E)+A[2]+3299628645&4294967295,w=M+(x<<23&4294967295|x>>>9),x=E+(M^(w|~V))+A[0]+4096336452&4294967295,E=w+(x<<6&4294967295|x>>>26),x=V+(w^(E|~M))+A[7]+1126891415&4294967295,V=E+(x<<10&4294967295|x>>>22),x=M+(E^(V|~w))+A[14]+2878612391&4294967295,M=V+(x<<15&4294967295|x>>>17),x=w+(V^(M|~E))+A[5]+4237533241&4294967295,w=M+(x<<21&4294967295|x>>>11),x=E+(M^(w|~V))+A[12]+1700485571&4294967295,E=w+(x<<6&4294967295|x>>>26),x=V+(w^(E|~M))+A[3]+2399980690&4294967295,V=E+(x<<10&4294967295|x>>>22),x=M+(E^(V|~w))+A[10]+4293915773&4294967295,M=V+(x<<15&4294967295|x>>>17),x=w+(V^(M|~E))+A[1]+2240044497&4294967295,w=M+(x<<21&4294967295|x>>>11),x=E+(M^(w|~V))+A[8]+1873313359&4294967295,E=w+(x<<6&4294967295|x>>>26),x=V+(w^(E|~M))+A[15]+4264355552&4294967295,V=E+(x<<10&4294967295|x>>>22),x=M+(E^(V|~w))+A[6]+2734768916&4294967295,M=V+(x<<15&4294967295|x>>>17),x=w+(V^(M|~E))+A[13]+1309151649&4294967295,w=M+(x<<21&4294967295|x>>>11),x=E+(M^(w|~V))+A[4]+4149444226&4294967295,E=w+(x<<6&4294967295|x>>>26),x=V+(w^(E|~M))+A[11]+3174756917&4294967295,V=E+(x<<10&4294967295|x>>>22),x=M+(E^(V|~w))+A[2]+718787259&4294967295,M=V+(x<<15&4294967295|x>>>17),x=w+(V^(M|~E))+A[9]+3951481745&4294967295,P.g[0]=P.g[0]+E&4294967295,P.g[1]=P.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+V&4294967295}r.prototype.u=function(P,E){E===void 0&&(E=P.length);for(var w=E-this.blockSize,A=this.B,M=this.h,V=0;V<E;){if(M==0)for(;V<=w;)i(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<E;)if(A[M++]=P.charCodeAt(V++),M==this.blockSize){i(this,A),M=0;break}}else for(;V<E;)if(A[M++]=P[V++],M==this.blockSize){i(this,A),M=0;break}}this.h=M,this.o+=E},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var E=1;E<P.length-8;++E)P[E]=0;var w=8*this.o;for(E=P.length-8;E<P.length;++E)P[E]=w&255,w/=256;for(this.u(P),P=Array(16),E=w=0;4>E;++E)for(var A=0;32>A;A+=8)P[w++]=this.g[E]>>>A&255;return P};function o(P,E){var w=a;return Object.prototype.hasOwnProperty.call(w,P)?w[P]:w[P]=E(P)}function s(P,E){this.h=E;for(var w=[],A=!0,M=P.length-1;0<=M;M--){var V=P[M]|0;A&&V==E||(w[M]=V,A=!1)}this.g=w}var a={};function l(P){return-128<=P&&128>P?o(P,function(E){return new s([E|0],0>E?-1:0)}):new s([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return m;if(0>P)return N(c(-P));for(var E=[],w=1,A=0;P>=w;A++)E[A]=P/w|0,w*=4294967296;return new s(E,0)}function h(P,E){if(P.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P.charAt(0)=="-")return N(h(P.substring(1),E));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(E,8)),A=m,M=0;M<P.length;M+=8){var V=Math.min(8,P.length-M),x=parseInt(P.substring(M,M+V),E);8>V?(V=c(Math.pow(E,V)),A=A.j(V).add(c(x))):(A=A.j(w),A=A.add(c(x)))}return A}var m=l(0),g=l(1),v=l(16777216);n=s.prototype,n.m=function(){if(k(this))return-N(this).m();for(var P=0,E=1,w=0;w<this.g.length;w++){var A=this.i(w);P+=(0<=A?A:4294967296+A)*E,E*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(T(this))return"0";if(k(this))return"-"+N(this).toString(P);for(var E=c(Math.pow(P,6)),w=this,A="";;){var M=D(w,E).g;w=S(w,M.j(E));var V=((0<w.g.length?w.g[0]:w.h)>>>0).toString(P);if(w=M,T(w))return V+A;for(;6>V.length;)V="0"+V;A=V+A}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function T(P){if(P.h!=0)return!1;for(var E=0;E<P.g.length;E++)if(P.g[E]!=0)return!1;return!0}function k(P){return P.h==-1}n.l=function(P){return P=S(this,P),k(P)?-1:T(P)?0:1};function N(P){for(var E=P.g.length,w=[],A=0;A<E;A++)w[A]=~P.g[A];return new s(w,~P.h).add(g)}n.abs=function(){return k(this)?N(this):this},n.add=function(P){for(var E=Math.max(this.g.length,P.g.length),w=[],A=0,M=0;M<=E;M++){var V=A+(this.i(M)&65535)+(P.i(M)&65535),x=(V>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);A=x>>>16,V&=65535,x&=65535,w[M]=x<<16|V}return new s(w,w[w.length-1]&-2147483648?-1:0)};function S(P,E){return P.add(N(E))}n.j=function(P){if(T(this)||T(P))return m;if(k(this))return k(P)?N(this).j(N(P)):N(N(this).j(P));if(k(P))return N(this.j(N(P)));if(0>this.l(v)&&0>P.l(v))return c(this.m()*P.m());for(var E=this.g.length+P.g.length,w=[],A=0;A<2*E;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var M=0;M<P.g.length;M++){var V=this.i(A)>>>16,x=this.i(A)&65535,Oe=P.i(M)>>>16,on=P.i(M)&65535;w[2*A+2*M]+=x*on,C(w,2*A+2*M),w[2*A+2*M+1]+=V*on,C(w,2*A+2*M+1),w[2*A+2*M+1]+=x*Oe,C(w,2*A+2*M+1),w[2*A+2*M+2]+=V*Oe,C(w,2*A+2*M+2)}for(A=0;A<E;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=E;A<2*E;A++)w[A]=0;return new s(w,0)};function C(P,E){for(;(P[E]&65535)!=P[E];)P[E+1]+=P[E]>>>16,P[E]&=65535,E++}function R(P,E){this.g=P,this.h=E}function D(P,E){if(T(E))throw Error("division by zero");if(T(P))return new R(m,m);if(k(P))return E=D(N(P),E),new R(N(E.g),N(E.h));if(k(E))return E=D(P,N(E)),new R(N(E.g),E.h);if(30<P.g.length){if(k(P)||k(E))throw Error("slowDivide_ only works with positive integers.");for(var w=g,A=E;0>=A.l(P);)w=O(w),A=O(A);var M=U(w,1),V=U(A,1);for(A=U(A,2),w=U(w,2);!T(A);){var x=V.add(A);0>=x.l(P)&&(M=M.add(w),V=x),A=U(A,1),w=U(w,1)}return E=S(P,M.j(E)),new R(M,E)}for(M=m;0<=P.l(E);){for(w=Math.max(1,Math.floor(P.m()/E.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),V=c(w),x=V.j(E);k(x)||0<x.l(P);)w-=A,V=c(w),x=V.j(E);T(V)&&(V=g),M=M.add(V),P=S(P,x)}return new R(M,P)}n.A=function(P){return D(this,P).h},n.and=function(P){for(var E=Math.max(this.g.length,P.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)&P.i(A);return new s(w,this.h&P.h)},n.or=function(P){for(var E=Math.max(this.g.length,P.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)|P.i(A);return new s(w,this.h|P.h)},n.xor=function(P){for(var E=Math.max(this.g.length,P.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)^P.i(A);return new s(w,this.h^P.h)};function O(P){for(var E=P.g.length+1,w=[],A=0;A<E;A++)w[A]=P.i(A)<<1|P.i(A-1)>>>31;return new s(w,P.h)}function U(P,E){var w=E>>5;E%=32;for(var A=P.g.length-w,M=[],V=0;V<A;V++)M[V]=0<E?P.i(V+w)>>>E|P.i(V+w+1)<<32-E:P.i(V+w);return new s(M,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YC=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=h,yi=s}).apply(typeof TE<"u"?TE:typeof self<"u"?self:typeof window<"u"?window:{});var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QC,Ls,XC,cu,Bh,ZC,jC,eI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,p,y){return d==Array.prototype||d==Object.prototype||(d[p]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ol=="object"&&Ol];for(var p=0;p<d.length;++p){var y=d[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(d,p){if(p)e:{var y=r;d=d.split(".");for(var _=0;_<d.length-1;_++){var L=d[_];if(!(L in y))break e;y=y[L]}d=d[d.length-1],_=y[d],p=p(_),p!=_&&p!=null&&e(y,d,{configurable:!0,writable:!0,value:p})}}function o(d,p){d instanceof String&&(d+="");var y=0,_=!1,L={next:function(){if(!_&&y<d.length){var b=y++;return{value:p(b,d[b]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return o(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(d){var p=typeof d;return p=p!="object"?p:d?Array.isArray(d)?"array":p:"null",p=="array"||p=="object"&&typeof d.length=="number"}function c(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function h(d,p,y){return d.call.apply(d.bind,arguments)}function m(d,p,y){if(!d)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),d.apply(p,L)}}return function(){return d.apply(p,arguments)}}function g(d,p,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function v(d,p){var y=Array.prototype.slice.call(arguments,1);return function(){var _=y.slice();return _.push.apply(_,arguments),d.apply(this,_)}}function T(d,p){function y(){}y.prototype=p.prototype,d.aa=p.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(_,L,b){for(var G=Array(arguments.length-2),we=2;we<arguments.length;we++)G[we-2]=arguments[we];return p.prototype[L].apply(_,G)}}function k(d){const p=d.length;if(0<p){const y=Array(p);for(let _=0;_<p;_++)y[_]=d[_];return y}return[]}function N(d,p){for(let y=1;y<arguments.length;y++){const _=arguments[y];if(l(_)){const L=d.length||0,b=_.length||0;d.length=L+b;for(let G=0;G<b;G++)d[L+G]=_[G]}else d.push(_)}}class S{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function C(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function D(d){return D[" "](d),d}D[" "]=function(){};var O=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function U(d,p,y){for(const _ in d)p.call(y,d[_],_,d)}function P(d,p){for(const y in d)p.call(void 0,d[y],y,d)}function E(d){const p={};for(const y in d)p[y]=d[y];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,p){let y,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(y in _)d[y]=_[y];for(let b=0;b<w.length;b++)y=w[b],Object.prototype.hasOwnProperty.call(_,y)&&(d[y]=_[y])}}function M(d){var p=1;d=d.split(":");const y=[];for(;0<p&&d.length;)y.push(d.shift()),p--;return d.length&&y.push(d.join(":")),y}function V(d){a.setTimeout(()=>{throw d},0)}function x(){var d=re;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class Oe{constructor(){this.h=this.g=null}add(p,y){const _=on.get();_.set(p,y),this.h?this.h.next=_:this.g=_,this.h=_}}var on=new S(()=>new ts,d=>d.reset());class ts{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Dn,W=!1,re=new Oe,ae=()=>{const d=a.Promise.resolve(void 0);Dn=()=>{d.then(Ne)}};var Ne=()=>{for(var d;d=x();){try{d.h.call(d.g)}catch(y){V(y)}var p=on;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}W=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var Vn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return d}();function Ln(d,p){if(ze.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,_=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(O){e:{try{D(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=d.fromElement:y=="mouseout"&&(p=d.toElement);this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:bn[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ln.aa.h.call(this)}}T(Ln,ze);var bn={2:"touch",3:"pen",4:"mouse"};Ln.prototype.h=function(){Ln.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var On="closure_listenable_"+(1e6*Math.random()|0),US=0;function FS(d,p,y,_,L){this.listener=d,this.proxy=null,this.src=p,this.type=y,this.capture=!!_,this.ha=L,this.key=++US,this.da=this.fa=!1}function ja(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function el(d){this.src=d,this.g={},this.h=0}el.prototype.add=function(d,p,y,_,L){var b=d.toString();d=this.g[b],d||(d=this.g[b]=[],this.h++);var G=rd(d,p,_,L);return-1<G?(p=d[G],y||(p.fa=!1)):(p=new FS(p,this.src,b,!!_,L),p.fa=y,d.push(p)),p};function nd(d,p){var y=p.type;if(y in d.g){var _=d.g[y],L=Array.prototype.indexOf.call(_,p,void 0),b;(b=0<=L)&&Array.prototype.splice.call(_,L,1),b&&(ja(p),d.g[y].length==0&&(delete d.g[y],d.h--))}}function rd(d,p,y,_){for(var L=0;L<d.length;++L){var b=d[L];if(!b.da&&b.listener==p&&b.capture==!!y&&b.ha==_)return L}return-1}var id="closure_lm_"+(1e6*Math.random()|0),od={};function jm(d,p,y,_,L){if(Array.isArray(p)){for(var b=0;b<p.length;b++)jm(d,p[b],y,_,L);return null}return y=ng(y),d&&d[On]?d.K(p,y,c(_)?!!_.capture:!1,L):BS(d,p,y,!1,_,L)}function BS(d,p,y,_,L,b){if(!p)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,we=ad(d);if(we||(d[id]=we=new el(d)),y=we.add(p,y,_,G,b),y.proxy)return y;if(_=$S(),y.proxy=_,_.src=d,_.listener=y,d.addEventListener)Vn||(L=G),L===void 0&&(L=!1),d.addEventListener(p.toString(),_,L);else if(d.attachEvent)d.attachEvent(tg(p.toString()),_);else if(d.addListener&&d.removeListener)d.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return y}function $S(){function d(y){return p.call(d.src,d.listener,y)}const p=zS;return d}function eg(d,p,y,_,L){if(Array.isArray(p))for(var b=0;b<p.length;b++)eg(d,p[b],y,_,L);else _=c(_)?!!_.capture:!!_,y=ng(y),d&&d[On]?(d=d.i,p=String(p).toString(),p in d.g&&(b=d.g[p],y=rd(b,y,_,L),-1<y&&(ja(b[y]),Array.prototype.splice.call(b,y,1),b.length==0&&(delete d.g[p],d.h--)))):d&&(d=ad(d))&&(p=d.g[p.toString()],d=-1,p&&(d=rd(p,y,_,L)),(y=-1<d?p[d]:null)&&sd(y))}function sd(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[On])nd(p.i,d);else{var y=d.type,_=d.proxy;p.removeEventListener?p.removeEventListener(y,_,d.capture):p.detachEvent?p.detachEvent(tg(y),_):p.addListener&&p.removeListener&&p.removeListener(_),(y=ad(p))?(nd(y,d),y.h==0&&(y.src=null,p[id]=null)):ja(d)}}}function tg(d){return d in od?od[d]:od[d]="on"+d}function zS(d,p){if(d.da)d=!0;else{p=new Ln(p,this);var y=d.listener,_=d.ha||d.src;d.fa&&sd(d),d=y.call(_,p)}return d}function ad(d){return d=d[id],d instanceof el?d:null}var ld="__closure_events_fn_"+(1e9*Math.random()>>>0);function ng(d){return typeof d=="function"?d:(d[ld]||(d[ld]=function(p){return d.handleEvent(p)}),d[ld])}function dt(){Te.call(this),this.i=new el(this),this.M=this,this.F=null}T(dt,Te),dt.prototype[On]=!0,dt.prototype.removeEventListener=function(d,p,y,_){eg(this,d,p,y,_)};function wt(d,p){var y,_=d.F;if(_)for(y=[];_;_=_.F)y.push(_);if(d=d.M,_=p.type||p,typeof p=="string")p=new ze(p,d);else if(p instanceof ze)p.target=p.target||d;else{var L=p;p=new ze(_,d),A(p,L)}if(L=!0,y)for(var b=y.length-1;0<=b;b--){var G=p.g=y[b];L=tl(G,_,!0,p)&&L}if(G=p.g=d,L=tl(G,_,!0,p)&&L,L=tl(G,_,!1,p)&&L,y)for(b=0;b<y.length;b++)G=p.g=y[b],L=tl(G,_,!1,p)&&L}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var d=this.i,p;for(p in d.g){for(var y=d.g[p],_=0;_<y.length;_++)ja(y[_]);delete d.g[p],d.h--}}this.F=null},dt.prototype.K=function(d,p,y,_){return this.i.add(String(d),p,!1,y,_)},dt.prototype.L=function(d,p,y,_){return this.i.add(String(d),p,!0,y,_)};function tl(d,p,y,_){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,b=0;b<p.length;++b){var G=p[b];if(G&&!G.da&&G.capture==y){var we=G.listener,rt=G.ha||G.src;G.fa&&nd(d.i,G),L=we.call(rt,_)!==!1&&L}}return L&&!_.defaultPrevented}function rg(d,p,y){if(typeof d=="function")y&&(d=g(d,y));else if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function ig(d){d.g=rg(()=>{d.g=null,d.i&&(d.i=!1,ig(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class qS extends Te{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ig(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(d){Te.call(this),this.h=d,this.g={}}T(ns,Te);var og=[];function sg(d){U(d.g,function(p,y){this.g.hasOwnProperty(y)&&sd(p)},d),d.g={}}ns.prototype.N=function(){ns.aa.N.call(this),sg(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ud=a.JSON.stringify,GS=a.JSON.parse,HS=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function cd(){}cd.prototype.h=null;function ag(d){return d.h||(d.h=d.i())}function lg(){}var rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){ze.call(this,"d")}T(dd,ze);function fd(){ze.call(this,"c")}T(fd,ze);var ni={},ug=null;function nl(){return ug=ug||new dt}ni.La="serverreachability";function cg(d){ze.call(this,ni.La,d)}T(cg,ze);function is(d){const p=nl();wt(p,new cg(p))}ni.STAT_EVENT="statevent";function dg(d,p){ze.call(this,ni.STAT_EVENT,d),this.stat=p}T(dg,ze);function Ct(d){const p=nl();wt(p,new dg(p,d))}ni.Ma="timingevent";function fg(d,p){ze.call(this,ni.Ma,d),this.size=p}T(fg,ze);function os(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function ss(){this.g=!0}ss.prototype.xa=function(){this.g=!1};function WS(d,p,y,_,L,b){d.info(function(){if(d.g)if(b)for(var G="",we=b.split("&"),rt=0;rt<we.length;rt++){var me=we[rt].split("=");if(1<me.length){var ft=me[0];me=me[1];var ht=ft.split("_");G=2<=ht.length&&ht[1]=="type"?G+(ft+"="+me+"&"):G+(ft+"=redacted&")}}else G=null;else G=b;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+p+`
`+y+`
`+G})}function KS(d,p,y,_,L,b,G){d.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+p+`
`+y+`
`+b+" "+G})}function qi(d,p,y,_){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+YS(d,y)+(_?" "+_:"")})}function JS(d,p){d.info(function(){return"TIMEOUT: "+p})}ss.prototype.info=function(){};function YS(d,p){if(!d.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var _=y[d];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var b=L[0];if(b!="noop"&&b!="stop"&&b!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return ud(y)}catch{return p}}var rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hd;function il(){}T(il,cd),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},hd=new il;function lr(d,p,y,_){this.j=d,this.i=p,this.l=y,this.R=_||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pg}function pg(){this.i=null,this.g="",this.h=!1}var mg={},pd={};function md(d,p,y){d.L=1,d.v=ll(Un(p)),d.m=y,d.P=!0,gg(d,null)}function gg(d,p){d.F=Date.now(),ol(d),d.A=Un(d.v);var y=d.A,_=d.R;Array.isArray(_)||(_=[String(_)]),xg(y.i,"t",_),d.C=0,y=d.j.J,d.h=new pg,d.g=Jg(d.j,y?p:null,!d.m),0<d.O&&(d.M=new qS(g(d.Y,d,d.g),d.O)),p=d.U,y=d.g,_=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(og[0]=L.toString()),L=og);for(var b=0;b<L.length;b++){var G=jm(y,L[b],_||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),is(),WS(d.i,d.u,d.A,d.l,d.R,d.m)}lr.prototype.ca=function(d){d=d.target;const p=this.M;p&&Fn(d)==3?p.j():this.Y(d)},lr.prototype.Y=function(d){try{if(d==this.g)e:{const ht=Fn(this.g);var p=this.g.Ba();const Wi=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||Og(this.g)))){this.J||ht!=4||p==7||(p==8||0>=Wi?is(3):is(2)),gd(this);var y=this.g.Z();this.X=y;t:if(yg(this)){var _=Og(this.g);d="";var L=_.length,b=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),as(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,d+=this.h.i.decode(_[p],{stream:!(b&&p==L-1)});_.length=0,this.h.g+=d,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=y==200,KS(this.i,this.u,this.A,this.l,this.R,ht,y),this.o){if(this.T&&!this.K){t:{if(this.g){var we,rt=this.g;if((we=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(we)){var me=we;break t}}me=null}if(y=me)qi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yd(this,y);else{this.o=!1,this.s=3,Ct(12),ri(this),as(this);break e}}if(this.P){y=!0;let sn;for(;!this.J&&this.C<G.length;)if(sn=QS(this,G),sn==pd){ht==4&&(this.s=4,Ct(14),y=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==mg){this.s=4,Ct(15),qi(this.i,this.l,G,"[Invalid Chunk]"),y=!1;break}else qi(this.i,this.l,sn,null),yd(this,sn);if(yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||G.length!=0||this.h.h||(this.s=1,Ct(16),y=!1),this.o=this.o&&y,!y)qi(this.i,this.l,G,"[Invalid Chunked Response]"),ri(this),as(this);else if(0<G.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Cd(ft),ft.M=!0,Ct(11))}}else qi(this.i,this.l,G,null),yd(this,G);ht==4&&ri(this),this.o&&!this.J&&(ht==4?Gg(this.j,this):(this.o=!1,ol(this)))}else hA(this.g),y==400&&0<G.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),ri(this),as(this)}}}catch{}finally{}};function yg(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function QS(d,p){var y=d.C,_=p.indexOf(`
`,y);return _==-1?pd:(y=Number(p.substring(y,_)),isNaN(y)?mg:(_+=1,_+y>p.length?pd:(p=p.slice(_,_+y),d.C=_+y,p)))}lr.prototype.cancel=function(){this.J=!0,ri(this)};function ol(d){d.S=Date.now()+d.I,vg(d,d.I)}function vg(d,p){if(d.B!=null)throw Error("WatchDog timer not null");d.B=os(g(d.ba,d),p)}function gd(d){d.B&&(a.clearTimeout(d.B),d.B=null)}lr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(JS(this.i,this.A),this.L!=2&&(is(),Ct(17)),ri(this),this.s=2,as(this)):vg(this,this.S-d)};function as(d){d.j.G==0||d.J||Gg(d.j,d)}function ri(d){gd(d);var p=d.M;p&&typeof p.ma=="function"&&p.ma(),d.M=null,sg(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function yd(d,p){try{var y=d.j;if(y.G!=0&&(y.g==d||vd(y.h,d))){if(!d.K&&vd(y.h,d)&&y.G==3){try{var _=y.Da.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)pl(y),fl(y);else break e;wd(y),Ct(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=os(g(y.Za,y),6e3));if(1>=Tg(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else oi(y,11)}else if((d.K||y.g==d)&&pl(y),!C(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let me=L[p];if(y.T=me[0],me=me[1],y.G==2)if(me[0]=="c"){y.K=me[1],y.ia=me[2];const ft=me[3];ft!=null&&(y.la=ft,y.j.info("VER="+y.la));const ht=me[4];ht!=null&&(y.Aa=ht,y.j.info("SVER="+y.Aa));const Wi=me[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(_=1.5*Wi,y.L=_,y.j.info("backChannelRequestTimeoutMs_="+_)),_=y;const sn=d.g;if(sn){const gl=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var b=_.h;b.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(_d(b,b.h),b.h=null))}if(_.D){const Id=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(_.ya=Id,Ie(_.I,_.D,Id))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),_=y;var G=d;if(_.qa=Kg(_,_.J?_.ia:null,_.W),G.K){wg(_.h,G);var we=G,rt=_.L;rt&&(we.I=rt),we.B&&(gd(we),ol(we)),_.g=G}else zg(_);0<y.i.length&&hl(y)}else me[0]!="stop"&&me[0]!="close"||oi(y,7);else y.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?oi(y,7):Td(y):me[0]!="noop"&&y.l&&y.l.ta(me),y.v=0)}}is(4)}catch{}}var XS=class{constructor(d,p){this.g=d,this.map=p}};function _g(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Eg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Tg(d){return d.h?1:d.g?d.g.size:0}function vd(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function _d(d,p){d.g?d.g.add(p):d.h=p}function wg(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}_g.prototype.cancel=function(){if(this.i=Cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Cg(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const y of d.g.values())p=p.concat(y.D);return p}return k(d.i)}function ZS(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var p=[],y=d.length,_=0;_<y;_++)p.push(d[_]);return p}p=[],y=0;for(_ in d)p[y++]=d[_];return p}function jS(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var p=[];d=d.length;for(var y=0;y<d;y++)p.push(y);return p}p=[],y=0;for(const _ in d)p[y++]=_;return p}}}function Ig(d,p){if(d.forEach&&typeof d.forEach=="function")d.forEach(p,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,p,void 0);else for(var y=jS(d),_=ZS(d),L=_.length,b=0;b<L;b++)p.call(void 0,_[b],y&&y[b],d)}var Sg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eA(d,p){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var _=d[y].indexOf("="),L=null;if(0<=_){var b=d[y].substring(0,_);L=d[y].substring(_+1)}else b=d[y];p(b,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ii(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ii){this.h=d.h,sl(this,d.j),this.o=d.o,this.g=d.g,al(this,d.s),this.l=d.l;var p=d.i,y=new cs;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Ag(this,y),this.m=d.m}else d&&(p=String(d).match(Sg))?(this.h=!1,sl(this,p[1]||"",!0),this.o=ls(p[2]||""),this.g=ls(p[3]||"",!0),al(this,p[4]),this.l=ls(p[5]||"",!0),Ag(this,p[6]||"",!0),this.m=ls(p[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}ii.prototype.toString=function(){var d=[],p=this.j;p&&d.push(us(p,Rg,!0),":");var y=this.g;return(y||p=="file")&&(d.push("//"),(p=this.o)&&d.push(us(p,Rg,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(us(y,y.charAt(0)=="/"?rA:nA,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",us(y,oA)),d.join("")};function Un(d){return new ii(d)}function sl(d,p,y){d.j=y?ls(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function al(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function Ag(d,p,y){p instanceof cs?(d.i=p,sA(d.i,d.h)):(y||(p=us(p,iA)),d.i=new cs(p,d.h))}function Ie(d,p,y){d.i.set(p,y)}function ll(d){return Ie(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ls(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function us(d,p,y){return typeof d=="string"?(d=encodeURI(d).replace(p,tA),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function tA(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Rg=/[#\/\?@]/g,nA=/[#\?:]/g,rA=/[#\?]/g,iA=/[#\?@]/g,oA=/#/g;function cs(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function ur(d){d.g||(d.g=new Map,d.h=0,d.i&&eA(d.i,function(p,y){d.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=cs.prototype,n.add=function(d,p){ur(this),this.i=null,d=Gi(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(p),this.h+=1,this};function Pg(d,p){ur(d),p=Gi(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function kg(d,p){return ur(d),p=Gi(d,p),d.g.has(p)}n.forEach=function(d,p){ur(this),this.g.forEach(function(y,_){y.forEach(function(L){d.call(p,L,_,this)},this)},this)},n.na=function(){ur(this);const d=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let _=0;_<p.length;_++){const L=d[_];for(let b=0;b<L.length;b++)y.push(p[_])}return y},n.V=function(d){ur(this);let p=[];if(typeof d=="string")kg(this,d)&&(p=p.concat(this.g.get(Gi(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)p=p.concat(d[y])}return p},n.set=function(d,p){return ur(this),this.i=null,d=Gi(this,d),kg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},n.get=function(d,p){return d?(d=this.V(d),0<d.length?String(d[0]):p):p};function xg(d,p,y){Pg(d,p),0<y.length&&(d.i=null,d.g.set(Gi(d,p),k(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var _=p[y];const b=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var L=b;G[_]!==""&&(L+="="+encodeURIComponent(String(G[_]))),d.push(L)}}return this.i=d.join("&")};function Gi(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function sA(d,p){p&&!d.j&&(ur(d),d.i=null,d.g.forEach(function(y,_){var L=_.toLowerCase();_!=L&&(Pg(this,_),xg(this,L,y))},d)),d.j=p}function aA(d,p){const y=new ss;if(a.Image){const _=new Image;_.onload=v(cr,y,"TestLoadImage: loaded",!0,p,_),_.onerror=v(cr,y,"TestLoadImage: error",!1,p,_),_.onabort=v(cr,y,"TestLoadImage: abort",!1,p,_),_.ontimeout=v(cr,y,"TestLoadImage: timeout",!1,p,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=d}else p(!1)}function lA(d,p){const y=new ss,_=new AbortController,L=setTimeout(()=>{_.abort(),cr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:_.signal}).then(b=>{clearTimeout(L),b.ok?cr(y,"TestPingServer: ok",!0,p):cr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),cr(y,"TestPingServer: error",!1,p)})}function cr(d,p,y,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(y)}catch{}}function uA(){this.g=new HS}function cA(d,p,y){const _=y||"";try{Ig(d,function(L,b){let G=L;c(L)&&(G=ud(L)),p.push(_+b+"="+encodeURIComponent(G))})}catch(L){throw p.push(_+"type="+encodeURIComponent("_badmap")),L}}function ul(d){this.l=d.Ub||null,this.j=d.eb||!1}T(ul,cd),ul.prototype.g=function(){return new cl(this.l,this.j)},ul.prototype.i=function(d){return function(){return d}}({});function cl(d,p){dt.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(cl,dt),n=cl.prototype,n.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,fs(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ng(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ng(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?ds(this):fs(this),this.readyState==3&&Ng(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ds(this))},n.Qa=function(d){this.g&&(this.response=d,ds(this))},n.ga=function(){this.g&&ds(this)};function ds(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fs(d)}n.setRequestHeader=function(d,p){this.u.append(d,p)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=p.next();return d.join(`\r
`)};function fs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Mg(d){let p="";return U(d,function(y,_){p+=_,p+=":",p+=y,p+=`\r
`}),p}function Ed(d,p,y){e:{for(_ in y){var _=!1;break e}_=!0}_||(y=Mg(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):Ie(d,p,y))}function Ue(d){dt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ue,dt);var dA=/^https?$/i,fA=["POST","PUT"];n=Ue.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,p,y,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hd.g(),this.v=this.o?ag(this.o):ag(hd),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(b){Dg(this,b);return}if(d=y||"",y=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)y.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const b of _.keys())y.set(b,_.get(b));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(y.keys()).find(b=>b.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fA,p,void 0))||_||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,G]of y)this.g.setRequestHeader(b,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bg(this),this.u=!0,this.g.send(d),this.u=!1}catch(b){Dg(this,b)}};function Dg(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,Vg(d),dl(d)}function Vg(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,wt(this,"complete"),wt(this,"abort"),dl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dl(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Lg(this):this.bb())},n.bb=function(){Lg(this)};function Lg(d){if(d.h&&typeof s<"u"&&(!d.v[1]||Fn(d)!=4||d.Z()!=2)){if(d.u&&Fn(d)==4)rg(d.Ea,0,d);else if(wt(d,"readystatechange"),Fn(d)==4){d.h=!1;try{const G=d.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var _;if(_=G===0){var L=String(d.D).match(Sg)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),_=!dA.test(L?L.toLowerCase():"")}y=_}if(y)wt(d,"complete"),wt(d,"success");else{d.m=6;try{var b=2<Fn(d)?d.g.statusText:""}catch{b=""}d.l=b+" ["+d.Z()+"]",Vg(d)}}finally{dl(d)}}}}function dl(d,p){if(d.g){bg(d);const y=d.g,_=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||wt(d,"ready");try{y.onreadystatechange=_}catch{}}}function bg(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Fn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),GS(p)}};function Og(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hA(d){const p={};d=(d.g&&2<=Fn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<d.length;_++){if(C(d[_]))continue;var y=M(d[_]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const b=p[L]||[];p[L]=b,b.push(y)}P(p,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(d,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||p}function Ug(d){this.Aa=0,this.i=[],this.j=new ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,d),this.cb=hs("retryDelaySeedMs",1e4,d),this.Wa=hs("forwardChannelMaxRetries",2,d),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new _g(d&&d.concurrentRequestLimit),this.Da=new uA,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ug.prototype,n.la=8,n.G=1,n.connect=function(d,p,y,_){Ct(0),this.W=d,this.H=p||{},y&&_!==void 0&&(this.H.OSID=y,this.H.OAID=_),this.F=this.X,this.I=Kg(this,null,this.W),hl(this)};function Td(d){if(Fg(d),d.G==3){var p=d.U++,y=Un(d.I);if(Ie(y,"SID",d.K),Ie(y,"RID",p),Ie(y,"TYPE","terminate"),ps(d,y),p=new lr(d,d.j,p),p.L=2,p.v=ll(Un(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=Jg(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ol(p)}Wg(d)}function fl(d){d.g&&(Cd(d),d.g.cancel(),d.g=null)}function Fg(d){fl(d),d.u&&(a.clearTimeout(d.u),d.u=null),pl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function hl(d){if(!Eg(d.h)&&!d.s){d.s=!0;var p=d.Ga;Dn||ae(),W||(Dn(),W=!0),re.add(p,d),d.B=0}}function pA(d,p){return Tg(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=p.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=os(g(d.Ga,d,p),Hg(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new lr(this,this.j,d);let b=this.o;if(this.S&&(b?(b=E(b),A(b,this.S)):b=this.S),this.m!==null||this.O||(L.H=b,b=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var _=this.i[y];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=$g(this,L,p),y=Un(this.I),Ie(y,"RID",d),Ie(y,"CVER",22),this.D&&Ie(y,"X-HTTP-Session-Id",this.D),ps(this,y),b&&(this.O?p="headers="+encodeURIComponent(String(Mg(b)))+"&"+p:this.m&&Ed(y,this.m,b)),_d(this.h,L),this.Ua&&Ie(y,"TYPE","init"),this.P?(Ie(y,"$req",p),Ie(y,"SID","null"),L.T=!0,md(L,y,null)):md(L,y,p),this.G=2}}else this.G==3&&(d?Bg(this,d):this.i.length==0||Eg(this.h)||Bg(this))};function Bg(d,p){var y;p?y=p.l:y=d.U++;const _=Un(d.I);Ie(_,"SID",d.K),Ie(_,"RID",y),Ie(_,"AID",d.T),ps(d,_),d.m&&d.o&&Ed(_,d.m,d.o),y=new lr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),p&&(d.i=p.D.concat(d.i)),p=$g(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),_d(d.h,y),md(y,_,p)}function ps(d,p){d.H&&U(d.H,function(y,_){Ie(p,_,y)}),d.l&&Ig({},function(y,_){Ie(p,_,y)})}function $g(d,p,y){y=Math.min(d.i.length,y);var _=d.l?g(d.l.Na,d.l,d):null;e:{var L=d.i;let b=-1;for(;;){const G=["count="+y];b==-1?0<y?(b=L[0].g,G.push("ofs="+b)):b=0:G.push("ofs="+b);let we=!0;for(let rt=0;rt<y;rt++){let me=L[rt].g;const ft=L[rt].map;if(me-=b,0>me)b=Math.max(0,L[rt].g-100),we=!1;else try{cA(ft,G,"req"+me+"_")}catch{_&&_(ft)}}if(we){_=G.join("&");break e}}}return d=d.i.splice(0,y),p.D=d,_}function zg(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;Dn||ae(),W||(Dn(),W=!0),re.add(p,d),d.v=0}}function wd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=os(g(d.Fa,d),Hg(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,qg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=os(g(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),fl(this),qg(this))};function Cd(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function qg(d){d.g=new lr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var p=Un(d.qa);Ie(p,"RID","rpc"),Ie(p,"SID",d.K),Ie(p,"AID",d.T),Ie(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ie(p,"TO",d.ja),Ie(p,"TYPE","xmlhttp"),ps(d,p),d.m&&d.o&&Ed(p,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=ll(Un(p)),y.m=null,y.P=!0,gg(y,d)}n.Za=function(){this.C!=null&&(this.C=null,fl(this),wd(this),Ct(19))};function pl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Gg(d,p){var y=null;if(d.g==p){pl(d),Cd(d),d.g=null;var _=2}else if(vd(d.h,p))y=p.D,wg(d.h,p),_=1;else return;if(d.G!=0){if(p.o)if(_==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=d.B;_=nl(),wt(_,new fg(_,y)),hl(d)}else zg(d);else if(L=p.s,L==3||L==0&&0<p.X||!(_==1&&pA(d,p)||_==2&&wd(d)))switch(y&&0<y.length&&(p=d.h,p.i=p.i.concat(y)),L){case 1:oi(d,5);break;case 4:oi(d,10);break;case 3:oi(d,6);break;default:oi(d,2)}}}function Hg(d,p){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*p}function oi(d,p){if(d.j.info("Error code "+p),p==2){var y=g(d.fb,d),_=d.Xa;const L=!_;_=new ii(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sl(_,"https"),ll(_),L?aA(_.toString(),y):lA(_.toString(),y)}else Ct(2);d.G=0,d.l&&d.l.sa(p),Wg(d),Fg(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Wg(d){if(d.G=0,d.ka=[],d.l){const p=Cg(d.h);(p.length!=0||d.i.length!=0)&&(N(d.ka,p),N(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function Kg(d,p,y){var _=y instanceof ii?Un(y):new ii(y);if(_.g!="")p&&(_.g=p+"."+_.g),al(_,_.s);else{var L=a.location;_=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var b=new ii(null);_&&sl(b,_),p&&(b.g=p),L&&al(b,L),y&&(b.l=y),_=b}return y=d.D,p=d.ya,y&&p&&Ie(_,y,p),Ie(_,"VER",d.la),ps(d,_),_}function Jg(d,p,y){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Ca&&!d.pa?new Ue(new ul({eb:y})):new Ue(d.pa),p.Ha(d.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yg(){}n=Yg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ml(){}ml.prototype.g=function(d,p){return new Ut(d,p)};function Ut(d,p){dt.call(this),this.g=new Ug(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!C(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.D=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new Hi(this)}T(Ut,dt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Td(this.g)},Ut.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=ud(d),d=y);p.i.push(new XS(p.Ya++,d)),p.G==3&&hl(p)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Td(this.g),delete this.g,Ut.aa.N.call(this)};function Qg(d){dd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const y in p){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}T(Qg,dd);function Xg(){fd.call(this),this.status=1}T(Xg,fd);function Hi(d){this.g=d}T(Hi,Yg),Hi.prototype.ua=function(){wt(this.g,"a")},Hi.prototype.ta=function(d){wt(this.g,new Qg(d))},Hi.prototype.sa=function(d){wt(this.g,new Xg)},Hi.prototype.ra=function(){wt(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,eI=function(){return new ml},jC=function(){return nl()},ZC=ni,Bh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rl.NO_ERROR=0,rl.TIMEOUT=8,rl.HTTP_ERROR=6,cu=rl,hg.COMPLETE="complete",XC=hg,lg.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ls=lg,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,QC=Ue}).apply(typeof Ol<"u"?Ol:typeof self<"u"?self:typeof window<"u"?window:{});const wE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new rm("@firebase/firestore");function Is(){return ki.logLevel}function Q(n,...e){if(ki.logLevel<=de.DEBUG){const t=e.map(gm);ki.debug(`Firestore (${Zo}): ${n}`,...t)}}function or(n,...e){if(ki.logLevel<=de.ERROR){const t=e.map(gm);ki.error(`Firestore (${Zo}): ${n}`,...t)}}function Uo(n,...e){if(ki.logLevel<=de.WARN){const t=e.map(gm);ki.warn(`Firestore (${Zo}): ${n}`,...t)}}function gm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(n="Unexpected state"){const e=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: `+n;throw or(e),new Error(e)}function Ee(n,e){n||ne()}function se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Mn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}}class B2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $2{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let o=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new tI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new yt(e)}}class z2{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q2{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new z2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ee(this.o===void 0);const r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new G2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=W2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function ge(n,e){return n<e?-1:n>e?1:0}function Fo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new je(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new je(0,0))}static max(){return new oe(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(),r===void 0?r=e.length-t:r>e.length-t&&ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Aa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Aa?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ke extends Aa{construct(e,t,r){return new ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ke(t)}static emptyPath(){return new ke([])}}const K2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Aa{construct(e,t,r){return new st(e,t,r)}static isValidIdentifier(e){return K2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(t)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(ke.fromString(e))}static fromName(e){return new j(ke.fromString(e).popFirst(5))}static empty(){return new j(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new ke(e.slice()))}}function J2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new Wr(i,j.empty(),e)}function Y2(n){return new Wr(n.readTime,n.key,-1)}class Wr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wr(oe.min(),j.empty(),-1)}static max(){return new Wr(oe.max(),j.empty(),-1)}}function Q2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==X2)throw n;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,r)=>{t(e)})}static reject(e){return new $((t,r)=>{r(e)})}static waitFor(e){return new $((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next(i=>i?$.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new $((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;t(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new $((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function j2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ka(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ym.oe=-1;function Oc(n){return n==null}function rc(n){return n===0&&1/n==-1/0}function e4(n){return typeof n=="number"&&Number.isInteger(n)&&!rc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,t){this.comparator=e,this.root=t||ot.EMPTY}insert(e,t){return new be(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=o??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ot(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new $t([])}unionWith(e){let t=new lt(st.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $t(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iI("Invalid base64 string: "+o):o}}(e);return new ct(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const t4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(n){if(Ee(!!n),typeof n=="string"){let e=0;const t=t4.exec(n);if(Ee(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xi(n){return typeof n=="string"?ct.fromBase64String(n):ct.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function _m(n){const e=n.mapValue.fields.__previous_value__;return vm(e)?_m(e):e}function Ra(n){const e=Kr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,t,r,i,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Pa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl={mapValue:{}};function Ni(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vm(n)?4:i4(n)?9007199254740991:r4(n)?10:11:ne()}function kn(n,e){if(n===e)return!0;const t=Ni(n);if(t!==Ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ra(n).isEqual(Ra(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Kr(i.timestampValue),a=Kr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return xi(i.bytesValue).isEqual(xi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?rc(s)===rc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Fo(n.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(CE(s)!==CE(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!kn(s[l],a[l])))return!1;return!0}(n,e);default:return ne()}}function ka(n,e){return(n.values||[]).find(t=>kn(t,e))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Ni(n),r=Ni(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=qe(o.integerValue||o.doubleValue),l=qe(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return SE(n.timestampValue,e.timestampValue);case 4:return SE(Ra(n),Ra(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(o,s){const a=xi(o),l=xi(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ge(a[c],l[c]);if(h!==0)return h}return ge(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ge(qe(o.latitude),qe(s.latitude));return a!==0?a:ge(qe(o.longitude),qe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return AE(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,h;const m=o.fields||{},g=s.fields||{},v=(a=m.value)===null||a===void 0?void 0:a.arrayValue,T=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=ge(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:AE(v,T)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Fl.mapValue&&s===Fl.mapValue)return 0;if(o===Fl.mapValue)return 1;if(s===Fl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const g=ge(l[m],h[m]);if(g!==0)return g;const v=Bo(a[l[m]],c[h[m]]);if(v!==0)return v}return ge(l.length,h.length)}(n.mapValue,e.mapValue);default:throw ne()}}function SE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);const t=Kr(n),r=Kr(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function AE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Bo(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function $o(n){return $h(n)}function $h(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Kr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=$h(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${$h(t.fields[s])}`;return i+"}"}(n.mapValue):ne()}function zh(n){return!!n&&"integerValue"in n}function Em(n){return!!n&&"arrayValue"in n}function RE(n){return!!n&&"nullValue"in n}function PE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function du(n){return!!n&&"mapValue"in n}function r4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Zs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zs(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function i4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!du(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zs(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zs(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());du(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];du(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bi(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Nt(Zs(this.value))}}function oI(n){const e=[];return Bi(n.fields,(t,r)=>{const i=new st([t]);if(du(r)){const o=oI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,oe.min(),oe.min(),oe.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,i){return new _t(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new _t(e,2,t,oe.min(),oe.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,oe.min(),oe.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t){this.position=e,this.inclusive=t}}function kE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),t.key):r=Bo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function o4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{}class Xe extends sI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new a4(e,t,r):t==="array-contains"?new c4(e,r):t==="in"?new d4(e,r):t==="not-in"?new f4(e,r):t==="array-contains-any"?new h4(e,r):new Xe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new l4(e,r):new u4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bo(t,this.value)):t!==null&&Ni(this.value)===Ni(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends sI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new xn(e,t)}matches(e){return aI(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aI(n){return n.op==="and"}function lI(n){return s4(n)&&aI(n)}function s4(n){for(const e of n.filters)if(e instanceof xn)return!1;return!0}function qh(n){if(n instanceof Xe)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(lI(n))return n.filters.map(e=>qh(e)).join(",");{const e=n.filters.map(t=>qh(t)).join(",");return`${n.op}(${e})`}}function uI(n,e){return n instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(n,e):n instanceof xn?function(r,i){return i instanceof xn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&uI(s,i.filters[a]),!0):!1}(n,e):void ne()}function cI(n){return n instanceof Xe?function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`}(n):n instanceof xn?function(t){return t.op.toString()+" {"+t.getFilters().map(cI).join(" ,")+"}"}(n):"Filter"}class a4 extends Xe{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){const t=j.comparator(e.key,this.key);return this.matchesComparison(t)}}class l4 extends Xe{constructor(e,t){super(e,"in",t),this.keys=dI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class u4 extends Xe{constructor(e,t){super(e,"not-in",t),this.keys=dI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}class c4 extends Xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Em(t)&&ka(t.arrayValue,this.value)}}class d4 extends Xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ka(this.value.arrayValue,t)}}class f4 extends Xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ka(this.value.arrayValue,t)}}class h4 extends Xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Em(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function NE(n,e=null,t=[],r=[],i=null,o=null,s=null){return new p4(n,e,t,r,i,o,s)}function Tm(n){const e=se(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$o(r)).join(",")),e.ue=t}return e.ue}function wm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!o4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xE(n.startAt,e.startAt)&&xE(n.endAt,e.endAt)}function Gh(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function m4(n,e,t,r,i,o,s,a){return new Uc(n,e,t,r,i,o,s,a)}function Cm(n){return new Uc(n)}function ME(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function g4(n){return n.collectionGroup!==null}function js(n){const e=se(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new lt(st.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new oc(o,r))}),t.has(st.keyField().canonicalString())||e.ce.push(new oc(st.keyField(),r))}return e.ce}function An(n){const e=se(n);return e.le||(e.le=y4(e,js(n))),e.le}function y4(n,e){if(n.limitType==="F")return NE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new oc(i.field,o)});const t=n.endAt?new ic(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ic(n.startAt.position,n.startAt.inclusive):null;return NE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Hh(n,e,t){return new Uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fc(n,e){return wm(An(n),An(e))&&n.limitType===e.limitType}function fI(n){return`${Tm(An(n))}|lt:${n.limitType}`}function Qi(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>cI(i)).join(", ")}]`),Oc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$o(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$o(i)).join(",")),`Target(${r})`}(An(n))}; limitType=${n.limitType})`}function Bc(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of js(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=kE(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,js(r),i)||r.endAt&&!function(s,a,l){const c=kE(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,js(r),i))}(n,e)}function v4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hI(n){return(e,t)=>{let r=!1;for(const i of js(n)){const o=_4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _4(n,e,t){const r=n.field.isKeyField()?j.comparator(e.key,t.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?Bo(l,c):ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bi(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new be(j.comparator);function sr(){return E4}const pI=new be(j.comparator);function bs(...n){let e=pI;for(const t of n)e=e.insert(t.key,t);return e}function mI(n){let e=pI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pi(){return ea()}function gI(){return ea()}function ea(){return new jo(n=>n.toString(),(n,e)=>n.isEqual(e))}const T4=new be(j.comparator),w4=new lt(j.comparator);function ce(...n){let e=w4;for(const t of n)e=e.add(t);return e}const C4=new lt(ge);function I4(){return C4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function yI(n){return{integerValue:""+n}}function S4(n,e){return e4(e)?yI(e):Im(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function A4(n,e,t){return n instanceof xa?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vm(o)&&(o=_m(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Na?_I(n,e):n instanceof Ma?EI(n,e):function(i,o){const s=vI(i,o),a=DE(s)+DE(i.Pe);return zh(s)&&zh(i.Pe)?yI(a):Im(i.serializer,a)}(n,e)}function R4(n,e,t){return n instanceof Na?_I(n,e):n instanceof Ma?EI(n,e):t}function vI(n,e){return n instanceof sc?function(r){return zh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xa extends $c{}class Na extends $c{constructor(e){super(),this.elements=e}}function _I(n,e){const t=TI(e);for(const r of n.elements)t.some(i=>kn(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ma extends $c{constructor(e){super(),this.elements=e}}function EI(n,e){let t=TI(e);for(const r of n.elements)t=t.filter(i=>!kn(i,r));return{arrayValue:{values:t}}}class sc extends $c{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function DE(n){return qe(n.integerValue||n.doubleValue)}function TI(n){return Em(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,t){this.field=e,this.transform=t}}function k4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Na&&i instanceof Na||r instanceof Ma&&i instanceof Ma?Fo(r.elements,i.elements,kn):r instanceof sc&&i instanceof sc?kn(r.Pe,i.Pe):r instanceof xa&&i instanceof xa}(n.transform,e.transform)}class x4{constructor(e,t){this.version=e,this.transformResults=t}}class Ot{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ot}static exists(e){return new Ot(void 0,e)}static updateTime(e){return new Ot(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zc{}function wI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qc(n.key,Ot.none()):new Ja(n.key,n.data,Ot.none());{const t=n.data,r=Nt.empty();let i=new lt(st.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ti(n.key,r,new $t(i.toArray()),Ot.none())}}function N4(n,e,t){n instanceof Ja?function(i,o,s){const a=i.value.clone(),l=LE(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ti?function(i,o,s){if(!fu(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=LE(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(CI(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ta(n,e,t,r){return n instanceof Ja?function(o,s,a,l){if(!fu(o.precondition,s))return a;const c=o.value.clone(),h=bE(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof ti?function(o,s,a,l){if(!fu(o.precondition,s))return a;const c=bE(o.fieldTransforms,l,s),h=s.data;return h.setAll(CI(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(o,s,a){return fu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function M4(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=vI(r.transform,i||null);o!=null&&(t===null&&(t=Nt.empty()),t.set(r.field,o))}return t||null}function VE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fo(r,i,(o,s)=>k4(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ja extends zc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ti extends zc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function CI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function LE(n,e,t){const r=new Map;Ee(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,R4(s,a,t[i]))}return r}function bE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,A4(o,s,e))}return r}class qc extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D4 extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&N4(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ta(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ta(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gI();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const l=wI(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,(t,r)=>VE(t,r))&&Fo(this.baseMutations,e.baseMutations,(t,r)=>VE(t,r))}}class Sm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ee(e.mutations.length===r.length);let i=function(){return T4}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Sm(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,he;function O4(n){switch(n){default:return ne();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function II(n){if(n===void 0)return or("GRPC error has no .code"),B.UNKNOWN;switch(n){case He.OK:return B.OK;case He.CANCELLED:return B.CANCELLED;case He.UNKNOWN:return B.UNKNOWN;case He.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case He.INTERNAL:return B.INTERNAL;case He.UNAVAILABLE:return B.UNAVAILABLE;case He.UNAUTHENTICATED:return B.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case He.NOT_FOUND:return B.NOT_FOUND;case He.ALREADY_EXISTS:return B.ALREADY_EXISTS;case He.PERMISSION_DENIED:return B.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case He.ABORTED:return B.ABORTED;case He.OUT_OF_RANGE:return B.OUT_OF_RANGE;case He.UNIMPLEMENTED:return B.UNIMPLEMENTED;case He.DATA_LOSS:return B.DATA_LOSS;default:return ne()}}(he=He||(He={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new yi([4294967295,4294967295],0);function OE(n){const e=U4().encode(n),t=new YC;return t.update(e),new Uint8Array(t.digest())}function UE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yi([t,r],0),new yi([i,o],0)]}class Am{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Os(`Invalid padding: ${t}`);if(r<0)throw new Os(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Os(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Os(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(yi.fromNumber(r)));return i.compare(F4)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=OE(e),[r,i]=UE(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Am(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const t=OE(e),[r,i]=UE(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Os extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gc(oe.min(),i,new be(ge),sr(),ce())}}class Ya{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ya(r,t,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class SI{constructor(e,t){this.targetId=e,this.me=t}}class AI{constructor(e,t,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class FE{constructor(){this.fe=0,this.ge=$E(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ya(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$E()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class B4{constructor(e){this.Le=e,this.Be=new Map,this.ke=sr(),this.qe=BE(),this.Qe=new be(ge)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(Gh(o))if(r===0){const s=new j(o.path);this.Ue(t,s,_t.newNoDocument(s,oe.min()))}else Ee(r===1);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=xi(r).toUint8Array()}catch(l){if(l instanceof iI)return Uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Am(s,i,o)}catch(l){return Uo(l instanceof Os?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&Gh(a.target)){const l=new j(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,_t.newNoDocument(l,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Gc(e,t,this.Qe,this.ke,r);return this.ke=sr(),this.qe=BE(),this.Qe=new be(ge),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new FE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new lt(ge),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new FE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function BE(){return new be(j.comparator)}function $E(){return new be(j.comparator)}const $4={asc:"ASCENDING",desc:"DESCENDING"},z4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q4={and:"AND",or:"OR"};class G4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wh(n,e){return n.useProto3Json||Oc(e)?e:{value:e}}function ac(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function H4(n,e){return ac(n,e.toTimestamp())}function Rn(n){return Ee(!!n),oe.fromTimestamp(function(t){const r=Kr(t);return new je(r.seconds,r.nanos)}(n))}function Rm(n,e){return Kh(n,e).canonicalString()}function Kh(n,e){const t=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function PI(n){const e=ke.fromString(n);return Ee(DI(e)),e}function Jh(n,e){return Rm(n.databaseId,e.path)}function uf(n,e){const t=PI(e);if(t.get(1)!==n.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(xI(t))}function kI(n,e){return Rm(n.databaseId,e)}function W4(n){const e=PI(n);return e.length===4?ke.emptyPath():xI(e)}function Yh(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xI(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zE(n,e,t){return{name:Jh(n,e),fields:t.value.mapValue.fields}}function K4(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Ee(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=c.code===void 0?B.UNKNOWN:II(c.code);return new Z(h,c.message||"")}(s);t=new AI(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=uf(n,r.document.name),o=Rn(r.document.updateTime),s=r.document.createTime?Rn(r.document.createTime):oe.min(),a=new Nt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(i,o,s,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new hu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=uf(n,r.document),o=r.readTime?Rn(r.readTime):oe.min(),s=_t.newNoDocument(i,o),a=r.removedTargetIds||[];t=new hu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=uf(n,r.document),o=r.removedTargetIds||[];t=new hu([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new b4(i,o),a=r.targetId;t=new SI(a,s)}}return t}function J4(n,e){let t;if(e instanceof Ja)t={update:zE(n,e.key,e.value)};else if(e instanceof qc)t={delete:Jh(n,e.key)};else if(e instanceof ti)t={update:zE(n,e.key,e.data),updateMask:rB(e.fieldMask)};else{if(!(e instanceof D4))return ne();t={verify:Jh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof xa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ma)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:H4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(n,e.precondition)),t}function Y4(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Rn(i.updateTime):Rn(o);return s.isEqual(oe.min())&&(s=Rn(o)),new x4(s,i.transformResults||[])}(t,e))):[]}function Q4(n,e){return{documents:[kI(n,e.path)]}}function X4(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kI(n,i);const o=function(c){if(c.length!==0)return MI(xn.create(c,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Xi(g.field),direction:eB(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=Wh(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function Z4(n){let e=W4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ee(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(m){const g=NI(m);return g instanceof xn&&lI(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(m){return m.map(g=>function(T){return new oc(Zi(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,Oc(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(m){const g=!!m.before,v=m.values||[];return new ic(v,g)}(t.startAt));let c=null;return t.endAt&&(c=function(m){const g=!m.before,v=m.values||[];return new ic(v,g)}(t.endAt)),m4(e,i,s,o,a,"F",l,c)}function j4(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Zi(t.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(t.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zi(t.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Zi(t.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(t){return Xe.create(Zi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xn.create(t.compositeFilter.filters.map(r=>NI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(t.compositeFilter.op))}(n):ne()}function eB(n){return $4[n]}function tB(n){return z4[n]}function nB(n){return q4[n]}function Xi(n){return{fieldPath:n.canonicalString()}}function Zi(n){return st.fromServerFormat(n.fieldPath)}function MI(n){return n instanceof Xe?function(t){if(t.op==="=="){if(PE(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NAN"}};if(RE(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PE(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NOT_NAN"}};if(RE(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(t.field),op:tB(t.op),value:t.value}}}(n):n instanceof xn?function(t){const r=t.getFilters().map(i=>MI(i));return r.length===1?r[0]:{compositeFilter:{op:nB(t.op),filters:r}}}(n):ne()}function rB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,r,i,o=oe.min(),s=oe.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.ct=e}}function oB(n){const e=Z4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.un=new aB}addToCollectionParentIndex(e,t){return this.un.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Wr.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class aB{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new lt(ke.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zo(0)}static kn(){return new zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(){this.changes=new jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ta(r.mutation,i,$t.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){const i=pi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=bs();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=pi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=sr();const s=ea(),a=function(){return ea()}();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ti)?o=o.insert(c.key,c):h!==void 0?(s.set(c.key,h.mutation.getFieldMask()),ta(h.mutation,c,h.mutation.getFieldMask(),je.now())):s.set(c.key,$t.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),t.forEach((c,h)=>{var m;return a.set(c,new uB(h,(m=s.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=ea();let i=new be((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||$t.empty();h=a.applyToLocalView(c,h),r.set(l,h);const m=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,m=gI();h.forEach(g=>{if(!o.has(g)){const v=wI(t.get(g),r.get(g));v!==null&&m.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,m))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):$.resolve(pi());let a=-1,l=o;return s.next(c=>$.forEach(c,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:mI(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=bs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=bs();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,l=>{const c=function(m,g){return new Uc(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,g)=>{s=s.insert(m,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();s.get(h)===null&&(s=s.insert(h,_t.newInvalidDocument(h)))});let a=bs();return s.forEach((l,c)=>{const h=o.get(l);h!==void 0&&ta(h.mutation,c,$t.empty(),je.now()),Bc(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return $.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:oB(i.bundledQuery),readTime:Rn(i.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(){this.overlays=new be(j.comparator),this.Ir=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pi();return $.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),$.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const i=pi(),o=t.length+1,s=new j(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new be((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=pi(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=pi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return $.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new L4(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.Tr=new lt(et.Er),this.dr=new lt(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new j(new ke([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new j(new ke([])),r=new et(t,e),i=new et(t,e+1);let o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||ge(e.wr,t.wr)}static Ar(e,t){return ge(e.wr,t.wr)||j.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new lt(et.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new V4(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,t){return $.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(ge);return t.forEach(i=>{const o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;j.isDocumentKey(o)||(o=o.child(""));const s=new et(new j(o),0);let a=new lt(ge);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},s),$.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ee(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(t.mutations,i=>{const o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new et(t,0),i=this.br.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.Mr=e,this.docs=function(){return new be(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=sr();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_t.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=sr();const s=t.path,a=new j(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Q2(Y2(h),r)<=0||(i.has(h.key)||Bc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne()}Or(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gB(this)}getSize(e){return $.resolve(this.size)}}class gB extends lB{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.persistence=e,this.Nr=new jo(t=>Tm(t),wm),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pm,this.targetCount=0,this.kr=zo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),$.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Kn(t),$.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ym(0),this.Kr=!1,this.Kr=!0,this.$r=new hB,this.referenceDelegate=e(this),this.Ur=new yB(this),this.indexManager=new sB,this.remoteDocumentCache=function(i){return new mB(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iB(t),this.Gr=new dB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new pB(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Q("MemoryPersistence","Starting transaction:",e);const i=new _B(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class _B extends Z2{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Jr=new Pm,this.Yr=null}static Zr(e){return new km(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),$.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=j.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return $.or([()=>$.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new xm(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $b()?8:j2(Tt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new EB;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Is()<=de.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Qi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Is()<=de.DEBUG&&Q("QueryEngine","Query:",Qi(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Is()<=de.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Qi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):$.resolve())}Yi(e,t){if(ME(t))return $.resolve(null);let r=An(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Hh(t,null,"F"),r=An(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,s,l.readTime)?this.Yi(e,Hh(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return ME(t)||i.isEqual(oe.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(t,o);return this.ns(t,s,r,i)?$.resolve(null):(Is()<=de.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qi(t)),this.rs(e,s,t,J2(i,-1)).next(a=>a))})}ts(e,t){let r=new lt(hI(e));return t.forEach((i,o)=>{Bc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Is()<=de.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Qi(t)),this.Ji.getDocumentsMatchingQuery(e,t,Wr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new be(ge),this._s=new jo(o=>Tm(o),wm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function CB(n,e,t,r){return new wB(n,e,t,r)}async function VI(n,e){const t=se(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=ce();for(const c of i){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})}function IB(n,e){const t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const m=c.batch,g=m.keys();let v=$.resolve();return g.forEach(T=>{v=v.next(()=>h.getEntry(l,T)).next(k=>{const N=c.docVersions.get(T);Ee(N!==null),k.version.compareTo(N)<0&&(m.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),h.addEntry(k)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LI(n){const e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function SB(n,e){const t=se(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,m)=>{const g=i.get(m);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,m)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(ct.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),function(k,N,S){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let l=sr(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(AB(o,s,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(oe.min())){const h=t.Ur.getLastRemoteSnapshotVersion(o).next(m=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(t.os=i,o))}function AB(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=sr();return t.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function RB(n,e){const t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PB(n,e){const t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Rr(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Qh(n,e,t){const r=se(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ka(s))throw s;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qE(n,e,t){const r=se(n);let i=oe.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const m=se(l),g=m._s.get(h);return g!==void 0?$.resolve(m.os.get(g)):m.Ur.getTargetData(c,h)}(r,s,An(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:oe.min(),t?o:ce())).next(a=>(kB(r,v4(e),a),{documents:a,Ts:o})))}function kB(n,e,t){let r=n.us.get(e)||oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}class GE{constructor(){this.activeTargetIds=I4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xB{constructor(){this.so=new GE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new GE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl=null;function cf(){return Bl===null?Bl=function(){return 268435456+Math.round(2147483648*Math.random())}():Bl++,"0x"+Bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class VB extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){const a=cf(),l=this.xo(t,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(t,l,c,i).then(h=>(Q("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Uo("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){const i=MB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const o=cf();return new Promise((s,a)=>{const l=new QC;l.setWithCredentials(!0),l.listenOnce(XC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cu.NO_ERROR:const h=l.getResponseJson();Q(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case cu.TIMEOUT:Q(gt,`RPC '${e}' ${o} timed out`),a(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:const m=l.getStatus();if(Q(gt,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const T=function(N){const S=N.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(S)>=0?S:B.UNKNOWN}(v.status);a(new Z(T,v.message))}else a(new Z(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Z(B.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{Q(gt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Q(gt,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=cf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=eI(),a=jC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=o.join("");Q(gt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const m=s.createWebChannel(h,l);let g=!1,v=!1;const T=new DB({Io:N=>{v?Q(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(Q(gt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),Q(gt,`RPC '${e}' stream ${i} sending:`,N),m.send(N))},To:()=>m.close()}),k=(N,S,C)=>{N.listen(S,R=>{try{C(R)}catch(D){setTimeout(()=>{throw D},0)}})};return k(m,Ls.EventType.OPEN,()=>{v||(Q(gt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),k(m,Ls.EventType.CLOSE,()=>{v||(v=!0,Q(gt,`RPC '${e}' stream ${i} transport closed`),T.So())}),k(m,Ls.EventType.ERROR,N=>{v||(v=!0,Uo(gt,`RPC '${e}' stream ${i} transport errored:`,N),T.So(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),k(m,Ls.EventType.MESSAGE,N=>{var S;if(!v){const C=N.data[0];Ee(!!C);const R=C,D=R.error||((S=R[0])===null||S===void 0?void 0:S.error);if(D){Q(gt,`RPC '${e}' stream ${i} received error:`,D);const O=D.status;let U=function(w){const A=He[w];if(A!==void 0)return II(A)}(O),P=D.message;U===void 0&&(U=B.INTERNAL,P="Unknown error status: "+O+" with message "+D.message),v=!0,T.So(new Z(U,P)),m.close()}else Q(gt,`RPC '${e}' stream ${i} received:`,C),T.bo(C)}}),k(a,ZC.STAT_EVENT,N=>{N.stat===Bh.PROXY?Q(gt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Bh.NOPROXY&&Q(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n){return new G4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,t,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bI(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(or(t.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Z(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LB extends OI{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=K4(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?Rn(s.readTime):oe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Yh(this.serializer),t.addTarget=function(o,s){let a;const l=s.target;if(a=Gh(l)?{documents:Q4(o,l)}:{query:X4(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=RI(o,s.resumeToken);const c=Wh(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=ac(o,s.snapshotVersion.toTimestamp());const c=Wh(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=j4(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Yh(this.serializer),t.removeTarget=e,this.a_(t)}}class bB extends OI{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=Y4(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Yh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>J4(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Kh(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(B.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Kh(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(B.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class UB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(t),this.D_=!1):Q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{$i(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=se(l);c.L_.add(4),await Qa(c),c.q_.set("Unknown"),c.L_.delete(4),await Wc(c)}(this))})}),this.q_=new UB(r,i)}}async function Wc(n){if($i(n))for(const e of n.B_)await e(!0)}async function Qa(n){for(const e of n.B_)await e(!1)}function UI(n,e){const t=se(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Vm(t)?Dm(t):es(t).r_()&&Mm(t,e))}function Nm(n,e){const t=se(n),r=es(t);t.N_.delete(e),r.r_()&&FI(t,e),t.N_.size===0&&(r.r_()?r.o_():$i(t)&&t.q_.set("Unknown"))}function Mm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}es(n).A_(e)}function FI(n,e){n.Q_.xe(e),es(n).R_(e)}function Dm(n){n.Q_=new B4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),es(n).start(),n.q_.v_()}function Vm(n){return $i(n)&&!es(n).n_()&&n.N_.size>0}function $i(n){return se(n).L_.size===0}function BI(n){n.Q_=void 0}async function BB(n){n.q_.set("Online")}async function $B(n){n.N_.forEach((e,t)=>{Mm(n,e)})}async function zB(n,e){BI(n),Vm(n)?(n.q_.M_(e),Dm(n)):n.q_.set("Unknown")}async function qB(n,e,t){if(n.q_.set("Online"),e instanceof AI&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lc(n,r)}else if(e instanceof hu?n.Q_.Ke(e):e instanceof SI?n.Q_.He(e):n.Q_.We(e),!t.isEqual(oe.min()))try{const r=await LI(n.localStore);t.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.N_.get(c);h&&o.N_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.N_.get(l);if(!h)return;o.N_.set(l,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),FI(o,l);const m=new Rr(h.target,l,c,h.sequenceNumber);Mm(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await lc(n,r)}}async function lc(n,e,t){if(!Ka(e))throw e;n.L_.add(1),await Qa(n),n.q_.set("Offline"),t||(t=()=>LI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Wc(n)})}function $I(n,e){return e().catch(t=>lc(n,t,e))}async function Kc(n){const e=se(n),t=Jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GB(e);)try{const i=await RB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,HB(e,i)}catch(i){await lc(e,i)}zI(e)&&qI(e)}function GB(n){return $i(n)&&n.O_.length<10}function HB(n,e){n.O_.push(e);const t=Jr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zI(n){return $i(n)&&!Jr(n).n_()&&n.O_.length>0}function qI(n){Jr(n).start()}async function WB(n){Jr(n).p_()}async function KB(n){const e=Jr(n);for(const t of n.O_)e.m_(t.mutations)}async function JB(n,e,t){const r=n.O_.shift(),i=Sm.from(r,e,t);await $I(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Kc(n)}async function YB(n,e){e&&Jr(n).V_&&await async function(r,i){if(function(s){return O4(s)&&s!==B.ABORTED}(i.code)){const o=r.O_.shift();Jr(r).s_(),await $I(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Kc(r)}}(n,e),zI(n)&&qI(n)}async function WE(n,e){const t=se(n);t.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=$i(t);t.L_.add(3),await Qa(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Wc(t)}async function QB(n,e){const t=se(n);e?(t.L_.delete(2),await Wc(t)):e||(t.L_.add(2),await Qa(t),t.q_.set("Unknown"))}function es(n){return n.K_||(n.K_=function(t,r,i){const o=se(t);return o.w_(),new LB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BB.bind(null,n),Ro:$B.bind(null,n),mo:zB.bind(null,n),d_:qB.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Vm(n)?Dm(n):n.q_.set("Unknown")):(await n.K_.stop(),BI(n))})),n.K_}function Jr(n){return n.U_||(n.U_=function(t,r,i){const o=se(t);return o.w_(),new bB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WB.bind(null,n),mo:YB.bind(null,n),f_:KB.bind(null,n),g_:JB.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Kc(n)):(await n.U_.stop(),n.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new Lm(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(n,e){if(or("AsyncQueue",`${e}: ${n}`),Ka(n))return new Z(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=bs(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.W_=new be(j.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class qo{constructor(e,t,r,i,o,s,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new qo(e,t,Co.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ZB{constructor(){this.queries=JE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=se(t),o=i.queries;i.queries=JE(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function JE(){return new jo(n=>fI(n),Fc)}async function GI(n,e){const t=se(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new XB,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await t.onListen(i,!0);break;case 1:o.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const a=bm(s,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Om(t)}async function HI(n,e){const t=se(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function jB(n,e){const t=se(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Om(t)}function e9(n,e,t){const r=se(n),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(t);r.queries.delete(e)}function Om(n){n.Y_.forEach(e=>{e.next()})}var Xh,YE;(YE=Xh||(Xh={})).ea="default",YE.Cache="cache";class WI{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.key=e}}class JI{constructor(e){this.key=e}}class t9{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=hI(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new KE,i=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const g=i.get(h),v=Bc(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;g&&v?g.data.isEqual(v.data)?T!==k&&(r.track({type:3,doc:v}),N=!0):this.ga(g,v)||(r.track({type:2,doc:v}),N=!0,(l&&this.Aa(v,l)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),N=!0):g&&!v&&(r.track({type:1,doc:g}),N=!0,(l||c)&&(a=!0)),N&&(v?(s=s.add(v),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,m)=>function(v,T){const k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return k(v)-k(T)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new qo(this.query,e.Ra,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new KE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new JI(r))}),this.da.forEach(r=>{e.has(r)||t.push(new KI(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class r9{constructor(e){this.key=e,this.va=!1}}class i9{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new jo(a=>fI(a),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new be(j.comparator),this.Na=new Map,this.La=new Pm,this.Ba={},this.ka=new Map,this.qa=zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function o9(n,e,t=!0){const r=eS(n);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await YI(r,e,t,!0),i}async function s9(n,e){const t=eS(n);await YI(t,e,!0,!1)}async function YI(n,e,t,r){const i=await PB(n.localStore,An(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=await a9(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&UI(n.remoteStore,i),a}async function a9(n,e,t,r,i){n.Ka=(m,g,v)=>async function(k,N,S,C){let R=N.view.ma(S);R.ns&&(R=await qE(k.localStore,N.query,!1).then(({documents:P})=>N.view.ma(P,R)));const D=C&&C.targetChanges.get(N.targetId),O=C&&C.targetMismatches.get(N.targetId)!=null,U=N.view.applyChanges(R,k.isPrimaryClient,D,O);return XE(k,N.targetId,U.wa),U.snapshot}(n,m,g,v);const o=await qE(n.localStore,e,!0),s=new t9(e,o.Ts),a=s.ma(o.documents),l=Ya.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=s.applyChanges(a,n.isPrimaryClient,l);XE(n,t,c.wa);const h=new n9(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function l9(n,e,t){const r=se(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Fc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Nm(r.remoteStore,i.targetId),Zh(r,i.targetId)}).catch(Wa)):(Zh(r,i.targetId),await Qh(r.localStore,i.targetId,!0))}async function u9(n,e){const t=se(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nm(t.remoteStore,r.targetId))}async function c9(n,e,t){const r=y9(n);try{const i=await function(s,a){const l=se(s),c=je.now(),h=a.reduce((v,T)=>v.add(T.key),ce());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=sr(),k=ce();return l.cs.getEntries(v,h).next(N=>{T=N,T.forEach((S,C)=>{C.isValidDocument()||(k=k.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,T)).next(N=>{m=N;const S=[];for(const C of a){const R=M4(C,m.get(C.key).overlayedDocument);R!=null&&S.push(new ti(C.key,R,oI(R.value.mapValue),Ot.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,S,a)}).next(N=>{g=N;const S=N.applyToLocalDocumentSet(m,k);return l.documentOverlayCache.saveOverlays(v,N.batchId,S)})}).then(()=>({batchId:g.batchId,changes:mI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new be(ge)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,t),await Xa(r,i.changes),await Kc(r.remoteStore)}catch(i){const o=bm(i,"Failed to persist write");t.reject(o)}}async function QI(n,e){const t=se(n);try{const r=await SB(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Na.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ee(s.va):i.removedDocuments.size>0&&(Ee(s.va),s.va=!1))}),await Xa(t,r,e)}catch(r){await Wa(r)}}function QE(n,e,t){const r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=se(s);l.onlineState=a;let c=!1;l.queries.forEach((h,m)=>{for(const g of m.j_)g.Z_(a)&&(c=!0)}),c&&Om(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d9(n,e,t){const r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new be(j.comparator);s=s.insert(o,_t.newNoDocument(o,oe.min()));const a=ce().add(o),l=new Gc(oe.min(),new Map,new be(ge),s,a);await QI(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),Um(r)}else await Qh(r.localStore,e,!1).then(()=>Zh(r,e,t)).catch(Wa)}async function f9(n,e){const t=se(n),r=e.batch.batchId;try{const i=await IB(t.localStore,e);ZI(t,r,null),XI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Xa(t,i)}catch(i){await Wa(i)}}async function h9(n,e,t){const r=se(n);try{const i=await function(s,a){const l=se(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(Ee(m!==null),h=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);ZI(r,e,t),XI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Xa(r,i)}catch(i){await Wa(i)}}function XI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ZI(n,e,t){const r=se(n);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Zh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||jI(n,r)})}function jI(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Nm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Um(n))}function XE(n,e,t){for(const r of t)r instanceof KI?(n.La.addReference(r.key,e),p9(n,r)):r instanceof JI?(Q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||jI(n,r.key)):ne()}function p9(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Q("SyncEngine","New document in limbo: "+t),n.xa.add(r),Um(n))}function Um(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new j(ke.fromString(e)),r=n.qa.next();n.Na.set(r,new r9(t)),n.Oa=n.Oa.insert(t,r),UI(n.remoteStore,new Rr(An(Cm(t.path)),r,"TargetPurposeLimboResolution",ym.oe))}}async function Xa(n,e,t){const r=se(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,t).then(c=>{var h;if((c||t)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){i.push(c);const m=xm.Wi(l.targetId,c);o.push(m)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,c){const h=se(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(c,g=>$.forEach(g.$i,v=>h.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>$.forEach(g.Ui,v=>h.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Ka(m))throw m;Q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const v=h.os.get(g),T=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(g,k)}}}(r.localStore,o))}async function m9(n,e){const t=se(n);if(!t.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await VI(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new Z(B.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xa(t,r.hs)}}function g9(n,e){const t=se(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const o=t.Ma.get(e);if(!o)return i;for(const s of o){const a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function eS(n){const e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d9.bind(null,e),e.Ca.d_=jB.bind(null,e.eventManager),e.Ca.$a=e9.bind(null,e.eventManager),e}function y9(n){const e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h9.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return CB(this.persistence,new TB,e.initialUser,this.serializer)}Ga(e){return new vB(km.Zr,this.serializer)}Wa(e){return new xB}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class jh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m9.bind(null,this.syncEngine),await QB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZB}()}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),r=function(o){return new VB(o)}(e.databaseInfo);return function(o,s,a,l){return new OB(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new FB(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>QE(this.syncEngine,t,0),function(){return HE.D()?new HE:new NB}())}createSyncEngine(e,t){return function(i,o,s,a,l,c,h){const m=new i9(i,o,s,a,l,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=se(i);Q("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Qa(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=nI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=bm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ff(n,e){n.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ZE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _9(n);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>WE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>WE(e.remoteStore,i)),n._onlineComponents=e}async function _9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await ff(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await ff(n,new uc)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await ff(n,new uc);return n._offlineComponents}async function nS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await ZE(n,n._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await ZE(n,new jh))),n._onlineComponents}function E9(n){return nS(n).then(e=>e.syncEngine)}async function rS(n){const e=await nS(n),t=e.eventManager;return t.onListen=o9.bind(null,e.syncEngine),t.onUnlisten=l9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=s9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=u9.bind(null,e.syncEngine),t}function T9(n,e,t={}){const r=new Qn;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const h=new tS({next:g=>{h.Za(),s.enqueueAndForget(()=>HI(o,m));const v=g.docs.has(a);!v&&g.fromCache?c.reject(new Z(B.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&l.source==="server"?c.reject(new Z(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new WI(Cm(a.path),h,{includeMetadataChanges:!0,_a:!0});return GI(o,m)}(await rS(n),n.asyncQueue,e,t,r)),r.promise}function w9(n,e,t={}){const r=new Qn;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const h=new tS({next:g=>{h.Za(),s.enqueueAndForget(()=>HI(o,m)),g.fromCache&&l.source==="server"?c.reject(new Z(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new WI(a,h,{includeMetadataChanges:!0,_a:!0});return GI(o,m)}(await rS(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n,e,t){if(!t)throw new Z(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C9(n,e,t,r){if(e===!0&&r===!0)throw new Z(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eT(n){if(!j.isDocumentKey(n))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tT(n){if(j.isDocumentKey(n))throw new Z(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne()}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fm(n);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F2;switch(r.type){case"firstParty":return new q2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=jE.get(t);r&&(Q("ComponentProvider","Removing Datastore"),jE.delete(t),r.terminate())}(this),Promise.resolve()}}function I9(n,e,t,r={}){var i;const o=(n=Nn(n,Jc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=lC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}n._authCredentials=new B2(new tI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yc(this.firestore,e,this._query)}}class Ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class $r extends Yc{constructor(e,t,r){super(e,t,Cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new j(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function Qc(n,e,...t){if(n=xe(n),oS("collection","path",e),n instanceof Jc){const r=ke.fromString(e,...t);return tT(r),new $r(n,null,r)}{if(!(n instanceof Ht||n instanceof $r))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ke.fromString(e,...t));return tT(r),new $r(n.firestore,null,r)}}function Go(n,e,...t){if(n=xe(n),arguments.length===1&&(e=nI.newId()),oS("doc","path",e),n instanceof Jc){const r=ke.fromString(e,...t);return eT(r),new Ht(n,null,new j(r))}{if(!(n instanceof Ht||n instanceof $r))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ke.fromString(e,...t));return eT(r),new Ht(n.firestore,n instanceof $r?n.converter:null,new j(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bI(this,"async_queue_retry"),this.Vu=()=>{const r=df();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=df();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=df();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ka(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Lm.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class zi extends Jc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rT(e),this._firestoreClient=void 0,await e}}}function S9(n,e){const t=typeof n=="object"?n:om(),r=typeof n=="string"?n:"(default)",i=Dc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=oC("firestore");o&&I9(i,...o)}return i}function Xc(n){if(n._terminated)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||A9(n),n._firestoreClient}function A9(n){var e,t,r;const i=n._freezeSettings(),o=function(a,l,c,h){return new n4(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new v9(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(ct.fromBase64String(e))}catch(t){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ho(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=/^__.*__$/;class P9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ja(e,this.data,t,this.fieldTransforms)}}class sS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class zm{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(aS(this.Cu)&&R9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class k9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hc(e)}Qu(e,t,r,i=!1){return new zm({Cu:e,methodName:t,qu:r,path:st.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qm(n){const e=n._freezeSettings(),t=Hc(n._databaseId);return new k9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lS(n,e,t,r,i,o={}){const s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Hm("Data must be an object, but it was:",s,r);const a=dS(r,s);let l,c;if(o.merge)l=new $t(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const m of o.mergeFields){const g=ep(e,m,t);if(!s.contains(g))throw new Z(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);hS(h,g)||h.push(g)}l=new $t(h),c=s.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=s.fieldTransforms;return new P9(new Nt(a),l,c)}class jc extends Zc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}class Gm extends Zc{_toFieldTransform(e){return new P4(e.path,new xa)}isEqual(e){return e instanceof Gm}}function uS(n,e,t,r){const i=n.Qu(1,e,t);Hm("Data must be an object, but it was:",i,r);const o=[],s=Nt.empty();Bi(r,(l,c)=>{const h=Wm(e,l,t);c=xe(c);const m=i.Nu(h);if(c instanceof jc)o.push(h);else{const g=ed(c,m);g!=null&&(o.push(h),s.set(h,g))}});const a=new $t(o);return new sS(s,a,i.fieldTransforms)}function cS(n,e,t,r,i,o){const s=n.Qu(1,e,t),a=[ep(e,r,t)],l=[i];if(o.length%2!=0)throw new Z(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(ep(e,o[g])),l.push(o[g+1]);const c=[],h=Nt.empty();for(let g=a.length-1;g>=0;--g)if(!hS(c,a[g])){const v=a[g];let T=l[g];T=xe(T);const k=s.Nu(v);if(T instanceof jc)c.push(v);else{const N=ed(T,k);N!=null&&(c.push(v),h.set(v,N))}}const m=new $t(c);return new sS(h,m,s.fieldTransforms)}function ed(n,e){if(fS(n=xe(n)))return Hm("Unsupported field value:",e,n),dS(n,e);if(n instanceof Zc)return function(r,i){if(!aS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=ed(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return S4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=je.fromDate(r);return{timestampValue:ac(i.serializer,o)}}if(r instanceof je){const o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(i.serializer,o)}}if(r instanceof Bm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ho)return{bytesValue:RI(i.serializer,r._byteString)};if(r instanceof Ht){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $m)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Im(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fm(r)}`)}(n,e)}function dS(n,e){const t={};return rI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bi(n,(r,i)=>{const o=ed(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function fS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Bm||n instanceof Ho||n instanceof Ht||n instanceof Zc||n instanceof $m)}function Hm(n,e,t){if(!fS(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Fm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function ep(n,e,t){if((e=xe(e))instanceof Za)return e._internalPath;if(typeof e=="string")return Wm(n,e);throw cc("Field path arguments must be of type string or ",n,!1,void 0,t)}const x9=new RegExp("[~\\*/\\[\\]]");function Wm(n,e,t){if(e.search(x9)>=0)throw cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Za(...e.split("."))._internalPath}catch{throw cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cc(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Z(B.INVALID_ARGUMENT,a+n+l)}function hS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class N9 extends pS{data(){return super.data()}}function mS(n,e){return typeof e=="string"?Wm(n,e):e instanceof Za?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D9{convertValue(e,t="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>qe(s.doubleValue));return new $m(o)}convertGeoPoint(e){return new Bm(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_m(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const t=Kr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ke.fromString(e);Ee(DI(r));const i=new Pa(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(t)||or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yS extends pS{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pu extends yS{data(e={}){return super.data(e)}}class V9{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Us(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pu(this._firestore,this._userDataWriter,r.key,r,new Us(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new pu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Us(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new pu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Us(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:L9(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(n){n=Nn(n,Ht);const e=Nn(n.firestore,zi);return T9(Xc(e),n._key).then(t=>B9(e,n,t))}class vS extends D9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function _S(n){n=Nn(n,Yc);const e=Nn(n.firestore,zi),t=Xc(e),r=new vS(e);return M9(n._query),w9(t,n._query).then(i=>new V9(e,r,n,i))}function O9(n,e,t,...r){n=Nn(n,Ht);const i=Nn(n.firestore,zi),o=qm(i);let s;return s=typeof(e=xe(e))=="string"||e instanceof Za?cS(o,"updateDoc",n._key,e,t,r):uS(o,"updateDoc",n._key,e),td(i,[s.toMutation(n._key,Ot.exists(!0))])}function U9(n){return td(Nn(n.firestore,zi),[new qc(n._key,Ot.none())])}function F9(n,e){const t=Nn(n.firestore,zi),r=Go(n),i=gS(n.converter,e);return td(t,[lS(qm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ot.exists(!1))]).then(()=>r)}function td(n,e){return function(r,i){const o=new Qn;return r.asyncQueue.enqueueAndForget(async()=>c9(await E9(r),i,o)),o.promise}(Xc(n),e)}function B9(n,e,t){const r=t.docs.get(e._key),i=new vS(n);return new yS(n,i,e._key,r,new Us(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qm(e)}set(e,t,r){this._verifyNotCommitted();const i=hf(e,this._firestore),o=gS(i.converter,t,r),s=lS(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ot.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=hf(e,this._firestore);let s;return s=typeof(t=xe(t))=="string"||t instanceof Za?cS(this._dataReader,"WriteBatch.update",o._key,t,r,i):uS(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ot.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hf(e,this._firestore);return this._mutations=this._mutations.concat(new qc(t._key,Ot.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(n,e){if((n=xe(n)).firestore!==e)throw new Z(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function z9(){return new Gm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(n){return Xc(n=Nn(n,zi)),new $9(n,e=>td(n,e))}(function(e,t=!0){(function(i){Zo=i})(Ui),Ri(new Hr("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new zi(new $2(r.getProvider("auth-internal")),new H2(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(c.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Sn(wE,"4.7.3",e),Sn(wE,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebasestorage.googleapis.com",TS="storageBucket",G9=2*60*1e3,H9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e extends Mn{constructor(e,t,r=0){super(pf(e),`Firebase Storage: ${t} (${pf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function pf(n){return"storage/"+n}function Km(){const n="An unknown error occurred, please check the error payload for server response.";return new $e(Be.UNKNOWN,n)}function W9(n){return new $e(Be.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function K9(n){return new $e(Be.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function J9(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $e(Be.UNAUTHENTICATED,n)}function Y9(){return new $e(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q9(n){return new $e(Be.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function X9(){return new $e(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z9(){return new $e(Be.CANCELED,"User canceled the upload/download.")}function j9(n){return new $e(Be.INVALID_URL,"Invalid URL '"+n+"'.")}function e6(n){return new $e(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function t6(){return new $e(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TS+"' property when initializing the app?")}function n6(){return new $e(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function r6(){return new $e(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function i6(n){return new $e(Be.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(n){return new $e(Be.INVALID_ARGUMENT,n)}function wS(){return new $e(Be.APP_DELETED,"The Firebase app was deleted.")}function o6(n){return new $e(Be.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function na(n,e){return new $e(Be.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ss(n){throw new $e(Be.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zt.makeFromUrl(e,t)}catch{return new zt(e,"")}if(r.path==="")return r;throw e6(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${i}/o${g}`,"i"),T={bucket:1,path:3},k=t===ES?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",S=new RegExp(`^https?://${k}/${i}/${N}`,"i"),R=[{regex:a,indices:l,postModify:o},{regex:v,indices:T,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<R.length;D++){const O=R[D],U=O.regex.exec(e);if(U){const P=U[O.indices.bucket];let E=U[O.indices.path];E||(E=""),r=new zt(P,E),O.postModify(r);break}}if(r==null)throw j9(e);return r}}class s6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function h(...N){c||(c=!0,e.apply(null,N))}function m(N){i=setTimeout(()=>{i=null,n(v,l())},N)}function g(){o&&clearTimeout(o)}function v(N,...S){if(c){g();return}if(N){g(),h.call(null,N,...S);return}if(l()||s){g(),h.call(null,N,...S);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,m(R)}let T=!1;function k(N){T||(T=!0,g(),!c&&(i!==null?(N||(a=2),clearTimeout(i),m(0)):N||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,k(!0)},t),k}function l6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n){return n!==void 0}function c6(n){return typeof n=="object"&&!Array.isArray(n)}function Jm(n){return typeof n=="string"||n instanceof String}function iT(n){return Ym()&&n instanceof Blob}function Ym(){return typeof Blob<"u"}function oT(n,e,t,r){if(r<e)throw tp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw tp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function CS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var vi;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vi||(vi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,t,r,i,o,s,a,l,c,h,m,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new $l(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===vi.NO_ERROR,l=o.getStatus();if(!a||d6(l,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===vi.ABORT;r(!1,new $l(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new $l(c,o))})},t=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());u6(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=Km();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?wS():Z9();s(l)}else{const l=X9();s(l)}};this.canceled_?t(!1,new $l(!1,null,!0)):this.backoffId_=a6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $l{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function h6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function p6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function g6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function y6(n,e,t,r,i,o,s=!0){const a=CS(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return m6(c,e),h6(c,t),p6(c,o),g6(c,r),new f6(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _6(...n){const e=v6();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ym())return new Blob(n);throw new $e(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function E6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){if(typeof atob>"u")throw i6("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mf{constructor(e,t){this.data=e,this.contentType=t||null}}function w6(n,e){switch(n){case Tn.RAW:return new mf(IS(e));case Tn.BASE64:case Tn.BASE64URL:return new mf(SS(n,e));case Tn.DATA_URL:return new mf(I6(e),S6(e))}throw Km()}function IS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C6(n){let e;try{e=decodeURIComponent(n)}catch{throw na(Tn.DATA_URL,"Malformed data URL.")}return IS(e)}function SS(n,e){switch(n){case Tn.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw na(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw na(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=T6(e)}catch(i){throw i.message.includes("polyfill")?i:na(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class AS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw na(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=A6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function I6(n){const e=new AS(n);return e.base64?SS(Tn.BASE64,e.rest):C6(e.rest)}function S6(n){return new AS(n).contentType}function A6(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){let r=0,i="";iT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(iT(this.data_)){const r=this.data_,i=E6(r,e,t);return i===null?null:new Cr(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Cr(r,!0)}}static getBlob(...e){if(Ym()){const t=e.map(r=>r instanceof Cr?r.data_:r);return new Cr(_6.apply(null,t))}else{const t=e.map(s=>Jm(s)?w6(Tn.RAW,s).data:s.data_);let r=0;t.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Cr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n){let e;try{e=JSON.parse(n)}catch{return null}return c6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function P6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function PS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(n,e){return e}class It{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||k6}}let zl=null;function x6(n){return!Jm(n)||n.length<2?n:PS(n)}function kS(){if(zl)return zl;const n=[];n.push(new It("bucket")),n.push(new It("generation")),n.push(new It("metageneration")),n.push(new It("name","fullPath",!0));function e(o,s){return x6(s)}const t=new It("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}const i=new It("size");return i.xform=r,n.push(i),n.push(new It("timeCreated")),n.push(new It("updated")),n.push(new It("md5Hash",null,!0)),n.push(new It("cacheControl",null,!0)),n.push(new It("contentDisposition",null,!0)),n.push(new It("contentEncoding",null,!0)),n.push(new It("contentLanguage",null,!0)),n.push(new It("contentType",null,!0)),n.push(new It("metadata","customMetadata",!0)),zl=n,zl}function N6(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new zt(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function M6(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const s=t[o];r[s.local]=s.xform(r,e[s.server])}return N6(r,n),r}function xS(n,e,t){const r=RS(e);return r===null?null:M6(n,r,t)}function D6(n,e,t,r){const i=RS(e);if(i===null||!Jm(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const h=n.bucket,m=n.fullPath,g="/b/"+s(h)+"/o/"+s(m),v=Qm(g,t,r),T=CS({alt:"media",token:c});return v+T})[0]}function V6(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class NS{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(n){if(!n)throw Km()}function L6(n,e){function t(r,i){const o=xS(n,i,e);return MS(o!==null),o}return t}function b6(n,e){function t(r,i){const o=xS(n,i,e);return MS(o!==null),D6(o,i,n.host,n._protocol)}return t}function DS(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Y9():i=J9():t.getStatus()===402?i=K9(n.bucket):t.getStatus()===403?i=Q9(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function O6(n){const e=DS(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=W9(n.path)),o.serverResponse=i.serverResponse,o}return t}function U6(n,e,t){const r=e.fullServerUrl(),i=Qm(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new NS(i,o,b6(n,t),s);return a.errorHandler=O6(e),a}function F6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function B6(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=F6(null,e)),r}function $6(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let D=0;D<2;D++)R=R+Math.random().toString().slice(2);return R}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=B6(e,r,i),h=V6(c,t),m="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+l+"--",v=Cr.getBlob(m,r,g);if(v===null)throw n6();const T={name:c.fullPath},k=Qm(o,n.host,n._protocol),N="POST",S=n.maxUploadRetryTime,C=new NS(k,N,L6(n,t),S);return C.urlParams=T,C.headers=s,C.body=v.uploadData(),C.errorHandler=DS(e),C}class z6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ss("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ss("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ss("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ss("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ss("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class q6 extends z6{initXhr(){this.xhr_.responseType="text"}}function VS(){return new q6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t){this._service=e,t instanceof zt?this._location=t:this._location=zt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mi(e,t)}get root(){const e=new zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PS(this._location.path)}get storage(){return this._service}get parent(){const e=R6(this._location.path);if(e===null)return null;const t=new zt(this._location.bucket,e);return new Mi(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw o6(e)}}function G6(n,e,t){n._throwIfRoot("uploadBytes");const r=$6(n.storage,n._location,kS(),new Cr(e,!0),t);return n.storage.makeRequestWithTokens(r,VS).then(i=>({metadata:i,ref:n}))}function H6(n){n._throwIfRoot("getDownloadURL");const e=U6(n.storage,n._location,kS());return n.storage.makeRequestWithTokens(e,VS).then(t=>{if(t===null)throw r6();return t})}function W6(n,e){const t=P6(n._location.path,e),r=new zt(n._location.bucket,t);return new Mi(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(n){return/^[A-Za-z]+:\/\//.test(n)}function J6(n,e){return new Mi(n,e)}function LS(n,e){if(n instanceof Xm){const t=n;if(t._bucket==null)throw t6();const r=new Mi(t,t._bucket);return e!=null?LS(r,e):r}else return e!==void 0?W6(n,e):n}function Y6(n,e){if(e&&K6(e)){if(n instanceof Xm)return J6(n,e);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return LS(n,e)}function sT(n,e){const t=e==null?void 0:e[TS];return t==null?null:zt.makeFromBucketSpec(t,n)}function Q6(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:lC(i,n.app.options.projectId))}class Xm{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=ES,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G9,this._maxUploadRetryTime=H9,this._requests=new Set,i!=null?this._bucket=zt.makeFromBucketSpec(i,this._host):this._bucket=sT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zt.makeFromBucketSpec(this._url,e):this._bucket=sT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mi(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new s6(wS());{const s=y6(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const aT="@firebase/storage",lT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="storage";function X6(n,e,t){return n=xe(n),G6(n,e,t)}function Z6(n){return n=xe(n),H6(n)}function j6(n,e){return n=xe(n),Y6(n,e)}function e$(n=om(),e){n=xe(n);const r=Dc(n,bS).getImmediate({identifier:e}),i=oC("storage");return i&&t$(r,...i),r}function t$(n,e,t,r={}){Q6(n,e,t,r)}function n$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Xm(t,r,i,e,Ui)}function r$(){Ri(new Hr(bS,n$,"PUBLIC").setMultipleInstances(!0)),Sn(aT,lT,""),Sn(aT,lT,"esm2017")}r$();const i$={apiKey:"AIzaSyBY_pcF8fDl3f0VCnZ3qUl4AVsm7io910Q",authDomain:"go-top-pro.firebaseapp.com",projectId:"go-top-pro",storageBucket:"go-top-pro.firebasestorage.app",messagingSenderId:"533358276642",appId:"1:533358276642:web:cf71be01f9f66b2f885a7b"},Zm=dC(i$),Pr=O2(Zm),Xn=S9(Zm),o$=e$(Zm),s$=async n=>{try{const e=Go(Xn,"users",n),t=await b9(e);return t.exists()?{uid:n,...t.data()}:(console.log("No such user document!"),null)}catch(e){throw console.error("Error getting user data:",e),e}},a$=async(n,e)=>{try{const t=Go(Xn,"users",n);await O9(t,e)}catch(t){throw console.error("Error updating user data:",t),t}},l$=async(n,e)=>{try{const t=j6(o$,`profile-pictures/${n}/${e.name}`),r=await X6(t,e);return await Z6(r.ref)}catch(t){throw console.error("Error uploading profile picture:",t),t}},u$=async n=>{try{await F9(Qc(Xn,"pendingPurchases"),{...n,timestamp:z9()})}catch(e){throw console.error("Error saving pending purchase: ",e),new Error("Could not save your request. Please try again.")}},c$=async()=>{try{return(await _S(Qc(Xn,"pendingPurchases"))).docs.map(e=>({id:e.id,...e.data()}))}catch(n){return console.error("Error fetching pending purchases: ",n),[]}},d$=async(n,e,t)=>{if(!n.id)throw new Error("Purchase ID is missing.");const r=q9(Xn),i=Go(Qc(Xn,"users")),o={phone:n.phone,firstName:e,lastName:t,purchasedModules:n.modules,progress:{},badges:[],geminiCredits:3};r.set(i,o);const s=Go(Xn,"pendingPurchases",n.id);r.delete(s);try{await r.commit()}catch(a){throw console.error("Error approving purchase: ",a),a}},f$=async()=>(await _S(Qc(Xn,"users"))).docs.map(e=>({uid:e.id,...e.data()})),h$=async n=>{try{await U9(Go(Xn,"users",n))}catch(e){throw console.error("Error deleting user data: ",e),e}},p$=()=>I.createElement("div",{className:"flex flex-col items-center justify-center text-center p-8"},I.createElement("div",{className:"relative w-24 h-24 mb-4"},I.createElement("div",{className:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),I.createElement("div",{className:"absolute inset-0 border-4 border-t-indigo-600 rounded-full animate-spin"})),I.createElement("h3",{className:"text-xl font-semibold text-gray-800"},"Analyse en cours..."),I.createElement("p",{className:"text-gray-600 mt-2"},"Notre IA prpare votre parcours de formation personnalis. Cela peut prendre un moment.")),m$=({module:n,isRecommended:e,isSelected:t,onSelect:r})=>{const[i,o]=F.useState(!1);return I.createElement("div",{className:"border border-gray-200 rounded-lg mb-4 overflow-hidden transition-all duration-300 shadow-sm hover:shadow-md"},I.createElement("div",{className:`p-4 flex items-center justify-between cursor-pointer ${t?"bg-indigo-50":"bg-white"}`,onClick:()=>o(!i)},I.createElement("div",{className:"flex items-center gap-4"},I.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",onClick:s=>s.stopPropagation()}),I.createElement("div",null,I.createElement("h4",{className:"font-semibold text-gray-800"},n.title),I.createElement("p",{className:"text-sm text-gray-500"},n.topic))),I.createElement("div",{className:"flex items-center gap-3"},e&&I.createElement("span",{className:"text-xs font-semibold bg-green-100 text-green-800 px-2 py-1 rounded-full"},"Recommand"),I.createElement("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${i?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})))),i&&I.createElement("div",{className:"p-4 bg-gray-50 border-t border-gray-200"},I.createElement("p",{className:"text-gray-600"},n.mini_course)))};function g$(){const[n,e]=F.useState("quiz"),[t,r]=F.useState(0),[i,o]=F.useState({}),[s,a]=F.useState([]),[l,c]=F.useState([]),[h,m]=F.useState([]),[g,v]=F.useState(!1),[T,k]=F.useState(""),[N,S]=F.useState(null),C=w=>{o(A=>({...A,[t]:w})),t<si.length-1?r(A=>A+1):R()},R=async()=>{e("loading");const w=si.filter((M,V)=>i[V]===!1).map(M=>M.topic),A=[...new Set(w)];c(A);try{const M=[...new Set(si.map(x=>x.topic))],V=await Ab(M);a(V),S(null)}catch(M){S(M.message||"Une erreur est survenue lors de la gnration des modules."),console.error(M)}finally{e("results")}},D=w=>{m(A=>A.includes(w)?A.filter(M=>M!==w):[...A,w])},{totalPrice:O,discount:U}=F.useMemo(()=>{const w=h.length,A=w*$k;let M=0;return w>=13?M=.5:w>=9?M=.3:w>=5&&(M=.2),{totalPrice:Math.round(A*(1-M)),discount:M}},[h]),P=async()=>{if(!T||!/^\+?[0-9\s]{8,}$/.test(T)){alert("Veuillez entrer un numro de tlphone valide.");return}const w=s.filter(M=>h.includes(M.id));await u$({phone:T,modules:w,totalPrice:O}),v(!1);const A=`Bonjour, je viens de valider ma fiche pour ${w.length} module(s) Go'Top Pro pour un total de ${O.toFixed(0)} ${tu}. Voici ma preuve de paiement.`;window.open(`https://wa.me/2250708070690?text=${encodeURIComponent(A)}`,"_blank")},E=Object.values(i).filter(w=>w===!0).length;if(n==="quiz"){const w=t/si.length*100;return I.createElement("div",{className:"container mx-auto p-4 sm:p-8 max-w-3xl"},I.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg"},I.createElement("h2",{className:"text-2xl font-bold text-center mb-2"},"Diagnostic de votre tablissement"),I.createElement("p",{className:"text-center text-gray-600 mb-6"},"Question ",t+1," sur ",si.length),I.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-8"},I.createElement("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:`${w}%`}})),I.createElement("p",{className:"text-xl text-center mb-8 min-h-[6rem]"},si[t].text),I.createElement("div",{className:"flex justify-center gap-4"},I.createElement("button",{onClick:()=>C(!0),className:"px-8 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-transform transform hover:scale-105"},"Oui"),I.createElement("button",{onClick:()=>C(!1),className:"px-8 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-transform transform hover:scale-105"},"Non"))))}return n==="loading"?I.createElement("div",{className:"container mx-auto p-4 sm:p-8"},I.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg"},I.createElement(p$,null))):I.createElement("div",{className:"container mx-auto p-4 sm:p-8"},I.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg mb-8"},I.createElement("h2",{className:"text-3xl font-bold text-center mb-2"},"Vos Rsultats & Recommandations"),I.createElement("div",{className:"text-center text-lg text-gray-700 mb-4"},"Votre score: ",I.createElement("span",{className:"font-bold text-indigo-600"},E," / ",si.length)),I.createElement("p",{className:"text-center text-gray-600 max-w-2xl mx-auto"},E<8?"Il y a des opportunits d'amlioration significatives. Nos modules peuvent vous aider  transformer vos pratiques.":E<14?"Vos pratiques sont solides, mais il y a toujours de la place pour l'excellence. Ciblez des modules spcifiques pour perfectionner vos comptences.":"Excellent ! Vos pratiques sont dj  un niveau lev. Explorez nos modules pour garder une longueur d'avance.")),N&&I.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},N),I.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},I.createElement("div",{className:"lg:col-span-2"},I.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Catalogue de formations"),s.map(w=>I.createElement(m$,{key:w.id,module:w,isRecommended:l.includes(w.topic),isSelected:h.includes(w.id),onSelect:()=>D(w.id)}))),I.createElement("div",{className:"lg:col-span-1"},I.createElement("div",{className:"sticky top-24 bg-white p-6 rounded-xl shadow-lg"},I.createElement("h3",{className:"text-xl font-semibold mb-4"},"Votre Panier"),I.createElement("p",{className:"text-gray-600 mb-2"},h.length," module(s) slectionn(s)"),U>0&&I.createElement("p",{className:"text-sm text-green-600 font-medium mb-4"},"Remise de ",(U*100).toFixed(0),"% applique !"),I.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-6"},O.toFixed(0)," ",tu),I.createElement("button",{onClick:()=>v(!0),disabled:h.length===0,className:"w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition"},"Acheter les modules")))),g&&I.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},I.createElement("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-lg w-full"},I.createElement("h2",{className:"text-2xl font-bold mb-4"},"Finaliser la commande"),I.createElement("div",{className:"mb-4"},I.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Votre numro de tlphone"),I.createElement("input",{type:"tel",id:"phone",value:T,onChange:w=>k(w.target.value),placeholder:"+225 0708070690",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),I.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Ce numro sera utilis pour crer votre compte.")),I.createElement("div",{className:"bg-gray-50 p-4 rounded-md mb-6"},I.createElement("h4",{className:"font-semibold"},"Rcapitulatif"),I.createElement("p",null,h.length," module(s) pour un total de ",I.createElement("span",{className:"font-bold"},O.toFixed(0)," ",tu))),I.createElement("div",{className:"mb-6"},I.createElement("h4",{className:"font-semibold mb-2"},"Instructions de paiement"),I.createElement("p",{className:"text-sm text-gray-600"},"Veuillez effectuer votre paiement via l'un des moyens suivants :"),I.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-2"},I.createElement("li",null,"Mobile Money: +225 0708070690"),I.createElement("li",null,"Wave/Djamo: ",I.createElement("a",{href:"#",className:"text-indigo-600"},"Lien de paiement")))),I.createElement("div",{className:"flex gap-4"},I.createElement("button",{onClick:()=>v(!1),className:"w-full py-2 px-4 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"},"Annuler"),I.createElement("button",{onClick:P,className:"w-full py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},"Valider la fiche")),I.createElement("p",{className:"text-xs text-gray-500 text-center mt-4"},"Aprs validation, envoyez la preuve de paiement sur WhatsApp."))))}function gf(){const n=Zp(),[e,t]=F.useState(!1),[r,i]=F.useState(""),[o,s]=F.useState(""),[a,l]=F.useState(null),[c,h]=F.useState(""),[m,g]=F.useState(""),[v,T]=F.useState(""),[k,N]=F.useState("user");F.useEffect(()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new OF(Pr,"recaptcha-container",{size:"invisible",callback:D=>{}}))},[]);const S=async D=>{if(D.preventDefault(),T(""),t(!0),!window.recaptchaVerifier){T("reCAPTCHA not initialized."),t(!1);return}try{const O=await BF(Pr,`+${r.replace(/\D/g,"")}`,window.recaptchaVerifier);l(O)}catch(O){T(O.message),window.recaptchaVerifier.render().then(U=>{window.recaptchaWidgetId=U})}finally{t(!1)}},C=async D=>{if(D.preventDefault(),T(""),t(!0),!a){T("Please request an OTP first."),t(!1);return}try{await a.confirm(o),n("/dashboard")}catch(O){T(O.message)}finally{t(!1)}},R=async D=>{D.preventDefault(),T(""),t(!0);try{(await oF(Pr,c,m)).user.email==="admin@gotop.pro"?n("/admin"):T("Accs non autoris.")}catch(O){T(O.message)}finally{t(!1)}};return I.createElement("div",{className:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},I.createElement("div",{id:"recaptcha-container"}),I.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md"},I.createElement("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"Connectez-vous  votre compte")),I.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},I.createElement("div",{className:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},I.createElement("div",{className:"mb-6 border-b border-gray-200"},I.createElement("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs"},I.createElement("button",{onClick:()=>N("user"),className:`${k==="user"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium`},"Client"),I.createElement("button",{onClick:()=>N("admin"),className:`${k==="admin"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium`},"Admin"))),k==="user"&&I.createElement("form",{className:"space-y-6",onSubmit:a?C:S},a?I.createElement("div",null,I.createElement("label",{htmlFor:"otp",className:"block text-sm font-medium leading-6 text-gray-900"},"Code de vrification"),I.createElement("div",{className:"mt-2"},I.createElement("input",{id:"otp",name:"otp",type:"text",value:o,onChange:D=>s(D.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}))):I.createElement("div",null,I.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-gray-900"},"Numro de tlphone"),I.createElement("div",{className:"mt-2"},I.createElement("input",{id:"phone",name:"phone",type:"tel",value:r,onChange:D=>i(D.target.value),autoComplete:"tel",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}))),v&&I.createElement("p",{className:"text-red-500 text-sm"},v),I.createElement("div",null,I.createElement("button",{type:"submit",disabled:e,className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-indigo-300"},e?"Envoi...":a?"Vrifier le code":"Recevoir le code"))),k==="admin"&&I.createElement("form",{className:"space-y-6",onSubmit:R},I.createElement("div",null,I.createElement("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900"},"Adresse email"),I.createElement("input",{id:"email",type:"email",value:c,onChange:D=>h(D.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5"})),I.createElement("div",null,I.createElement("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900"},"Mot de passe"),I.createElement("input",{id:"password",type:"password",value:m,onChange:D=>g(D.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5"})),v&&I.createElement("p",{className:"text-red-500 text-sm"},v),I.createElement("div",null,I.createElement("button",{type:"submit",disabled:e,className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:bg-indigo-300"},e?"Connexion...":"Se connecter"))))))}function y$(){const[n,e]=F.useState(null),[t,r]=F.useState(!0),[i,o]=F.useState("modules"),s=F.useCallback(async()=>{if(Pr.currentUser){const a=await s$(Pr.currentUser.uid);if(a)e(a);else{const l={uid:Pr.currentUser.uid,phone:Pr.currentUser.phoneNumber};e(l)}r(!1)}},[]);return F.useEffect(()=>{s()},[s]),t?I.createElement("div",null,"Chargement du tableau de bord..."):n?I.createElement("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8"},I.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Bienvenue, ",n.firstName||"Utilisateur"," !"),I.createElement("p",{className:"text-gray-600 mb-8"},"Votre espace personnel pour grer vos formations et suivre votre progression."),I.createElement("div",{className:"border-b border-gray-200 mb-8"},I.createElement("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs"},I.createElement("button",{onClick:()=>o("modules"),className:`${i==="modules"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`},"Mes Modules"),I.createElement("button",{onClick:()=>o("progress"),className:`${i==="progress"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`},"Progression"),I.createElement("button",{onClick:()=>o("rewards"),className:`${i==="rewards"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`},"Rcompenses"),I.createElement("button",{onClick:()=>o("profile"),className:`${i==="profile"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`},"Mon Profil"))),I.createElement("div",null,i==="modules"&&I.createElement(v$,{user:n}),i==="progress"&&I.createElement(_$,{user:n}),i==="rewards"&&I.createElement(E$,{user:n}),i==="profile"&&I.createElement(T$,{user:n,onUpdate:s}))):I.createElement("div",null,"Utilisateur non trouv.")}const v$=({user:n})=>{const e=t=>alert(`Navigating to module ${t}`);return!n.purchasedModules||n.purchasedModules.length===0?I.createElement("div",null,I.createElement("p",null,"Vous n'avez achet aucun module pour le moment.")):I.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.purchasedModules.map(t=>I.createElement("div",{key:t.id,onClick:()=>e(t.id),className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow cursor-pointer overflow-hidden"},I.createElement("img",{src:t.infographic_url,alt:t.title,className:"h-40 w-full object-cover"}),I.createElement("div",{className:"p-6"},I.createElement("span",{className:"text-sm text-indigo-600 font-semibold"},t.topic),I.createElement("h3",{className:"text-lg font-bold mt-1"},t.title),I.createElement("p",{className:"text-sm text-gray-600 mt-2 h-16 overflow-hidden"},t.mini_course),I.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 text-right"},I.createElement("span",{className:"text-sm font-medium text-gray-500"},"Non commenc"))))))},_$=({user:n})=>I.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md"},I.createElement("h2",{className:"text-xl font-bold mb-4"},"Votre Progression"),I.createElement("p",null,"Pourcentage global de compltion: 0%"),I.createElement("p",null,"Nombre de modules termins: 0")),E$=({user:n})=>{var e;return I.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md"},I.createElement("h2",{className:"text-xl font-bold mb-4"},"Vos Rcompenses"),I.createElement("p",null,"Badges obtenus: ",((e=n.badges)==null?void 0:e.length)||0))},T$=({user:n,onUpdate:e})=>{const[t,r]=F.useState({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",establishmentName:n.establishmentName||"",sector:n.sector||""}),[i,o]=F.useState(!1),[s,a]=F.useState(null),l=m=>{r({...t,[m.target.name]:m.target.value})},c=m=>{m.target.files&&m.target.files[0]&&a(m.target.files[0])},h=async m=>{m.preventDefault(),o(!0);let g=n.photoURL;s&&(g=await l$(n.uid,s)),await a$(n.uid,{...t,photoURL:g}),o(!1),e(),alert("Profil mis  jour !")};return I.createElement("div",{className:"bg-white p-8 rounded-lg shadow-md"},I.createElement("form",{onSubmit:h,className:"space-y-6"},I.createElement("div",{className:"flex items-center gap-4"},I.createElement("img",{src:n.photoURL||`https://ui-avatars.com/api/?name=${n.firstName}+${n.lastName}&color=7F9CF5&background=EBF4FF`,alt:"Profile",className:"h-24 w-24 rounded-full object-cover"}),I.createElement("div",null,I.createElement("label",{htmlFor:"photoURL",className:"block text-sm font-medium text-gray-700"},"Changer la photo de profil"),I.createElement("input",{id:"photoURL",type:"file",onChange:c,className:"mt-1 text-sm"}))),I.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},I.createElement("div",null,I.createElement("label",null,"Prnom"),I.createElement("input",{type:"text",name:"firstName",value:t.firstName,onChange:l,className:"w-full mt-1 border-gray-300 rounded-md shadow-sm"})),I.createElement("div",null,I.createElement("label",null,"Nom"),I.createElement("input",{type:"text",name:"lastName",value:t.lastName,onChange:l,className:"w-full mt-1 border-gray-300 rounded-md shadow-sm"})),I.createElement("div",null,I.createElement("label",null,"Email"),I.createElement("input",{type:"email",name:"email",value:t.email,onChange:l,className:"w-full mt-1 border-gray-300 rounded-md shadow-sm"})),I.createElement("div",null,I.createElement("label",null,"Nom de l'tablissement"),I.createElement("input",{type:"text",name:"establishmentName",value:t.establishmentName,onChange:l,className:"w-full mt-1 border-gray-300 rounded-md shadow-sm"})),I.createElement("div",null,I.createElement("label",null,"Secteur d'activit"),I.createElement("select",{name:"sector",value:t.sector,onChange:l,className:"w-full mt-1 border-gray-300 rounded-md shadow-sm"},I.createElement("option",{value:""},"Slectionner..."),I.createElement("option",{value:"beauty"},"Beaut"),I.createElement("option",{value:"restaurant"},"Restauration"),I.createElement("option",{value:"retail"},"Boutique")))),I.createElement("div",null,I.createElement("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400"},i?"Sauvegarde...":"Sauvegarder les modifications"))))};function w$(){const[n,e]=F.useState("purchases");return I.createElement("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8"},I.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-8"},"Tableau de bord Administrateur"),I.createElement("div",{className:"border-b border-gray-200 mb-8"},I.createElement("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs"},I.createElement("button",{onClick:()=>e("purchases"),className:`${n==="purchases"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`},"Commandes en attente"),I.createElement("button",{onClick:()=>e("users"),className:`${n==="users"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`},"Gestion des utilisateurs"))),I.createElement("div",null,n==="purchases"&&I.createElement(C$,null),n==="users"&&I.createElement(I$,null)))}const C$=()=>{const[n,e]=F.useState([]),[t,r]=F.useState(!0),[i,o]=F.useState({}),s=F.useCallback(async()=>{r(!0);const c=await c$();e(c),r(!1)},[]);F.useEffect(()=>{s()},[s]);const a=async c=>{const h=i[c.id];if(!h||!h.firstName||!h.lastName){alert("Veuillez entrer le prnom et le nom de l'utilisateur.");return}await d$(c,h.firstName,h.lastName),alert(`L'utilisateur ${h.firstName} ${h.lastName} a t cr.`),s()},l=(c,h,m)=>{o(g=>({...g,[c]:{...g[c],[h]:m}}))};return t?I.createElement("div",null,"Chargement..."):I.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md"},n.length===0?I.createElement("p",null,"Aucune commande en attente."):I.createElement("ul",{className:"divide-y divide-gray-200"},n.map(c=>I.createElement("li",{key:c.id,className:"py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},I.createElement("div",null,I.createElement("p",{className:"font-medium"},"Tlphone: ",c.phone),I.createElement("p",{className:"text-sm text-gray-500"},c.modules.length," module(s) - ",c.totalPrice.toFixed(0)," ",tu)),I.createElement("div",{className:"flex gap-2 items-center"},I.createElement("input",{type:"text",placeholder:"Prnom",onChange:h=>l(c.id,"firstName",h.target.value),className:"p-1 border rounded-md text-sm"}),I.createElement("input",{type:"text",placeholder:"Nom",onChange:h=>l(c.id,"lastName",h.target.value),className:"p-1 border rounded-md text-sm"}),I.createElement("button",{onClick:()=>a(c),className:"px-3 py-1 bg-green-500 text-white text-sm rounded-md hover:bg-green-600"},"Approuver"))))))},I$=()=>{const[n,e]=F.useState([]),[t,r]=F.useState(!0),i=F.useCallback(async()=>{r(!0);const s=await f$();e(s),r(!1)},[]);F.useEffect(()=>{i()},[i]);const o=async(s,a)=>{window.confirm(`tes-vous sr de vouloir supprimer ${a} ? Cette action est irrversible.`)&&(await h$(s),alert("Utilisateur supprim."),i())};return t?I.createElement("div",null,"Chargement..."):I.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md"},I.createElement("ul",{className:"divide-y divide-gray-200"},n.map(s=>I.createElement("li",{key:s.uid,className:"py-3 flex items-center justify-between"},I.createElement("div",null,I.createElement("p",{className:"font-medium"},s.firstName," ",s.lastName),I.createElement("p",{className:"text-sm text-gray-500"},s.phone)),I.createElement("button",{onClick:()=>o(s.uid,`${s.firstName} ${s.lastName}`),className:"px-3 py-1 bg-red-500 text-white text-sm rounded-md hover:bg-red-600"},"Supprimer")))))},S$=()=>I.createElement("svg",{className:"h-8 w-8 text-indigo-600",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I.createElement("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),I.createElement("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),I.createElement("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),A$=({user:n,isAdmin:e})=>{const t=Zp(),r=async()=>{await uF(),t("/")};return I.createElement("header",{className:"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40"},I.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},I.createElement("div",{className:"flex items-center justify-between h-16"},I.createElement(zn,{to:"/",className:"flex items-center gap-2"},I.createElement(S$,null),I.createElement("span",{className:"text-xl font-bold text-gray-800"},"Go'Top Pro")),I.createElement("nav",{className:"flex items-center gap-4"},!n&&I.createElement(zn,{to:"/quiz",className:"text-sm font-medium text-gray-600 hover:text-indigo-600"},"valuation"),n?I.createElement(I.Fragment,null,e?I.createElement(zn,{to:"/admin",className:"text-sm font-medium text-gray-600 hover:text-indigo-600"},"Admin"):I.createElement(zn,{to:"/dashboard",className:"text-sm font-medium text-gray-600 hover:text-indigo-600"},"Mon Compte"),I.createElement("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700"},"Dconnexion")):I.createElement(zn,{to:"/login",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700"},"Se connecter")))))},R$=()=>I.createElement("footer",{className:"bg-white border-t mt-auto"},I.createElement("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500"},I.createElement("p",null," ",new Date().getFullYear()," Go'Top Pro. Tous droits rservs."),I.createElement("div",{className:"mt-2 space-x-4"},I.createElement(zn,{to:"/legal",className:"hover:text-indigo-600"},"Mentions Lgales"),I.createElement(zn,{to:"/privacy",className:"hover:text-indigo-600"},"Politique de Confidentialit")))),P$=()=>{const[n,e]=F.useState(null),[t,r]=F.useState(!1),[i,o]=F.useState(!0);if(Fa(),F.useEffect(()=>{const l=lF(Pr,c=>{e(c),r((c==null?void 0:c.email)==="admin@gotop.pro"),o(!1)});return()=>l()},[]),i)return I.createElement("div",{className:"h-screen w-screen flex items-center justify-center"},I.createElement("p",null,"Loading..."));const s=()=>I.createElement("div",{className:"container mx-auto p-8"},I.createElement("h1",null,"Mentions Lgales"),I.createElement("p",null,"Contenu  venir...")),a=()=>I.createElement("div",{className:"container mx-auto p-8"},I.createElement("h1",null,"Politique de Confidentialit"),I.createElement("p",null,"Contenu  venir..."));return I.createElement("div",{className:"min-h-screen flex flex-col bg-gray-50"},I.createElement(A$,{user:n,isAdmin:t}),I.createElement("main",{className:"flex-grow"},I.createElement(kk,null,I.createElement(hr,{path:"/",element:I.createElement(Bk,null)}),I.createElement(hr,{path:"/quiz",element:I.createElement(g$,null)}),I.createElement(hr,{path:"/login",element:I.createElement(gf,null)}),I.createElement(hr,{path:"/dashboard/*",element:n&&!t?I.createElement(y$,null):I.createElement(gf,null)}),I.createElement(hr,{path:"/admin",element:n&&t?I.createElement(w$,null):I.createElement(gf,null)}),I.createElement(hr,{path:"/legal",element:I.createElement(s,null)}),I.createElement(hr,{path:"/privacy",element:I.createElement(a,null)}))),I.createElement(R$,null))};function k$(){return I.createElement(bk,null,I.createElement(P$,null))}const OS=document.getElementById("root");if(!OS)throw new Error("Could not find root element to mount to");const x$=yf.createRoot(OS);x$.render(I.createElement(I.StrictMode,null,I.createElement(k$,null)));
